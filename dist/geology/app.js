!function t(e,n,i){function o(r,a){if(!n[r]){if(!e[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(s)return s(r,!0);var h=new Error("Cannot find module '"+r+"'");throw h.code="MODULE_NOT_FOUND",h}var c=n[r]={exports:{}};e[r][0].call(c.exports,function(t){var n=e[r][1][t];return o(n?n:t)},c,c.exports,t,e,n,i)}return n[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(t,e,n){(function(e){"use strict";function n(t,e,n){t[e]||Object[i](t,e,{writable:!0,configurable:!0,value:n})}if(t("core-js/shim"),t("regenerator-runtime/runtime"),t("core-js/fn/regexp/escape"),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var i="defineProperty";n(String.prototype,"padLeft","".padStart),n(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&n(Array,t,Function.call.bind([][t]))})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"core-js/fn/regexp/escape":2,"core-js/shim":295,"regenerator-runtime/runtime":368}],2:[function(t,e,n){t("../../modules/core.regexp.escape"),e.exports=t("../../modules/_core").RegExp.escape},{"../../modules/_core":23,"../../modules/core.regexp.escape":119}],3:[function(t,e,n){e.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},{}],4:[function(t,e,n){var i=t("./_cof");e.exports=function(t,e){if("number"!=typeof t&&"Number"!=i(t))throw TypeError(e);return+t}},{"./_cof":18}],5:[function(t,e,n){var i=t("./_wks")("unscopables"),o=Array.prototype;void 0==o[i]&&t("./_hide")(o,i,{}),e.exports=function(t){o[i][t]=!0}},{"./_hide":40,"./_wks":117}],6:[function(t,e,n){e.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},{}],7:[function(t,e,n){var i=t("./_is-object");e.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},{"./_is-object":49}],8:[function(t,e,n){"use strict";var i=t("./_to-object"),o=t("./_to-index"),s=t("./_to-length");e.exports=[].copyWithin||function(t,e){var n=i(this),r=s(n.length),a=o(t,r),l=o(e,r),h=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===h?r:o(h,r))-l,r-a),u=1;for(l<a&&a<l+c&&(u=-1,l+=c-1,a+=c-1);c-- >0;)l in n?n[a]=n[l]:delete n[a],a+=u,l+=u;return n}},{"./_to-index":105,"./_to-length":108,"./_to-object":109}],9:[function(t,e,n){"use strict";var i=t("./_to-object"),o=t("./_to-index"),s=t("./_to-length");e.exports=function(t){for(var e=i(this),n=s(e.length),r=arguments.length,a=o(r>1?arguments[1]:void 0,n),l=r>2?arguments[2]:void 0,h=void 0===l?n:o(l,n);h>a;)e[a++]=t;return e}},{"./_to-index":105,"./_to-length":108,"./_to-object":109}],10:[function(t,e,n){var i=t("./_for-of");e.exports=function(t,e){var n=[];return i(t,!1,n.push,n,e),n}},{"./_for-of":37}],11:[function(t,e,n){var i=t("./_to-iobject"),o=t("./_to-length"),s=t("./_to-index");e.exports=function(t){return function(e,n,r){var a,l=i(e),h=o(l.length),c=s(r,h);if(t&&n!=n){for(;h>c;)if(a=l[c++],a!=a)return!0}else for(;h>c;c++)if((t||c in l)&&l[c]===n)return t||c||0;return!t&&-1}}},{"./_to-index":105,"./_to-iobject":107,"./_to-length":108}],12:[function(t,e,n){var i=t("./_ctx"),o=t("./_iobject"),s=t("./_to-object"),r=t("./_to-length"),a=t("./_array-species-create");e.exports=function(t,e){var n=1==t,l=2==t,h=3==t,c=4==t,u=6==t,d=5==t||u,p=e||a;return function(e,a,m){for(var f,_,g=s(e),v=o(g),y=i(a,m,3),b=r(v.length),x=0,L=n?p(e,b):l?p(e,0):void 0;b>x;x++)if((d||x in v)&&(f=v[x],_=y(f,x,g),t))if(n)L[x]=_;else if(_)switch(t){case 3:return!0;case 5:return f;case 6:return x;case 2:L.push(f)}else if(c)return!1;return u?-1:h||c?c:L}}},{"./_array-species-create":15,"./_ctx":25,"./_iobject":45,"./_to-length":108,"./_to-object":109}],13:[function(t,e,n){var i=t("./_a-function"),o=t("./_to-object"),s=t("./_iobject"),r=t("./_to-length");e.exports=function(t,e,n,a,l){i(e);var h=o(t),c=s(h),u=r(h.length),d=l?u-1:0,p=l?-1:1;if(n<2)for(;;){if(d in c){a=c[d],d+=p;break}if(d+=p,l?d<0:u<=d)throw TypeError("Reduce of empty array with no initial value")}for(;l?d>=0:u>d;d+=p)d in c&&(a=e(a,c[d],d,h));return a}},{"./_a-function":3,"./_iobject":45,"./_to-length":108,"./_to-object":109}],14:[function(t,e,n){var i=t("./_is-object"),o=t("./_is-array"),s=t("./_wks")("species");e.exports=function(t){var e;return o(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!o(e.prototype)||(e=void 0),i(e)&&(e=e[s],null===e&&(e=void 0))),void 0===e?Array:e}},{"./_is-array":47,"./_is-object":49,"./_wks":117}],15:[function(t,e,n){var i=t("./_array-species-constructor");e.exports=function(t,e){return new(i(t))(e)}},{"./_array-species-constructor":14}],16:[function(t,e,n){"use strict";var i=t("./_a-function"),o=t("./_is-object"),s=t("./_invoke"),r=[].slice,a={},l=function(t,e,n){if(!(e in a)){for(var i=[],o=0;o<e;o++)i[o]="a["+o+"]";a[e]=Function("F,a","return new F("+i.join(",")+")")}return a[e](t,n)};e.exports=Function.bind||function(t){var e=i(this),n=r.call(arguments,1),a=function(){var i=n.concat(r.call(arguments));return this instanceof a?l(e,i.length,i):s(e,i,t)};return o(e.prototype)&&(a.prototype=e.prototype),a}},{"./_a-function":3,"./_invoke":44,"./_is-object":49}],17:[function(t,e,n){var i=t("./_cof"),o=t("./_wks")("toStringTag"),s="Arguments"==i(function(){return arguments}()),r=function(t,e){try{return t[e]}catch(n){}};e.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=r(e=Object(t),o))?n:s?i(e):"Object"==(a=i(e))&&"function"==typeof e.callee?"Arguments":a}},{"./_cof":18,"./_wks":117}],18:[function(t,e,n){var i={}.toString;e.exports=function(t){return i.call(t).slice(8,-1)}},{}],19:[function(t,e,n){"use strict";var i=t("./_object-dp").f,o=t("./_object-create"),s=t("./_redefine-all"),r=t("./_ctx"),a=t("./_an-instance"),l=t("./_defined"),h=t("./_for-of"),c=t("./_iter-define"),u=t("./_iter-step"),d=t("./_set-species"),p=t("./_descriptors"),m=t("./_meta").fastKey,f=p?"_s":"size",_=function(t,e){var n,i=m(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n};e.exports={getConstructor:function(t,e,n,c){var u=t(function(t,i){a(t,u,e,"_i"),t._i=o(null),t._f=void 0,t._l=void 0,t[f]=0,void 0!=i&&h(i,n,t[c],t)});return s(u.prototype,{clear:function(){for(var t=this,e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[f]=0},"delete":function(t){var e=this,n=_(e,t);if(n){var i=n.n,o=n.p;delete e._i[n.i],n.r=!0,o&&(o.n=i),i&&(i.p=o),e._f==n&&(e._f=i),e._l==n&&(e._l=o),e[f]--}return!!n},forEach:function(t){a(this,u,"forEach");for(var e,n=r(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!_(this,t)}}),p&&i(u.prototype,"size",{get:function(){return l(this[f])}}),u},def:function(t,e,n){var i,o,s=_(t,e);return s?s.v=n:(t._l=s={i:o=m(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=s),i&&(i.n=s),t[f]++,"F"!==o&&(t._i[o]=s)),t},getEntry:_,setStrong:function(t,e,n){c(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?u(0,n.k):"values"==e?u(0,n.v):u(0,[n.k,n.v]):(t._t=void 0,u(1))},n?"entries":"values",!n,!0),d(e)}}},{"./_an-instance":6,"./_ctx":25,"./_defined":27,"./_descriptors":28,"./_for-of":37,"./_iter-define":53,"./_iter-step":55,"./_meta":62,"./_object-create":66,"./_object-dp":67,"./_redefine-all":86,"./_set-species":91}],20:[function(t,e,n){var i=t("./_classof"),o=t("./_array-from-iterable");e.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");return o(this)}}},{"./_array-from-iterable":10,"./_classof":17}],21:[function(t,e,n){"use strict";var i=t("./_redefine-all"),o=t("./_meta").getWeak,s=t("./_an-object"),r=t("./_is-object"),a=t("./_an-instance"),l=t("./_for-of"),h=t("./_array-methods"),c=t("./_has"),u=h(5),d=h(6),p=0,m=function(t){return t._l||(t._l=new f)},f=function(){this.a=[]},_=function(t,e){return u(t.a,function(t){return t[0]===e})};f.prototype={get:function(t){var e=_(this,t);if(e)return e[1]},has:function(t){return!!_(this,t)},set:function(t,e){var n=_(this,t);n?n[1]=e:this.a.push([t,e])},"delete":function(t){var e=d(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},e.exports={getConstructor:function(t,e,n,s){var h=t(function(t,i){a(t,h,e,"_i"),t._i=p++,t._l=void 0,void 0!=i&&l(i,n,t[s],t)});return i(h.prototype,{"delete":function(t){if(!r(t))return!1;var e=o(t);return e===!0?m(this)["delete"](t):e&&c(e,this._i)&&delete e[this._i]},has:function(t){if(!r(t))return!1;var e=o(t);return e===!0?m(this).has(t):e&&c(e,this._i)}}),h},def:function(t,e,n){var i=o(s(e),!0);return i===!0?m(t).set(e,n):i[t._i]=n,t},ufstore:m}},{"./_an-instance":6,"./_an-object":7,"./_array-methods":12,"./_for-of":37,"./_has":39,"./_is-object":49,"./_meta":62,"./_redefine-all":86}],22:[function(t,e,n){"use strict";var i=t("./_global"),o=t("./_export"),s=t("./_redefine"),r=t("./_redefine-all"),a=t("./_meta"),l=t("./_for-of"),h=t("./_an-instance"),c=t("./_is-object"),u=t("./_fails"),d=t("./_iter-detect"),p=t("./_set-to-string-tag"),m=t("./_inherit-if-required");e.exports=function(t,e,n,f,_,g){var v=i[t],y=v,b=_?"set":"add",x=y&&y.prototype,L={},w=function(t){var e=x[t];s(x,t,"delete"==t?function(t){return!(g&&!c(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!c(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof y&&(g||x.forEach&&!u(function(){(new y).entries().next()}))){var M=new y,k=M[b](g?{}:-0,1)!=M,P=u(function(){M.has(1)}),S=d(function(t){new y(t)}),E=!g&&u(function(){for(var t=new y,e=5;e--;)t[b](e,e);return!t.has(-0)});S||(y=e(function(e,n){h(e,y,t);var i=m(new v,e,y);return void 0!=n&&l(n,_,i[b],i),i}),y.prototype=x,x.constructor=y),(P||E)&&(w("delete"),w("has"),_&&w("get")),(E||k)&&w(b),g&&x.clear&&delete x.clear}else y=f.getConstructor(e,t,_,b),r(y.prototype,n),a.NEED=!0;return p(y,t),L[t]=y,o(o.G+o.W+o.F*(y!=v),L),g||f.setStrong(y,t,_),y}},{"./_an-instance":6,"./_export":32,"./_fails":34,"./_for-of":37,"./_global":38,"./_inherit-if-required":43,"./_is-object":49,"./_iter-detect":54,"./_meta":62,"./_redefine":87,"./_redefine-all":86,"./_set-to-string-tag":92}],23:[function(t,e,n){var i=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=i)},{}],24:[function(t,e,n){"use strict";var i=t("./_object-dp"),o=t("./_property-desc");e.exports=function(t,e,n){e in t?i.f(t,e,o(0,n)):t[e]=n}},{"./_object-dp":67,"./_property-desc":85}],25:[function(t,e,n){var i=t("./_a-function");e.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)}}return function(){return t.apply(e,arguments)}}},{"./_a-function":3}],26:[function(t,e,n){"use strict";var i=t("./_an-object"),o=t("./_to-primitive"),s="number";e.exports=function(t){if("string"!==t&&t!==s&&"default"!==t)throw TypeError("Incorrect hint");return o(i(this),t!=s)}},{"./_an-object":7,"./_to-primitive":110}],27:[function(t,e,n){e.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},{}],28:[function(t,e,n){e.exports=!t("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":34}],29:[function(t,e,n){var i=t("./_is-object"),o=t("./_global").document,s=i(o)&&i(o.createElement);e.exports=function(t){return s?o.createElement(t):{}}},{"./_global":38,"./_is-object":49}],30:[function(t,e,n){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],31:[function(t,e,n){var i=t("./_object-keys"),o=t("./_object-gops"),s=t("./_object-pie");e.exports=function(t){var e=i(t),n=o.f;if(n)for(var r,a=n(t),l=s.f,h=0;a.length>h;)l.call(t,r=a[h++])&&e.push(r);return e}},{"./_object-gops":73,"./_object-keys":76,"./_object-pie":77}],32:[function(t,e,n){var i=t("./_global"),o=t("./_core"),s=t("./_hide"),r=t("./_redefine"),a=t("./_ctx"),l="prototype",h=function(t,e,n){var c,u,d,p,m=t&h.F,f=t&h.G,_=t&h.S,g=t&h.P,v=t&h.B,y=f?i:_?i[e]||(i[e]={}):(i[e]||{})[l],b=f?o:o[e]||(o[e]={}),x=b[l]||(b[l]={});f&&(n=e);for(c in n)u=!m&&y&&void 0!==y[c],d=(u?y:n)[c],p=v&&u?a(d,i):g&&"function"==typeof d?a(Function.call,d):d,y&&r(y,c,d,t&h.U),b[c]!=d&&s(b,c,p),g&&x[c]!=d&&(x[c]=d)};i.core=o,h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,h.U=64,h.R=128,e.exports=h},{"./_core":23,"./_ctx":25,"./_global":38,"./_hide":40,"./_redefine":87}],33:[function(t,e,n){var i=t("./_wks")("match");e.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[i]=!1,!"/./"[t](e)}catch(o){}}return!0}},{"./_wks":117}],34:[function(t,e,n){e.exports=function(t){try{return!!t()}catch(e){return!0}}},{}],35:[function(t,e,n){"use strict";var i=t("./_hide"),o=t("./_redefine"),s=t("./_fails"),r=t("./_defined"),a=t("./_wks");e.exports=function(t,e,n){var l=a(t),h=n(r,l,""[t]),c=h[0],u=h[1];s(function(){var e={};return e[l]=function(){return 7},7!=""[t](e)})&&(o(String.prototype,t,c),i(RegExp.prototype,l,2==e?function(t,e){return u.call(t,this,e)}:function(t){return u.call(t,this)}))}},{"./_defined":27,"./_fails":34,"./_hide":40,"./_redefine":87,"./_wks":117}],36:[function(t,e,n){"use strict";var i=t("./_an-object");e.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},{"./_an-object":7}],37:[function(t,e,n){var i=t("./_ctx"),o=t("./_iter-call"),s=t("./_is-array-iter"),r=t("./_an-object"),a=t("./_to-length"),l=t("./core.get-iterator-method"),h={},c={},n=e.exports=function(t,e,n,u,d){var p,m,f,_,g=d?function(){return t}:l(t),v=i(n,u,e?2:1),y=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(s(g)){for(p=a(t.length);p>y;y++)if(_=e?v(r(m=t[y])[0],m[1]):v(t[y]),_===h||_===c)return _}else for(f=g.call(t);!(m=f.next()).done;)if(_=o(f,v,m.value,e),_===h||_===c)return _};n.BREAK=h,n.RETURN=c},{"./_an-object":7,"./_ctx":25,"./_is-array-iter":46,"./_iter-call":51,"./_to-length":108,"./core.get-iterator-method":118}],38:[function(t,e,n){var i=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},{}],39:[function(t,e,n){var i={}.hasOwnProperty;e.exports=function(t,e){return i.call(t,e)}},{}],40:[function(t,e,n){var i=t("./_object-dp"),o=t("./_property-desc");e.exports=t("./_descriptors")?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},{"./_descriptors":28,"./_object-dp":67,"./_property-desc":85}],41:[function(t,e,n){e.exports=t("./_global").document&&document.documentElement},{"./_global":38}],42:[function(t,e,n){e.exports=!t("./_descriptors")&&!t("./_fails")(function(){return 7!=Object.defineProperty(t("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":28,"./_dom-create":29,"./_fails":34}],43:[function(t,e,n){var i=t("./_is-object"),o=t("./_set-proto").set;e.exports=function(t,e,n){var s,r=e.constructor;return r!==n&&"function"==typeof r&&(s=r.prototype)!==n.prototype&&i(s)&&o&&o(t,s),t}},{"./_is-object":49,"./_set-proto":90}],44:[function(t,e,n){e.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},{}],45:[function(t,e,n){var i=t("./_cof");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},{"./_cof":18}],46:[function(t,e,n){var i=t("./_iterators"),o=t("./_wks")("iterator"),s=Array.prototype;e.exports=function(t){return void 0!==t&&(i.Array===t||s[o]===t)}},{"./_iterators":56,"./_wks":117}],47:[function(t,e,n){var i=t("./_cof");e.exports=Array.isArray||function(t){return"Array"==i(t)}},{"./_cof":18}],48:[function(t,e,n){var i=t("./_is-object"),o=Math.floor;e.exports=function(t){return!i(t)&&isFinite(t)&&o(t)===t}},{"./_is-object":49}],49:[function(t,e,n){e.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},{}],50:[function(t,e,n){var i=t("./_is-object"),o=t("./_cof"),s=t("./_wks")("match");e.exports=function(t){var e;return i(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==o(t))}},{"./_cof":18,"./_is-object":49,"./_wks":117}],51:[function(t,e,n){var i=t("./_an-object");e.exports=function(t,e,n,o){try{return o?e(i(n)[0],n[1]):e(n)}catch(s){var r=t["return"];throw void 0!==r&&i(r.call(t)),s}}},{"./_an-object":7}],52:[function(t,e,n){"use strict";var i=t("./_object-create"),o=t("./_property-desc"),s=t("./_set-to-string-tag"),r={};t("./_hide")(r,t("./_wks")("iterator"),function(){return this}),e.exports=function(t,e,n){t.prototype=i(r,{next:o(1,n)}),s(t,e+" Iterator")}},{"./_hide":40,"./_object-create":66,"./_property-desc":85,"./_set-to-string-tag":92,"./_wks":117}],53:[function(t,e,n){"use strict";var i=t("./_library"),o=t("./_export"),s=t("./_redefine"),r=t("./_hide"),a=t("./_has"),l=t("./_iterators"),h=t("./_iter-create"),c=t("./_set-to-string-tag"),u=t("./_object-gpo"),d=t("./_wks")("iterator"),p=!([].keys&&"next"in[].keys()),m="@@iterator",f="keys",_="values",g=function(){return this};e.exports=function(t,e,n,v,y,b,x){h(n,e,v);var L,w,M,k=function(t){if(!p&&t in T)return T[t];switch(t){case f:return function(){return new n(this,t)};case _:return function(){return new n(this,t)}}return function(){return new n(this,t)}},P=e+" Iterator",S=y==_,E=!1,T=t.prototype,C=T[d]||T[m]||y&&T[y],D=C||k(y),j=y?S?k("entries"):D:void 0,O="Array"==e?T.entries||C:C;if(O&&(M=u(O.call(new t)),M!==Object.prototype&&(c(M,P,!0),i||a(M,d)||r(M,d,g))),S&&C&&C.name!==_&&(E=!0,D=function(){return C.call(this)}),i&&!x||!p&&!E&&T[d]||r(T,d,D),l[e]=D,l[P]=g,y)if(L={values:S?D:k(_),keys:b?D:k(f),entries:j},x)for(w in L)w in T||s(T,w,L[w]);else o(o.P+o.F*(p||E),e,L);return L}},{"./_export":32,"./_has":39,"./_hide":40,"./_iter-create":52,"./_iterators":56,"./_library":58,"./_object-gpo":74,"./_redefine":87,"./_set-to-string-tag":92,"./_wks":117}],54:[function(t,e,n){var i=t("./_wks")("iterator"),o=!1;try{var s=[7][i]();s["return"]=function(){o=!0},Array.from(s,function(){throw 2})}catch(r){}e.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var s=[7],r=s[i]();r.next=function(){return{done:n=!0}},s[i]=function(){return r},t(s)}catch(a){}return n}},{"./_wks":117}],55:[function(t,e,n){e.exports=function(t,e){return{value:e,done:!!t}}},{}],56:[function(t,e,n){e.exports={}},{}],57:[function(t,e,n){var i=t("./_object-keys"),o=t("./_to-iobject");e.exports=function(t,e){for(var n,s=o(t),r=i(s),a=r.length,l=0;a>l;)if(s[n=r[l++]]===e)return n}},{"./_object-keys":76,"./_to-iobject":107}],58:[function(t,e,n){e.exports=!1},{}],59:[function(t,e,n){var i=Math.expm1;e.exports=!i||i(10)>22025.465794806718||i(10)<22025.465794806718||i(-2e-17)!=-2e-17?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:i},{}],60:[function(t,e,n){e.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},{}],61:[function(t,e,n){e.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},{}],62:[function(t,e,n){var i=t("./_uid")("meta"),o=t("./_is-object"),s=t("./_has"),r=t("./_object-dp").f,a=0,l=Object.isExtensible||function(){return!0},h=!t("./_fails")(function(){return l(Object.preventExtensions({}))}),c=function(t){r(t,i,{value:{i:"O"+ ++a,w:{}}})},u=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,i)){if(!l(t))return"F";if(!e)return"E";c(t)}return t[i].i},d=function(t,e){if(!s(t,i)){if(!l(t))return!0;if(!e)return!1;c(t)}return t[i].w},p=function(t){return h&&m.NEED&&l(t)&&!s(t,i)&&c(t),t},m=e.exports={KEY:i,NEED:!1,fastKey:u,getWeak:d,onFreeze:p}},{"./_fails":34,"./_has":39,"./_is-object":49,"./_object-dp":67,"./_uid":114}],63:[function(t,e,n){var i=t("./es6.map"),o=t("./_export"),s=t("./_shared")("metadata"),r=s.store||(s.store=new(t("./es6.weak-map"))),a=function(t,e,n){var o=r.get(t);if(!o){if(!n)return;r.set(t,o=new i)}var s=o.get(e);if(!s){if(!n)return;o.set(e,s=new i)}return s},l=function(t,e,n){var i=a(e,n,!1);return void 0!==i&&i.has(t)},h=function(t,e,n){var i=a(e,n,!1);return void 0===i?void 0:i.get(t)},c=function(t,e,n,i){a(n,i,!0).set(t,e)},u=function(t,e){var n=a(t,e,!1),i=[];return n&&n.forEach(function(t,e){i.push(e)}),i},d=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},p=function(t){o(o.S,"Reflect",t)};e.exports={store:r,map:a,has:l,get:h,set:c,keys:u,key:d,exp:p}},{"./_export":32,"./_shared":94,"./es6.map":149,"./es6.weak-map":255}],64:[function(t,e,n){var i=t("./_global"),o=t("./_task").set,s=i.MutationObserver||i.WebKitMutationObserver,r=i.process,a=i.Promise,l="process"==t("./_cof")(r);e.exports=function(){var t,e,n,h=function(){var i,o;for(l&&(i=r.domain)&&i.exit();t;){o=t.fn,t=t.next;try{o()}catch(s){throw t?n():e=void 0,s}}e=void 0,i&&i.enter()};if(l)n=function(){r.nextTick(h)};else if(s){var c=!0,u=document.createTextNode("");new s(h).observe(u,{characterData:!0}),n=function(){u.data=c=!c}}else if(a&&a.resolve){var d=a.resolve();n=function(){d.then(h)}}else n=function(){o.call(i,h)};return function(i){var o={fn:i,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}},{"./_cof":18,"./_global":38,"./_task":104}],65:[function(t,e,n){"use strict";var i=t("./_object-keys"),o=t("./_object-gops"),s=t("./_object-pie"),r=t("./_to-object"),a=t("./_iobject"),l=Object.assign;e.exports=!l||t("./_fails")(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=l({},t)[n]||Object.keys(l({},e)).join("")!=i})?function(t,e){for(var n=r(t),l=arguments.length,h=1,c=o.f,u=s.f;l>h;)for(var d,p=a(arguments[h++]),m=c?i(p).concat(c(p)):i(p),f=m.length,_=0;f>_;)u.call(p,d=m[_++])&&(n[d]=p[d]);return n}:l},{"./_fails":34,"./_iobject":45,"./_object-gops":73,"./_object-keys":76,"./_object-pie":77,"./_to-object":109}],66:[function(t,e,n){var i=t("./_an-object"),o=t("./_object-dps"),s=t("./_enum-bug-keys"),r=t("./_shared-key")("IE_PROTO"),a=function(){},l="prototype",h=function(){var e,n=t("./_dom-create")("iframe"),i=s.length,o="<",r=">";for(n.style.display="none",t("./_html").appendChild(n),n.src="javascript:",e=n.contentWindow.document,e.open(),e.write(o+"script"+r+"document.F=Object"+o+"/script"+r),e.close(),h=e.F;i--;)delete h[l][s[i]];return h()};e.exports=Object.create||function(t,e){var n;return null!==t?(a[l]=i(t),n=new a,a[l]=null,n[r]=t):n=h(),void 0===e?n:o(n,e)}},{"./_an-object":7,"./_dom-create":29,"./_enum-bug-keys":30,"./_html":41,"./_object-dps":68,"./_shared-key":93}],67:[function(t,e,n){var i=t("./_an-object"),o=t("./_ie8-dom-define"),s=t("./_to-primitive"),r=Object.defineProperty;n.f=t("./_descriptors")?Object.defineProperty:function(t,e,n){if(i(t),e=s(e,!0),i(n),o)try{return r(t,e,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},{"./_an-object":7,"./_descriptors":28,"./_ie8-dom-define":42,"./_to-primitive":110}],68:[function(t,e,n){var i=t("./_object-dp"),o=t("./_an-object"),s=t("./_object-keys");e.exports=t("./_descriptors")?Object.defineProperties:function(t,e){o(t);for(var n,r=s(e),a=r.length,l=0;a>l;)i.f(t,n=r[l++],e[n]);return t}},{"./_an-object":7,"./_descriptors":28,"./_object-dp":67,"./_object-keys":76}],69:[function(t,e,n){e.exports=t("./_library")||!t("./_fails")(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete t("./_global")[e]})},{"./_fails":34,"./_global":38,"./_library":58}],70:[function(t,e,n){var i=t("./_object-pie"),o=t("./_property-desc"),s=t("./_to-iobject"),r=t("./_to-primitive"),a=t("./_has"),l=t("./_ie8-dom-define"),h=Object.getOwnPropertyDescriptor;n.f=t("./_descriptors")?h:function(t,e){if(t=s(t),e=r(e,!0),l)try{return h(t,e)}catch(n){}if(a(t,e))return o(!i.f.call(t,e),t[e])}},{"./_descriptors":28,"./_has":39,"./_ie8-dom-define":42,"./_object-pie":77,"./_property-desc":85,"./_to-iobject":107,"./_to-primitive":110}],71:[function(t,e,n){var i=t("./_to-iobject"),o=t("./_object-gopn").f,s={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return o(t)}catch(e){return r.slice()}};e.exports.f=function(t){return r&&"[object Window]"==s.call(t)?a(t):o(i(t))}},{"./_object-gopn":72,"./_to-iobject":107}],72:[function(t,e,n){var i=t("./_object-keys-internal"),o=t("./_enum-bug-keys").concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return i(t,o)}},{"./_enum-bug-keys":30,"./_object-keys-internal":75}],73:[function(t,e,n){n.f=Object.getOwnPropertySymbols},{}],74:[function(t,e,n){var i=t("./_has"),o=t("./_to-object"),s=t("./_shared-key")("IE_PROTO"),r=Object.prototype;e.exports=Object.getPrototypeOf||function(t){return t=o(t),i(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?r:null}},{"./_has":39,"./_shared-key":93,"./_to-object":109}],75:[function(t,e,n){var i=t("./_has"),o=t("./_to-iobject"),s=t("./_array-includes")(!1),r=t("./_shared-key")("IE_PROTO");e.exports=function(t,e){var n,a=o(t),l=0,h=[];for(n in a)n!=r&&i(a,n)&&h.push(n);for(;e.length>l;)i(a,n=e[l++])&&(~s(h,n)||h.push(n));return h}},{"./_array-includes":11,"./_has":39,"./_shared-key":93,"./_to-iobject":107}],76:[function(t,e,n){var i=t("./_object-keys-internal"),o=t("./_enum-bug-keys");e.exports=Object.keys||function(t){return i(t,o)}},{"./_enum-bug-keys":30,"./_object-keys-internal":75}],77:[function(t,e,n){n.f={}.propertyIsEnumerable},{}],78:[function(t,e,n){var i=t("./_export"),o=t("./_core"),s=t("./_fails");e.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],r={};r[t]=e(n),i(i.S+i.F*s(function(){n(1)}),"Object",r)}},{"./_core":23,"./_export":32,"./_fails":34}],79:[function(t,e,n){var i=t("./_object-keys"),o=t("./_to-iobject"),s=t("./_object-pie").f;e.exports=function(t){return function(e){for(var n,r=o(e),a=i(r),l=a.length,h=0,c=[];l>h;)s.call(r,n=a[h++])&&c.push(t?[n,r[n]]:r[n]);return c}}},{"./_object-keys":76,"./_object-pie":77,"./_to-iobject":107}],80:[function(t,e,n){var i=t("./_object-gopn"),o=t("./_object-gops"),s=t("./_an-object"),r=t("./_global").Reflect;e.exports=r&&r.ownKeys||function(t){var e=i.f(s(t)),n=o.f;return n?e.concat(n(t)):e}},{"./_an-object":7,"./_global":38,"./_object-gopn":72,"./_object-gops":73}],81:[function(t,e,n){var i=t("./_global").parseFloat,o=t("./_string-trim").trim;e.exports=1/i(t("./_string-ws")+"-0")!==-(1/0)?function(t){var e=o(String(t),3),n=i(e);return 0===n&&"-"==e.charAt(0)?-0:n}:i},{"./_global":38,"./_string-trim":102,"./_string-ws":103}],82:[function(t,e,n){var i=t("./_global").parseInt,o=t("./_string-trim").trim,s=t("./_string-ws"),r=/^[\-+]?0[xX]/;e.exports=8!==i(s+"08")||22!==i(s+"0x16")?function(t,e){var n=o(String(t),3);return i(n,e>>>0||(r.test(n)?16:10))}:i},{"./_global":38,"./_string-trim":102,"./_string-ws":103}],83:[function(t,e,n){"use strict";var i=t("./_path"),o=t("./_invoke"),s=t("./_a-function");e.exports=function(){for(var t=s(this),e=arguments.length,n=Array(e),r=0,a=i._,l=!1;e>r;)(n[r]=arguments[r++])===a&&(l=!0);return function(){var i,s=this,r=arguments.length,h=0,c=0;if(!l&&!r)return o(t,n,s);if(i=n.slice(),l)for(;e>h;h++)i[h]===a&&(i[h]=arguments[c++]);for(;r>c;)i.push(arguments[c++]);return o(t,i,s)}}},{"./_a-function":3,"./_invoke":44,"./_path":84}],84:[function(t,e,n){e.exports=t("./_global")},{"./_global":38}],85:[function(t,e,n){e.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},{}],86:[function(t,e,n){var i=t("./_redefine");e.exports=function(t,e,n){for(var o in e)i(t,o,e[o],n);return t}},{"./_redefine":87}],87:[function(t,e,n){var i=t("./_global"),o=t("./_hide"),s=t("./_has"),r=t("./_uid")("src"),a="toString",l=Function[a],h=(""+l).split(a);t("./_core").inspectSource=function(t){return l.call(t)},(e.exports=function(t,e,n,a){var l="function"==typeof n;l&&(s(n,"name")||o(n,"name",e)),t[e]!==n&&(l&&(s(n,r)||o(n,r,t[e]?""+t[e]:h.join(String(e)))),t===i?t[e]=n:a?t[e]?t[e]=n:o(t,e,n):(delete t[e],o(t,e,n)))})(Function.prototype,a,function(){return"function"==typeof this&&this[r]||l.call(this)})},{"./_core":23,"./_global":38,"./_has":39,"./_hide":40,"./_uid":114}],88:[function(t,e,n){e.exports=function(t,e){var n=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,n)}}},{}],89:[function(t,e,n){e.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},{}],90:[function(t,e,n){var i=t("./_is-object"),o=t("./_an-object"),s=function(t,e){if(o(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,n,i){try{i=t("./_ctx")(Function.call,t("./_object-gopd").f(Object.prototype,"__proto__").set,2),i(e,[]),n=!(e instanceof Array)}catch(o){n=!0}return function(t,e){return s(t,e),n?t.__proto__=e:i(t,e),t}}({},!1):void 0),check:s}},{"./_an-object":7,"./_ctx":25,"./_is-object":49,"./_object-gopd":70}],91:[function(t,e,n){"use strict";var i=t("./_global"),o=t("./_object-dp"),s=t("./_descriptors"),r=t("./_wks")("species");e.exports=function(t){var e=i[t];s&&e&&!e[r]&&o.f(e,r,{configurable:!0,get:function(){return this}})}},{"./_descriptors":28,"./_global":38,"./_object-dp":67,"./_wks":117}],92:[function(t,e,n){var i=t("./_object-dp").f,o=t("./_has"),s=t("./_wks")("toStringTag");e.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,s)&&i(t,s,{configurable:!0,value:e})}},{"./_has":39,"./_object-dp":67,"./_wks":117}],93:[function(t,e,n){var i=t("./_shared")("keys"),o=t("./_uid");e.exports=function(t){return i[t]||(i[t]=o(t))}},{"./_shared":94,"./_uid":114}],94:[function(t,e,n){var i=t("./_global"),o="__core-js_shared__",s=i[o]||(i[o]={});e.exports=function(t){return s[t]||(s[t]={})}},{"./_global":38}],95:[function(t,e,n){var i=t("./_an-object"),o=t("./_a-function"),s=t("./_wks")("species");e.exports=function(t,e){var n,r=i(t).constructor;return void 0===r||void 0==(n=i(r)[s])?e:o(n)}},{"./_a-function":3,"./_an-object":7,"./_wks":117}],96:[function(t,e,n){var i=t("./_fails");e.exports=function(t,e){return!!t&&i(function(){e?t.call(null,function(){},1):t.call(null)})}},{"./_fails":34}],97:[function(t,e,n){var i=t("./_to-integer"),o=t("./_defined");e.exports=function(t){return function(e,n){var s,r,a=String(o(e)),l=i(n),h=a.length;return l<0||l>=h?t?"":void 0:(s=a.charCodeAt(l),s<55296||s>56319||l+1===h||(r=a.charCodeAt(l+1))<56320||r>57343?t?a.charAt(l):s:t?a.slice(l,l+2):(s-55296<<10)+(r-56320)+65536)}}},{"./_defined":27,"./_to-integer":106}],98:[function(t,e,n){var i=t("./_is-regexp"),o=t("./_defined");e.exports=function(t,e,n){if(i(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(t))}},{"./_defined":27,"./_is-regexp":50}],99:[function(t,e,n){var i=t("./_export"),o=t("./_fails"),s=t("./_defined"),r=/"/g,a=function(t,e,n,i){var o=String(s(t)),a="<"+e;return""!==n&&(a+=" "+n+'="'+String(i).replace(r,"&quot;")+'"'),a+">"+o+"</"+e+">"};e.exports=function(t,e){var n={};n[t]=e(a),i(i.P+i.F*o(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},{"./_defined":27,"./_export":32,"./_fails":34}],100:[function(t,e,n){var i=t("./_to-length"),o=t("./_string-repeat"),s=t("./_defined");e.exports=function(t,e,n,r){var a=String(s(t)),l=a.length,h=void 0===n?" ":String(n),c=i(e);
if(c<=l||""==h)return a;var u=c-l,d=o.call(h,Math.ceil(u/h.length));return d.length>u&&(d=d.slice(0,u)),r?d+a:a+d}},{"./_defined":27,"./_string-repeat":101,"./_to-length":108}],101:[function(t,e,n){"use strict";var i=t("./_to-integer"),o=t("./_defined");e.exports=function(t){var e=String(o(this)),n="",s=i(t);if(s<0||s==1/0)throw RangeError("Count can't be negative");for(;s>0;(s>>>=1)&&(e+=e))1&s&&(n+=e);return n}},{"./_defined":27,"./_to-integer":106}],102:[function(t,e,n){var i=t("./_export"),o=t("./_defined"),s=t("./_fails"),r=t("./_string-ws"),a="["+r+"]",l="​",h=RegExp("^"+a+a+"*"),c=RegExp(a+a+"*$"),u=function(t,e,n){var o={},a=s(function(){return!!r[t]()||l[t]()!=l}),h=o[t]=a?e(d):r[t];n&&(o[n]=h),i(i.P+i.F*a,"String",o)},d=u.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(h,"")),2&e&&(t=t.replace(c,"")),t};e.exports=u},{"./_defined":27,"./_export":32,"./_fails":34,"./_string-ws":103}],103:[function(t,e,n){e.exports="\t\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff"},{}],104:[function(t,e,n){var i,o,s,r=t("./_ctx"),a=t("./_invoke"),l=t("./_html"),h=t("./_dom-create"),c=t("./_global"),u=c.process,d=c.setImmediate,p=c.clearImmediate,m=c.MessageChannel,f=0,_={},g="onreadystatechange",v=function(){var t=+this;if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},y=function(t){v.call(t.data)};d&&p||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return _[++f]=function(){a("function"==typeof t?t:Function(t),e)},i(f),f},p=function(t){delete _[t]},"process"==t("./_cof")(u)?i=function(t){u.nextTick(r(v,t,1))}:m?(o=new m,s=o.port2,o.port1.onmessage=y,i=r(s.postMessage,s,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(t){c.postMessage(t+"","*")},c.addEventListener("message",y,!1)):i=g in h("script")?function(t){l.appendChild(h("script"))[g]=function(){l.removeChild(this),v.call(t)}}:function(t){setTimeout(r(v,t,1),0)}),e.exports={set:d,clear:p}},{"./_cof":18,"./_ctx":25,"./_dom-create":29,"./_global":38,"./_html":41,"./_invoke":44}],105:[function(t,e,n){var i=t("./_to-integer"),o=Math.max,s=Math.min;e.exports=function(t,e){return t=i(t),t<0?o(t+e,0):s(t,e)}},{"./_to-integer":106}],106:[function(t,e,n){var i=Math.ceil,o=Math.floor;e.exports=function(t){return isNaN(t=+t)?0:(t>0?o:i)(t)}},{}],107:[function(t,e,n){var i=t("./_iobject"),o=t("./_defined");e.exports=function(t){return i(o(t))}},{"./_defined":27,"./_iobject":45}],108:[function(t,e,n){var i=t("./_to-integer"),o=Math.min;e.exports=function(t){return t>0?o(i(t),9007199254740991):0}},{"./_to-integer":106}],109:[function(t,e,n){var i=t("./_defined");e.exports=function(t){return Object(i(t))}},{"./_defined":27}],110:[function(t,e,n){var i=t("./_is-object");e.exports=function(t,e){if(!i(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!i(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!i(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!i(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":49}],111:[function(t,e,n){"use strict";if(t("./_descriptors")){var i=t("./_library"),o=t("./_global"),s=t("./_fails"),r=t("./_export"),a=t("./_typed"),l=t("./_typed-buffer"),h=t("./_ctx"),c=t("./_an-instance"),u=t("./_property-desc"),d=t("./_hide"),p=t("./_redefine-all"),m=t("./_to-integer"),f=t("./_to-length"),_=t("./_to-index"),g=t("./_to-primitive"),v=t("./_has"),y=t("./_same-value"),b=t("./_classof"),x=t("./_is-object"),L=t("./_to-object"),w=t("./_is-array-iter"),M=t("./_object-create"),k=t("./_object-gpo"),P=t("./_object-gopn").f,S=t("./core.get-iterator-method"),E=t("./_uid"),T=t("./_wks"),C=t("./_array-methods"),D=t("./_array-includes"),j=t("./_species-constructor"),O=t("./es6.array.iterator"),I=t("./_iterators"),A=t("./_iter-detect"),z=t("./_set-species"),N=t("./_array-fill"),U=t("./_array-copy-within"),R=t("./_object-dp"),F=t("./_object-gopd"),B=R.f,G=F.f,q=o.RangeError,Z=o.TypeError,H=o.Uint8Array,W="ArrayBuffer",V="Shared"+W,$="BYTES_PER_ELEMENT",J="prototype",Y=Array[J],X=l.ArrayBuffer,K=l.DataView,Q=C(0),tt=C(2),et=C(3),nt=C(4),it=C(5),ot=C(6),st=D(!0),rt=D(!1),at=O.values,lt=O.keys,ht=O.entries,ct=Y.lastIndexOf,ut=Y.reduce,dt=Y.reduceRight,pt=Y.join,mt=Y.sort,ft=Y.slice,_t=Y.toString,gt=Y.toLocaleString,vt=T("iterator"),yt=T("toStringTag"),bt=E("typed_constructor"),xt=E("def_constructor"),Lt=a.CONSTR,wt=a.TYPED,Mt=a.VIEW,kt="Wrong length!",Pt=C(1,function(t,e){return jt(j(t,t[xt]),e)}),St=s(function(){return 1===new H(new Uint16Array([1]).buffer)[0]}),Et=!!H&&!!H[J].set&&s(function(){new H(1).set({})}),Tt=function(t,e){if(void 0===t)throw Z(kt);var n=+t,i=f(t);if(e&&!y(n,i))throw q(kt);return i},Ct=function(t,e){var n=m(t);if(n<0||n%e)throw q("Wrong offset!");return n},Dt=function(t){if(x(t)&&wt in t)return t;throw Z(t+" is not a typed array!")},jt=function(t,e){if(!(x(t)&&bt in t))throw Z("It is not a typed array constructor!");return new t(e)},Ot=function(t,e){return It(j(t,t[xt]),e)},It=function(t,e){for(var n=0,i=e.length,o=jt(t,i);i>n;)o[n]=e[n++];return o},At=function(t,e,n){B(t,e,{get:function(){return this._d[n]}})},zt=function(t){var e,n,i,o,s,r,a=L(t),l=arguments.length,c=l>1?arguments[1]:void 0,u=void 0!==c,d=S(a);if(void 0!=d&&!w(d)){for(r=d.call(a),i=[],e=0;!(s=r.next()).done;e++)i.push(s.value);a=i}for(u&&l>2&&(c=h(c,arguments[2],2)),e=0,n=f(a.length),o=jt(this,n);n>e;e++)o[e]=u?c(a[e],e):a[e];return o},Nt=function(){for(var t=0,e=arguments.length,n=jt(this,e);e>t;)n[t]=arguments[t++];return n},Ut=!!H&&s(function(){gt.call(new H(1))}),Rt=function(){return gt.apply(Ut?ft.call(Dt(this)):Dt(this),arguments)},Ft={copyWithin:function(t,e){return U.call(Dt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return nt(Dt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return N.apply(Dt(this),arguments)},filter:function(t){return Ot(this,tt(Dt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return it(Dt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return ot(Dt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Q(Dt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return rt(Dt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return st(Dt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return pt.apply(Dt(this),arguments)},lastIndexOf:function(t){return ct.apply(Dt(this),arguments)},map:function(t){return Pt(Dt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return ut.apply(Dt(this),arguments)},reduceRight:function(t){return dt.apply(Dt(this),arguments)},reverse:function(){for(var t,e=this,n=Dt(e).length,i=Math.floor(n/2),o=0;o<i;)t=e[o],e[o++]=e[--n],e[n]=t;return e},some:function(t){return et(Dt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return mt.call(Dt(this),t)},subarray:function(t,e){var n=Dt(this),i=n.length,o=_(t,i);return new(j(n,n[xt]))(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,f((void 0===e?i:_(e,i))-o))}},Bt=function(t,e){return Ot(this,ft.call(Dt(this),t,e))},Gt=function(t){Dt(this);var e=Ct(arguments[1],1),n=this.length,i=L(t),o=f(i.length),s=0;if(o+e>n)throw q(kt);for(;s<o;)this[e+s]=i[s++]},qt={entries:function(){return ht.call(Dt(this))},keys:function(){return lt.call(Dt(this))},values:function(){return at.call(Dt(this))}},Zt=function(t,e){return x(t)&&t[wt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Ht=function(t,e){return Zt(t,e=g(e,!0))?u(2,t[e]):G(t,e)},Wt=function(t,e,n){return!(Zt(t,e=g(e,!0))&&x(n)&&v(n,"value"))||v(n,"get")||v(n,"set")||n.configurable||v(n,"writable")&&!n.writable||v(n,"enumerable")&&!n.enumerable?B(t,e,n):(t[e]=n.value,t)};Lt||(F.f=Ht,R.f=Wt),r(r.S+r.F*!Lt,"Object",{getOwnPropertyDescriptor:Ht,defineProperty:Wt}),s(function(){_t.call({})})&&(_t=gt=function(){return pt.call(this)});var Vt=p({},Ft);p(Vt,qt),d(Vt,vt,qt.values),p(Vt,{slice:Bt,set:Gt,constructor:function(){},toString:_t,toLocaleString:Rt}),At(Vt,"buffer","b"),At(Vt,"byteOffset","o"),At(Vt,"byteLength","l"),At(Vt,"length","e"),B(Vt,yt,{get:function(){return this[wt]}}),e.exports=function(t,e,n,l){l=!!l;var h=t+(l?"Clamped":"")+"Array",u="Uint8Array"!=h,p="get"+t,m="set"+t,_=o[h],g=_||{},v=_&&k(_),y=!_||!a.ABV,L={},w=_&&_[J],S=function(t,n){var i=t._d;return i.v[p](n*e+i.o,St)},E=function(t,n,i){var o=t._d;l&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),o.v[m](n*e+o.o,i,St)},T=function(t,e){B(t,e,{get:function(){return S(this,e)},set:function(t){return E(this,e,t)},enumerable:!0})};y?(_=n(function(t,n,i,o){c(t,_,h,"_d");var s,r,a,l,u=0,p=0;if(x(n)){if(!(n instanceof X||(l=b(n))==W||l==V))return wt in n?It(_,n):zt.call(_,n);s=n,p=Ct(i,e);var m=n.byteLength;if(void 0===o){if(m%e)throw q(kt);if(r=m-p,r<0)throw q(kt)}else if(r=f(o)*e,r+p>m)throw q(kt);a=r/e}else a=Tt(n,!0),r=a*e,s=new X(r);for(d(t,"_d",{b:s,o:p,l:r,e:a,v:new K(s)});u<a;)T(t,u++)}),w=_[J]=M(Vt),d(w,"constructor",_)):A(function(t){new _(null),new _(t)},!0)||(_=n(function(t,n,i,o){c(t,_,h);var s;return x(n)?n instanceof X||(s=b(n))==W||s==V?void 0!==o?new g(n,Ct(i,e),o):void 0!==i?new g(n,Ct(i,e)):new g(n):wt in n?It(_,n):zt.call(_,n):new g(Tt(n,u))}),Q(v!==Function.prototype?P(g).concat(P(v)):P(g),function(t){t in _||d(_,t,g[t])}),_[J]=w,i||(w.constructor=_));var C=w[vt],D=!!C&&("values"==C.name||void 0==C.name),j=qt.values;d(_,bt,!0),d(w,wt,h),d(w,Mt,!0),d(w,xt,_),(l?new _(1)[yt]==h:yt in w)||B(w,yt,{get:function(){return h}}),L[h]=_,r(r.G+r.W+r.F*(_!=g),L),r(r.S,h,{BYTES_PER_ELEMENT:e,from:zt,of:Nt}),$ in w||d(w,$,e),r(r.P,h,Ft),z(h),r(r.P+r.F*Et,h,{set:Gt}),r(r.P+r.F*!D,h,qt),r(r.P+r.F*(w.toString!=_t),h,{toString:_t}),r(r.P+r.F*s(function(){new _(1).slice()}),h,{slice:Bt}),r(r.P+r.F*(s(function(){return[1,2].toLocaleString()!=new _([1,2]).toLocaleString()})||!s(function(){w.toLocaleString.call([1,2])})),h,{toLocaleString:Rt}),I[h]=D?C:j,i||D||d(w,vt,j)}}else e.exports=function(){}},{"./_an-instance":6,"./_array-copy-within":8,"./_array-fill":9,"./_array-includes":11,"./_array-methods":12,"./_classof":17,"./_ctx":25,"./_descriptors":28,"./_export":32,"./_fails":34,"./_global":38,"./_has":39,"./_hide":40,"./_is-array-iter":46,"./_is-object":49,"./_iter-detect":54,"./_iterators":56,"./_library":58,"./_object-create":66,"./_object-dp":67,"./_object-gopd":70,"./_object-gopn":72,"./_object-gpo":74,"./_property-desc":85,"./_redefine-all":86,"./_same-value":89,"./_set-species":91,"./_species-constructor":95,"./_to-index":105,"./_to-integer":106,"./_to-length":108,"./_to-object":109,"./_to-primitive":110,"./_typed":113,"./_typed-buffer":112,"./_uid":114,"./_wks":117,"./core.get-iterator-method":118,"./es6.array.iterator":130}],112:[function(t,e,n){"use strict";var i=t("./_global"),o=t("./_descriptors"),s=t("./_library"),r=t("./_typed"),a=t("./_hide"),l=t("./_redefine-all"),h=t("./_fails"),c=t("./_an-instance"),u=t("./_to-integer"),d=t("./_to-length"),p=t("./_object-gopn").f,m=t("./_object-dp").f,f=t("./_array-fill"),_=t("./_set-to-string-tag"),g="ArrayBuffer",v="DataView",y="prototype",b="Wrong length!",x="Wrong index!",L=i[g],w=i[v],M=i.Math,k=i.RangeError,P=i.Infinity,S=L,E=M.abs,T=M.pow,C=M.floor,D=M.log,j=M.LN2,O="buffer",I="byteLength",A="byteOffset",z=o?"_b":O,N=o?"_l":I,U=o?"_o":A,R=function(t,e,n){var i,o,s,r=Array(n),a=8*n-e-1,l=(1<<a)-1,h=l>>1,c=23===e?T(2,-24)-T(2,-77):0,u=0,d=t<0||0===t&&1/t<0?1:0;for(t=E(t),t!=t||t===P?(o=t!=t?1:0,i=l):(i=C(D(t)/j),t*(s=T(2,-i))<1&&(i--,s*=2),t+=i+h>=1?c/s:c*T(2,1-h),t*s>=2&&(i++,s/=2),i+h>=l?(o=0,i=l):i+h>=1?(o=(t*s-1)*T(2,e),i+=h):(o=t*T(2,h-1)*T(2,e),i=0));e>=8;r[u++]=255&o,o/=256,e-=8);for(i=i<<e|o,a+=e;a>0;r[u++]=255&i,i/=256,a-=8);return r[--u]|=128*d,r},F=function(t,e,n){var i,o=8*n-e-1,s=(1<<o)-1,r=s>>1,a=o-7,l=n-1,h=t[l--],c=127&h;for(h>>=7;a>0;c=256*c+t[l],l--,a-=8);for(i=c&(1<<-a)-1,c>>=-a,a+=e;a>0;i=256*i+t[l],l--,a-=8);if(0===c)c=1-r;else{if(c===s)return i?NaN:h?-P:P;i+=T(2,e),c-=r}return(h?-1:1)*i*T(2,c-e)},B=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},G=function(t){return[255&t]},q=function(t){return[255&t,t>>8&255]},Z=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},H=function(t){return R(t,52,8)},W=function(t){return R(t,23,4)},V=function(t,e,n){m(t[y],e,{get:function(){return this[n]}})},$=function(t,e,n,i){var o=+n,s=u(o);if(o!=s||s<0||s+e>t[N])throw k(x);var r=t[z]._b,a=s+t[U],l=r.slice(a,a+e);return i?l:l.reverse()},J=function(t,e,n,i,o,s){var r=+n,a=u(r);if(r!=a||a<0||a+e>t[N])throw k(x);for(var l=t[z]._b,h=a+t[U],c=i(+o),d=0;d<e;d++)l[h+d]=c[s?d:e-d-1]},Y=function(t,e){c(t,L,g);var n=+e,i=d(n);if(n!=i)throw k(b);return i};if(r.ABV){if(!h(function(){new L})||!h(function(){new L(.5)})){L=function(t){return new S(Y(this,t))};for(var X,K=L[y]=S[y],Q=p(S),tt=0;Q.length>tt;)(X=Q[tt++])in L||a(L,X,S[X]);s||(K.constructor=L)}var et=new w(new L(2)),nt=w[y].setInt8;et.setInt8(0,2147483648),et.setInt8(1,2147483649),!et.getInt8(0)&&et.getInt8(1)||l(w[y],{setInt8:function(t,e){nt.call(this,t,e<<24>>24)},setUint8:function(t,e){nt.call(this,t,e<<24>>24)}},!0)}else L=function(t){var e=Y(this,t);this._b=f.call(Array(e),0),this[N]=e},w=function(t,e,n){c(this,w,v),c(t,L,v);var i=t[N],o=u(e);if(o<0||o>i)throw k("Wrong offset!");if(n=void 0===n?i-o:d(n),o+n>i)throw k(b);this[z]=t,this[U]=o,this[N]=n},o&&(V(L,I,"_l"),V(w,O,"_b"),V(w,I,"_l"),V(w,A,"_o")),l(w[y],{getInt8:function(t){return $(this,1,t)[0]<<24>>24},getUint8:function(t){return $(this,1,t)[0]},getInt16:function(t){var e=$(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=$(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return B($(this,4,t,arguments[1]))},getUint32:function(t){return B($(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return F($(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return F($(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){J(this,1,t,G,e)},setUint8:function(t,e){J(this,1,t,G,e)},setInt16:function(t,e){J(this,2,t,q,e,arguments[2])},setUint16:function(t,e){J(this,2,t,q,e,arguments[2])},setInt32:function(t,e){J(this,4,t,Z,e,arguments[2])},setUint32:function(t,e){J(this,4,t,Z,e,arguments[2])},setFloat32:function(t,e){J(this,4,t,W,e,arguments[2])},setFloat64:function(t,e){J(this,8,t,H,e,arguments[2])}});_(L,g),_(w,v),a(w[y],r.VIEW,!0),n[g]=L,n[v]=w},{"./_an-instance":6,"./_array-fill":9,"./_descriptors":28,"./_fails":34,"./_global":38,"./_hide":40,"./_library":58,"./_object-dp":67,"./_object-gopn":72,"./_redefine-all":86,"./_set-to-string-tag":92,"./_to-integer":106,"./_to-length":108,"./_typed":113}],113:[function(t,e,n){for(var i,o=t("./_global"),s=t("./_hide"),r=t("./_uid"),a=r("typed_array"),l=r("view"),h=!(!o.ArrayBuffer||!o.DataView),c=h,u=0,d=9,p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");u<d;)(i=o[p[u++]])?(s(i.prototype,a,!0),s(i.prototype,l,!0)):c=!1;e.exports={ABV:h,CONSTR:c,TYPED:a,VIEW:l}},{"./_global":38,"./_hide":40,"./_uid":114}],114:[function(t,e,n){var i=0,o=Math.random();e.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+o).toString(36))}},{}],115:[function(t,e,n){var i=t("./_global"),o=t("./_core"),s=t("./_library"),r=t("./_wks-ext"),a=t("./_object-dp").f;e.exports=function(t){var e=o.Symbol||(o.Symbol=s?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:r.f(t)})}},{"./_core":23,"./_global":38,"./_library":58,"./_object-dp":67,"./_wks-ext":116}],116:[function(t,e,n){n.f=t("./_wks")},{"./_wks":117}],117:[function(t,e,n){var i=t("./_shared")("wks"),o=t("./_uid"),s=t("./_global").Symbol,r="function"==typeof s,a=e.exports=function(t){return i[t]||(i[t]=r&&s[t]||(r?s:o)("Symbol."+t))};a.store=i},{"./_global":38,"./_shared":94,"./_uid":114}],118:[function(t,e,n){var i=t("./_classof"),o=t("./_wks")("iterator"),s=t("./_iterators");e.exports=t("./_core").getIteratorMethod=function(t){if(void 0!=t)return t[o]||t["@@iterator"]||s[i(t)]}},{"./_classof":17,"./_core":23,"./_iterators":56,"./_wks":117}],119:[function(t,e,n){var i=t("./_export"),o=t("./_replacer")(/[\\^$*+?.()|[\]{}]/g,"\\$&");i(i.S,"RegExp",{escape:function(t){return o(t)}})},{"./_export":32,"./_replacer":88}],120:[function(t,e,n){var i=t("./_export");i(i.P,"Array",{copyWithin:t("./_array-copy-within")}),t("./_add-to-unscopables")("copyWithin")},{"./_add-to-unscopables":5,"./_array-copy-within":8,"./_export":32}],121:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_array-methods")(4);i(i.P+i.F*!t("./_strict-method")([].every,!0),"Array",{every:function(t){return o(this,t,arguments[1])}})},{"./_array-methods":12,"./_export":32,"./_strict-method":96}],122:[function(t,e,n){var i=t("./_export");i(i.P,"Array",{fill:t("./_array-fill")}),t("./_add-to-unscopables")("fill")},{"./_add-to-unscopables":5,"./_array-fill":9,"./_export":32}],123:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_array-methods")(2);i(i.P+i.F*!t("./_strict-method")([].filter,!0),"Array",{filter:function(t){return o(this,t,arguments[1])}})},{"./_array-methods":12,"./_export":32,"./_strict-method":96}],124:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_array-methods")(6),s="findIndex",r=!0;s in[]&&Array(1)[s](function(){r=!1}),i(i.P+i.F*r,"Array",{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),t("./_add-to-unscopables")(s)},{"./_add-to-unscopables":5,"./_array-methods":12,"./_export":32}],125:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_array-methods")(5),s="find",r=!0;s in[]&&Array(1)[s](function(){r=!1}),i(i.P+i.F*r,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),t("./_add-to-unscopables")(s)},{"./_add-to-unscopables":5,"./_array-methods":12,"./_export":32}],126:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_array-methods")(0),s=t("./_strict-method")([].forEach,!0);i(i.P+i.F*!s,"Array",{forEach:function(t){return o(this,t,arguments[1])}})},{"./_array-methods":12,"./_export":32,"./_strict-method":96}],127:[function(t,e,n){"use strict";var i=t("./_ctx"),o=t("./_export"),s=t("./_to-object"),r=t("./_iter-call"),a=t("./_is-array-iter"),l=t("./_to-length"),h=t("./_create-property"),c=t("./core.get-iterator-method");o(o.S+o.F*!t("./_iter-detect")(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,o,u,d=s(t),p="function"==typeof this?this:Array,m=arguments.length,f=m>1?arguments[1]:void 0,_=void 0!==f,g=0,v=c(d);if(_&&(f=i(f,m>2?arguments[2]:void 0,2)),void 0==v||p==Array&&a(v))for(e=l(d.length),n=new p(e);e>g;g++)h(n,g,_?f(d[g],g):d[g]);else for(u=v.call(d),n=new p;!(o=u.next()).done;g++)h(n,g,_?r(u,f,[o.value,g],!0):o.value);return n.length=g,n}})},{"./_create-property":24,"./_ctx":25,"./_export":32,"./_is-array-iter":46,"./_iter-call":51,"./_iter-detect":54,"./_to-length":108,"./_to-object":109,"./core.get-iterator-method":118}],128:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_array-includes")(!1),s=[].indexOf,r=!!s&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(r||!t("./_strict-method")(s)),"Array",{indexOf:function(t){return r?s.apply(this,arguments)||0:o(this,t,arguments[1])}})},{"./_array-includes":11,"./_export":32,"./_strict-method":96}],129:[function(t,e,n){var i=t("./_export");i(i.S,"Array",{isArray:t("./_is-array")})},{"./_export":32,"./_is-array":47}],130:[function(t,e,n){"use strict";var i=t("./_add-to-unscopables"),o=t("./_iter-step"),s=t("./_iterators"),r=t("./_to-iobject");e.exports=t("./_iter-define")(Array,"Array",function(t,e){this._t=r(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):"keys"==e?o(0,n):"values"==e?o(0,t[n]):o(0,[n,t[n]])},"values"),s.Arguments=s.Array,i("keys"),i("values"),i("entries")},{"./_add-to-unscopables":5,"./_iter-define":53,"./_iter-step":55,"./_iterators":56,"./_to-iobject":107}],131:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_to-iobject"),s=[].join;i(i.P+i.F*(t("./_iobject")!=Object||!t("./_strict-method")(s)),"Array",{join:function(t){return s.call(o(this),void 0===t?",":t)}})},{"./_export":32,"./_iobject":45,"./_strict-method":96,"./_to-iobject":107}],132:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_to-iobject"),s=t("./_to-integer"),r=t("./_to-length"),a=[].lastIndexOf,l=!!a&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(l||!t("./_strict-method")(a)),"Array",{lastIndexOf:function(t){if(l)return a.apply(this,arguments)||0;var e=o(this),n=r(e.length),i=n-1;for(arguments.length>1&&(i=Math.min(i,s(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in e&&e[i]===t)return i||0;return-1}})},{"./_export":32,"./_strict-method":96,"./_to-integer":106,"./_to-iobject":107,"./_to-length":108}],133:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_array-methods")(1);i(i.P+i.F*!t("./_strict-method")([].map,!0),"Array",{map:function(t){return o(this,t,arguments[1])}})},{"./_array-methods":12,"./_export":32,"./_strict-method":96}],134:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_create-property");i(i.S+i.F*t("./_fails")(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)o(n,t,arguments[t++]);return n.length=e,n}})},{"./_create-property":24,"./_export":32,"./_fails":34}],135:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_array-reduce");i(i.P+i.F*!t("./_strict-method")([].reduceRight,!0),"Array",{reduceRight:function(t){return o(this,t,arguments.length,arguments[1],!0)}})},{"./_array-reduce":13,"./_export":32,"./_strict-method":96}],136:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_array-reduce");i(i.P+i.F*!t("./_strict-method")([].reduce,!0),"Array",{reduce:function(t){return o(this,t,arguments.length,arguments[1],!1)}})},{"./_array-reduce":13,"./_export":32,"./_strict-method":96}],137:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_html"),s=t("./_cof"),r=t("./_to-index"),a=t("./_to-length"),l=[].slice;i(i.P+i.F*t("./_fails")(function(){o&&l.call(o)}),"Array",{slice:function(t,e){var n=a(this.length),i=s(this);if(e=void 0===e?n:e,"Array"==i)return l.call(this,t,e);for(var o=r(t,n),h=r(e,n),c=a(h-o),u=Array(c),d=0;d<c;d++)u[d]="String"==i?this.charAt(o+d):this[o+d];return u}})},{"./_cof":18,"./_export":32,"./_fails":34,"./_html":41,"./_to-index":105,"./_to-length":108}],138:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_array-methods")(3);i(i.P+i.F*!t("./_strict-method")([].some,!0),"Array",{some:function(t){return o(this,t,arguments[1])}})},{"./_array-methods":12,"./_export":32,"./_strict-method":96}],139:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_a-function"),s=t("./_to-object"),r=t("./_fails"),a=[].sort,l=[1,2,3];i(i.P+i.F*(r(function(){l.sort(void 0)})||!r(function(){l.sort(null)})||!t("./_strict-method")(a)),"Array",{sort:function(t){return void 0===t?a.call(s(this)):a.call(s(this),o(t))}})},{"./_a-function":3,"./_export":32,"./_fails":34,"./_strict-method":96,"./_to-object":109}],140:[function(t,e,n){t("./_set-species")("Array")},{"./_set-species":91}],141:[function(t,e,n){var i=t("./_export");i(i.S,"Date",{now:function(){return(new Date).getTime()}})},{"./_export":32}],142:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_fails"),s=Date.prototype.getTime,r=function(t){return t>9?t:"0"+t};i(i.P+i.F*(o(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!o(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(s.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),i=e<0?"-":e>9999?"+":"";return i+("00000"+Math.abs(e)).slice(i?-6:-4)+"-"+r(t.getUTCMonth()+1)+"-"+r(t.getUTCDate())+"T"+r(t.getUTCHours())+":"+r(t.getUTCMinutes())+":"+r(t.getUTCSeconds())+"."+(n>99?n:"0"+r(n))+"Z"}})},{"./_export":32,"./_fails":34}],143:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_to-object"),s=t("./_to-primitive");i(i.P+i.F*t("./_fails")(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=o(this),n=s(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},{"./_export":32,"./_fails":34,"./_to-object":109,"./_to-primitive":110}],144:[function(t,e,n){var i=t("./_wks")("toPrimitive"),o=Date.prototype;i in o||t("./_hide")(o,i,t("./_date-to-primitive"))},{"./_date-to-primitive":26,"./_hide":40,"./_wks":117}],145:[function(t,e,n){var i=Date.prototype,o="Invalid Date",s="toString",r=i[s],a=i.getTime;new Date(NaN)+""!=o&&t("./_redefine")(i,s,function(){var t=a.call(this);return t===t?r.call(this):o})},{"./_redefine":87}],146:[function(t,e,n){var i=t("./_export");i(i.P,"Function",{bind:t("./_bind")})},{"./_bind":16,"./_export":32}],147:[function(t,e,n){"use strict";var i=t("./_is-object"),o=t("./_object-gpo"),s=t("./_wks")("hasInstance"),r=Function.prototype;s in r||t("./_object-dp").f(r,s,{value:function(t){if("function"!=typeof this||!i(t))return!1;if(!i(this.prototype))return t instanceof this;for(;t=o(t);)if(this.prototype===t)return!0;return!1}})},{"./_is-object":49,"./_object-dp":67,"./_object-gpo":74,"./_wks":117}],148:[function(t,e,n){var i=t("./_object-dp").f,o=t("./_property-desc"),s=t("./_has"),r=Function.prototype,a=/^\s*function ([^ (]*)/,l="name",h=Object.isExtensible||function(){return!0};l in r||t("./_descriptors")&&i(r,l,{configurable:!0,get:function(){try{var t=this,e=(""+t).match(a)[1];return s(t,l)||!h(t)||i(t,l,o(5,e)),e}catch(n){return""}}})},{"./_descriptors":28,"./_has":39,"./_object-dp":67,"./_property-desc":85}],149:[function(t,e,n){"use strict";var i=t("./_collection-strong");e.exports=t("./_collection")("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=i.getEntry(this,t);return e&&e.v},set:function(t,e){return i.def(this,0===t?0:t,e)}},i,!0)},{"./_collection":22,"./_collection-strong":19}],150:[function(t,e,n){var i=t("./_export"),o=t("./_math-log1p"),s=Math.sqrt,r=Math.acosh;i(i.S+i.F*!(r&&710==Math.floor(r(Number.MAX_VALUE))&&r(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:o(t-1+s(t-1)*s(t+1))}})},{"./_export":32,"./_math-log1p":60}],151:[function(t,e,n){function i(t){return isFinite(t=+t)&&0!=t?t<0?-i(-t):Math.log(t+Math.sqrt(t*t+1)):t}var o=t("./_export"),s=Math.asinh;o(o.S+o.F*!(s&&1/s(0)>0),"Math",{asinh:i})},{"./_export":32}],152:[function(t,e,n){var i=t("./_export"),o=Math.atanh;i(i.S+i.F*!(o&&1/o(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},{"./_export":32}],153:[function(t,e,n){var i=t("./_export"),o=t("./_math-sign");i(i.S,"Math",{cbrt:function(t){return o(t=+t)*Math.pow(Math.abs(t),1/3)}})},{"./_export":32,"./_math-sign":61}],154:[function(t,e,n){var i=t("./_export");i(i.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},{"./_export":32}],155:[function(t,e,n){var i=t("./_export"),o=Math.exp;i(i.S,"Math",{cosh:function(t){return(o(t=+t)+o(-t))/2}})},{"./_export":32}],156:[function(t,e,n){var i=t("./_export"),o=t("./_math-expm1");i(i.S+i.F*(o!=Math.expm1),"Math",{expm1:o})},{"./_export":32,"./_math-expm1":59}],157:[function(t,e,n){var i=t("./_export"),o=t("./_math-sign"),s=Math.pow,r=s(2,-52),a=s(2,-23),l=s(2,127)*(2-a),h=s(2,-126),c=function(t){return t+1/r-1/r};i(i.S,"Math",{fround:function(t){var e,n,i=Math.abs(t),s=o(t);return i<h?s*c(i/h/a)*h*a:(e=(1+a/r)*i,n=e-(e-i),n>l||n!=n?s*(1/0):s*n)}})},{"./_export":32,"./_math-sign":61}],158:[function(t,e,n){var i=t("./_export"),o=Math.abs;i(i.S,"Math",{hypot:function(t,e){for(var n,i,s=0,r=0,a=arguments.length,l=0;r<a;)n=o(arguments[r++]),l<n?(i=l/n,s=s*i*i+1,l=n):n>0?(i=n/l,s+=i*i):s+=n;return l===1/0?1/0:l*Math.sqrt(s)}})},{"./_export":32}],159:[function(t,e,n){var i=t("./_export"),o=Math.imul;i(i.S+i.F*t("./_fails")(function(){return o(4294967295,5)!=-5||2!=o.length}),"Math",{imul:function(t,e){var n=65535,i=+t,o=+e,s=n&i,r=n&o;return 0|s*r+((n&i>>>16)*r+s*(n&o>>>16)<<16>>>0)}})},{"./_export":32,"./_fails":34}],160:[function(t,e,n){var i=t("./_export");i(i.S,"Math",{log10:function(t){return Math.log(t)/Math.LN10}})},{"./_export":32}],161:[function(t,e,n){var i=t("./_export");i(i.S,"Math",{log1p:t("./_math-log1p")})},{"./_export":32,"./_math-log1p":60}],162:[function(t,e,n){var i=t("./_export");i(i.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},{"./_export":32}],163:[function(t,e,n){var i=t("./_export");i(i.S,"Math",{sign:t("./_math-sign")})},{"./_export":32,"./_math-sign":61}],164:[function(t,e,n){var i=t("./_export"),o=t("./_math-expm1"),s=Math.exp;i(i.S+i.F*t("./_fails")(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(o(t)-o(-t))/2:(s(t-1)-s(-t-1))*(Math.E/2)}})},{"./_export":32,"./_fails":34,"./_math-expm1":59}],165:[function(t,e,n){var i=t("./_export"),o=t("./_math-expm1"),s=Math.exp;i(i.S,"Math",{tanh:function(t){var e=o(t=+t),n=o(-t);return e==1/0?1:n==1/0?-1:(e-n)/(s(t)+s(-t))}})},{"./_export":32,"./_math-expm1":59}],166:[function(t,e,n){var i=t("./_export");i(i.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},{"./_export":32}],167:[function(t,e,n){"use strict";var i=t("./_global"),o=t("./_has"),s=t("./_cof"),r=t("./_inherit-if-required"),a=t("./_to-primitive"),l=t("./_fails"),h=t("./_object-gopn").f,c=t("./_object-gopd").f,u=t("./_object-dp").f,d=t("./_string-trim").trim,p="Number",m=i[p],f=m,_=m.prototype,g=s(t("./_object-create")(_))==p,v="trim"in String.prototype,y=function(t){var e=a(t,!1);if("string"==typeof e&&e.length>2){e=v?e.trim():d(e,3);var n,i,o,s=e.charCodeAt(0);if(43===s||45===s){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===s){switch(e.charCodeAt(1)){case 66:case 98:i=2,o=49;break;case 79:case 111:i=8,o=55;break;default:return+e}for(var r,l=e.slice(2),h=0,c=l.length;h<c;h++)if(r=l.charCodeAt(h),r<48||r>o)return NaN;return parseInt(l,i)}}return+e};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof m&&(g?l(function(){_.valueOf.call(n)}):s(n)!=p)?r(new f(y(e)),n,m):y(e)};for(var b,x=t("./_descriptors")?h(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),L=0;x.length>L;L++)o(f,b=x[L])&&!o(m,b)&&u(m,b,c(f,b));m.prototype=_,_.constructor=m,t("./_redefine")(i,p,m)}},{"./_cof":18,"./_descriptors":28,"./_fails":34,"./_global":38,"./_has":39,"./_inherit-if-required":43,"./_object-create":66,"./_object-dp":67,"./_object-gopd":70,"./_object-gopn":72,"./_redefine":87,"./_string-trim":102,"./_to-primitive":110}],168:[function(t,e,n){var i=t("./_export");i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},{"./_export":32}],169:[function(t,e,n){var i=t("./_export"),o=t("./_global").isFinite;i(i.S,"Number",{isFinite:function(t){return"number"==typeof t&&o(t)}})},{"./_export":32,"./_global":38}],170:[function(t,e,n){var i=t("./_export");i(i.S,"Number",{isInteger:t("./_is-integer")})},{"./_export":32,"./_is-integer":48}],171:[function(t,e,n){var i=t("./_export");i(i.S,"Number",{isNaN:function(t){return t!=t}})},{"./_export":32}],172:[function(t,e,n){var i=t("./_export"),o=t("./_is-integer"),s=Math.abs;i(i.S,"Number",{isSafeInteger:function(t){return o(t)&&s(t)<=9007199254740991}})},{"./_export":32,"./_is-integer":48}],173:[function(t,e,n){var i=t("./_export");i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{"./_export":32}],174:[function(t,e,n){var i=t("./_export");i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{"./_export":32}],175:[function(t,e,n){var i=t("./_export"),o=t("./_parse-float");i(i.S+i.F*(Number.parseFloat!=o),"Number",{parseFloat:o})},{"./_export":32,"./_parse-float":81}],176:[function(t,e,n){var i=t("./_export"),o=t("./_parse-int");i(i.S+i.F*(Number.parseInt!=o),"Number",{parseInt:o})},{"./_export":32,"./_parse-int":82}],177:[function(t,e,n){
"use strict";var i=t("./_export"),o=t("./_to-integer"),s=t("./_a-number-value"),r=t("./_string-repeat"),a=1..toFixed,l=Math.floor,h=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",u="0",d=function(t,e){for(var n=-1,i=e;++n<6;)i+=t*h[n],h[n]=i%1e7,i=l(i/1e7)},p=function(t){for(var e=6,n=0;--e>=0;)n+=h[e],h[e]=l(n/t),n=n%t*1e7},m=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==h[t]){var n=String(h[t]);e=""===e?n:e+r.call(u,7-n.length)+n}return e},f=function(t,e,n){return 0===e?n:e%2===1?f(t,e-1,n*t):f(t*t,e/2,n)},_=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e};i(i.P+i.F*(!!a&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!t("./_fails")(function(){a.call({})})),"Number",{toFixed:function(t){var e,n,i,a,l=s(this,c),h=o(t),g="",v=u;if(h<0||h>20)throw RangeError(c);if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(g="-",l=-l),l>1e-21)if(e=_(l*f(2,69,1))-69,n=e<0?l*f(2,-e,1):l/f(2,e,1),n*=4503599627370496,e=52-e,e>0){for(d(0,n),i=h;i>=7;)d(1e7,0),i-=7;for(d(f(10,i,1),0),i=e-1;i>=23;)p(1<<23),i-=23;p(1<<i),d(1,1),p(2),v=m()}else d(0,n),d(1<<-e,0),v=m()+r.call(u,h);return h>0?(a=v.length,v=g+(a<=h?"0."+r.call(u,h-a)+v:v.slice(0,a-h)+"."+v.slice(a-h))):v=g+v,v}})},{"./_a-number-value":4,"./_export":32,"./_fails":34,"./_string-repeat":101,"./_to-integer":106}],178:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_fails"),s=t("./_a-number-value"),r=1..toPrecision;i(i.P+i.F*(o(function(){return"1"!==r.call(1,void 0)})||!o(function(){r.call({})})),"Number",{toPrecision:function(t){var e=s(this,"Number#toPrecision: incorrect invocation!");return void 0===t?r.call(e):r.call(e,t)}})},{"./_a-number-value":4,"./_export":32,"./_fails":34}],179:[function(t,e,n){var i=t("./_export");i(i.S+i.F,"Object",{assign:t("./_object-assign")})},{"./_export":32,"./_object-assign":65}],180:[function(t,e,n){var i=t("./_export");i(i.S,"Object",{create:t("./_object-create")})},{"./_export":32,"./_object-create":66}],181:[function(t,e,n){var i=t("./_export");i(i.S+i.F*!t("./_descriptors"),"Object",{defineProperties:t("./_object-dps")})},{"./_descriptors":28,"./_export":32,"./_object-dps":68}],182:[function(t,e,n){var i=t("./_export");i(i.S+i.F*!t("./_descriptors"),"Object",{defineProperty:t("./_object-dp").f})},{"./_descriptors":28,"./_export":32,"./_object-dp":67}],183:[function(t,e,n){var i=t("./_is-object"),o=t("./_meta").onFreeze;t("./_object-sap")("freeze",function(t){return function(e){return t&&i(e)?t(o(e)):e}})},{"./_is-object":49,"./_meta":62,"./_object-sap":78}],184:[function(t,e,n){var i=t("./_to-iobject"),o=t("./_object-gopd").f;t("./_object-sap")("getOwnPropertyDescriptor",function(){return function(t,e){return o(i(t),e)}})},{"./_object-gopd":70,"./_object-sap":78,"./_to-iobject":107}],185:[function(t,e,n){t("./_object-sap")("getOwnPropertyNames",function(){return t("./_object-gopn-ext").f})},{"./_object-gopn-ext":71,"./_object-sap":78}],186:[function(t,e,n){var i=t("./_to-object"),o=t("./_object-gpo");t("./_object-sap")("getPrototypeOf",function(){return function(t){return o(i(t))}})},{"./_object-gpo":74,"./_object-sap":78,"./_to-object":109}],187:[function(t,e,n){var i=t("./_is-object");t("./_object-sap")("isExtensible",function(t){return function(e){return!!i(e)&&(!t||t(e))}})},{"./_is-object":49,"./_object-sap":78}],188:[function(t,e,n){var i=t("./_is-object");t("./_object-sap")("isFrozen",function(t){return function(e){return!i(e)||!!t&&t(e)}})},{"./_is-object":49,"./_object-sap":78}],189:[function(t,e,n){var i=t("./_is-object");t("./_object-sap")("isSealed",function(t){return function(e){return!i(e)||!!t&&t(e)}})},{"./_is-object":49,"./_object-sap":78}],190:[function(t,e,n){var i=t("./_export");i(i.S,"Object",{is:t("./_same-value")})},{"./_export":32,"./_same-value":89}],191:[function(t,e,n){var i=t("./_to-object"),o=t("./_object-keys");t("./_object-sap")("keys",function(){return function(t){return o(i(t))}})},{"./_object-keys":76,"./_object-sap":78,"./_to-object":109}],192:[function(t,e,n){var i=t("./_is-object"),o=t("./_meta").onFreeze;t("./_object-sap")("preventExtensions",function(t){return function(e){return t&&i(e)?t(o(e)):e}})},{"./_is-object":49,"./_meta":62,"./_object-sap":78}],193:[function(t,e,n){var i=t("./_is-object"),o=t("./_meta").onFreeze;t("./_object-sap")("seal",function(t){return function(e){return t&&i(e)?t(o(e)):e}})},{"./_is-object":49,"./_meta":62,"./_object-sap":78}],194:[function(t,e,n){var i=t("./_export");i(i.S,"Object",{setPrototypeOf:t("./_set-proto").set})},{"./_export":32,"./_set-proto":90}],195:[function(t,e,n){"use strict";var i=t("./_classof"),o={};o[t("./_wks")("toStringTag")]="z",o+""!="[object z]"&&t("./_redefine")(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},{"./_classof":17,"./_redefine":87,"./_wks":117}],196:[function(t,e,n){var i=t("./_export"),o=t("./_parse-float");i(i.G+i.F*(parseFloat!=o),{parseFloat:o})},{"./_export":32,"./_parse-float":81}],197:[function(t,e,n){var i=t("./_export"),o=t("./_parse-int");i(i.G+i.F*(parseInt!=o),{parseInt:o})},{"./_export":32,"./_parse-int":82}],198:[function(t,e,n){"use strict";var i,o,s,r=t("./_library"),a=t("./_global"),l=t("./_ctx"),h=t("./_classof"),c=t("./_export"),u=t("./_is-object"),d=t("./_a-function"),p=t("./_an-instance"),m=t("./_for-of"),f=t("./_species-constructor"),_=t("./_task").set,g=t("./_microtask")(),v="Promise",y=a.TypeError,b=a.process,x=a[v],b=a.process,L="process"==h(b),w=function(){},M=!!function(){try{var e=x.resolve(1),n=(e.constructor={})[t("./_wks")("species")]=function(t){t(w,w)};return(L||"function"==typeof PromiseRejectionEvent)&&e.then(w)instanceof n}catch(i){}}(),k=function(t,e){return t===e||t===x&&e===s},P=function(t){var e;return!(!u(t)||"function"!=typeof(e=t.then))&&e},S=function(t){return k(x,t)?new E(t):new o(t)},E=o=function(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw y("Bad Promise constructor");e=t,n=i}),this.resolve=d(e),this.reject=d(n)},T=function(t){try{t()}catch(e){return{error:e}}},C=function(t,e){if(!t._n){t._n=!0;var n=t._c;g(function(){for(var i=t._v,o=1==t._s,s=0,r=function(e){var n,s,r=o?e.ok:e.fail,a=e.resolve,l=e.reject,h=e.domain;try{r?(o||(2==t._h&&O(t),t._h=1),r===!0?n=i:(h&&h.enter(),n=r(i),h&&h.exit()),n===e.promise?l(y("Promise-chain cycle")):(s=P(n))?s.call(n,a,l):a(n)):l(i)}catch(c){l(c)}};n.length>s;)r(n[s++]);t._c=[],t._n=!1,e&&!t._h&&D(t)})}},D=function(t){_.call(a,function(){var e,n,i,o=t._v;if(j(t)&&(e=T(function(){L?b.emit("unhandledRejection",o,t):(n=a.onunhandledrejection)?n({promise:t,reason:o}):(i=a.console)&&i.error&&i.error("Unhandled promise rejection",o)}),t._h=L||j(t)?2:1),t._a=void 0,e)throw e.error})},j=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,i=0;n.length>i;)if(e=n[i++],e.fail||!j(e.promise))return!1;return!0},O=function(t){_.call(a,function(){var e;L?b.emit("rejectionHandled",t):(e=a.onrejectionhandled)&&e({promise:t,reason:t._v})})},I=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),C(e,!0))},A=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw y("Promise can't be resolved itself");(e=P(t))?g(function(){var i={_w:n,_d:!1};try{e.call(t,l(A,i,1),l(I,i,1))}catch(o){I.call(i,o)}}):(n._v=t,n._s=1,C(n,!1))}catch(i){I.call({_w:n,_d:!1},i)}}};M||(x=function(t){p(this,x,v,"_h"),d(t),i.call(this);try{t(l(A,this,1),l(I,this,1))}catch(e){I.call(this,e)}},i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=t("./_redefine-all")(x.prototype,{then:function(t,e){var n=S(f(this,x));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=L?b.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&C(this,!1),n.promise},"catch":function(t){return this.then(void 0,t)}}),E=function(){var t=new i;this.promise=t,this.resolve=l(A,t,1),this.reject=l(I,t,1)}),c(c.G+c.W+c.F*!M,{Promise:x}),t("./_set-to-string-tag")(x,v),t("./_set-species")(v),s=t("./_core")[v],c(c.S+c.F*!M,v,{reject:function(t){var e=S(this),n=e.reject;return n(t),e.promise}}),c(c.S+c.F*(r||!M),v,{resolve:function(t){if(t instanceof x&&k(t.constructor,this))return t;var e=S(this),n=e.resolve;return n(t),e.promise}}),c(c.S+c.F*!(M&&t("./_iter-detect")(function(t){x.all(t)["catch"](w)})),v,{all:function(t){var e=this,n=S(e),i=n.resolve,o=n.reject,s=T(function(){var n=[],s=0,r=1;m(t,!1,function(t){var a=s++,l=!1;n.push(void 0),r++,e.resolve(t).then(function(t){l||(l=!0,n[a]=t,--r||i(n))},o)}),--r||i(n)});return s&&o(s.error),n.promise},race:function(t){var e=this,n=S(e),i=n.reject,o=T(function(){m(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return o&&i(o.error),n.promise}})},{"./_a-function":3,"./_an-instance":6,"./_classof":17,"./_core":23,"./_ctx":25,"./_export":32,"./_for-of":37,"./_global":38,"./_is-object":49,"./_iter-detect":54,"./_library":58,"./_microtask":64,"./_redefine-all":86,"./_set-species":91,"./_set-to-string-tag":92,"./_species-constructor":95,"./_task":104,"./_wks":117}],199:[function(t,e,n){var i=t("./_export"),o=t("./_a-function"),s=t("./_an-object"),r=(t("./_global").Reflect||{}).apply,a=Function.apply;i(i.S+i.F*!t("./_fails")(function(){r(function(){})}),"Reflect",{apply:function(t,e,n){var i=o(t),l=s(n);return r?r(i,e,l):a.call(i,e,l)}})},{"./_a-function":3,"./_an-object":7,"./_export":32,"./_fails":34,"./_global":38}],200:[function(t,e,n){var i=t("./_export"),o=t("./_object-create"),s=t("./_a-function"),r=t("./_an-object"),a=t("./_is-object"),l=t("./_fails"),h=t("./_bind"),c=(t("./_global").Reflect||{}).construct,u=l(function(){function t(){}return!(c(function(){},[],t)instanceof t)}),d=!l(function(){c(function(){})});i(i.S+i.F*(u||d),"Reflect",{construct:function(t,e){s(t),r(e);var n=arguments.length<3?t:s(arguments[2]);if(d&&!u)return c(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return i.push.apply(i,e),new(h.apply(t,i))}var l=n.prototype,p=o(a(l)?l:Object.prototype),m=Function.apply.call(t,p,e);return a(m)?m:p}})},{"./_a-function":3,"./_an-object":7,"./_bind":16,"./_export":32,"./_fails":34,"./_global":38,"./_is-object":49,"./_object-create":66}],201:[function(t,e,n){var i=t("./_object-dp"),o=t("./_export"),s=t("./_an-object"),r=t("./_to-primitive");o(o.S+o.F*t("./_fails")(function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){s(t),e=r(e,!0),s(n);try{return i.f(t,e,n),!0}catch(o){return!1}}})},{"./_an-object":7,"./_export":32,"./_fails":34,"./_object-dp":67,"./_to-primitive":110}],202:[function(t,e,n){var i=t("./_export"),o=t("./_object-gopd").f,s=t("./_an-object");i(i.S,"Reflect",{deleteProperty:function(t,e){var n=o(s(t),e);return!(n&&!n.configurable)&&delete t[e]}})},{"./_an-object":7,"./_export":32,"./_object-gopd":70}],203:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_an-object"),s=function(t){this._t=o(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};t("./_iter-create")(s,"Object",function(){var t,e=this,n=e._k;do if(e._i>=n.length)return{value:void 0,done:!0};while(!((t=n[e._i++])in e._t));return{value:t,done:!1}}),i(i.S,"Reflect",{enumerate:function(t){return new s(t)}})},{"./_an-object":7,"./_export":32,"./_iter-create":52}],204:[function(t,e,n){var i=t("./_object-gopd"),o=t("./_export"),s=t("./_an-object");o(o.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return i.f(s(t),e)}})},{"./_an-object":7,"./_export":32,"./_object-gopd":70}],205:[function(t,e,n){var i=t("./_export"),o=t("./_object-gpo"),s=t("./_an-object");i(i.S,"Reflect",{getPrototypeOf:function(t){return o(s(t))}})},{"./_an-object":7,"./_export":32,"./_object-gpo":74}],206:[function(t,e,n){function i(t,e){var n,a,c=arguments.length<3?t:arguments[2];return h(t)===c?t[e]:(n=o.f(t,e))?r(n,"value")?n.value:void 0!==n.get?n.get.call(c):void 0:l(a=s(t))?i(a,e,c):void 0}var o=t("./_object-gopd"),s=t("./_object-gpo"),r=t("./_has"),a=t("./_export"),l=t("./_is-object"),h=t("./_an-object");a(a.S,"Reflect",{get:i})},{"./_an-object":7,"./_export":32,"./_has":39,"./_is-object":49,"./_object-gopd":70,"./_object-gpo":74}],207:[function(t,e,n){var i=t("./_export");i(i.S,"Reflect",{has:function(t,e){return e in t}})},{"./_export":32}],208:[function(t,e,n){var i=t("./_export"),o=t("./_an-object"),s=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(t){return o(t),!s||s(t)}})},{"./_an-object":7,"./_export":32}],209:[function(t,e,n){var i=t("./_export");i(i.S,"Reflect",{ownKeys:t("./_own-keys")})},{"./_export":32,"./_own-keys":80}],210:[function(t,e,n){var i=t("./_export"),o=t("./_an-object"),s=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(t){o(t);try{return s&&s(t),!0}catch(e){return!1}}})},{"./_an-object":7,"./_export":32}],211:[function(t,e,n){var i=t("./_export"),o=t("./_set-proto");o&&i(i.S,"Reflect",{setPrototypeOf:function(t,e){o.check(t,e);try{return o.set(t,e),!0}catch(n){return!1}}})},{"./_export":32,"./_set-proto":90}],212:[function(t,e,n){function i(t,e,n){var l,d,p=arguments.length<4?t:arguments[3],m=s.f(c(t),e);if(!m){if(u(d=r(t)))return i(d,e,n,p);m=h(0)}return a(m,"value")?!(m.writable===!1||!u(p))&&(l=s.f(p,e)||h(0),l.value=n,o.f(p,e,l),!0):void 0!==m.set&&(m.set.call(p,n),!0)}var o=t("./_object-dp"),s=t("./_object-gopd"),r=t("./_object-gpo"),a=t("./_has"),l=t("./_export"),h=t("./_property-desc"),c=t("./_an-object"),u=t("./_is-object");l(l.S,"Reflect",{set:i})},{"./_an-object":7,"./_export":32,"./_has":39,"./_is-object":49,"./_object-dp":67,"./_object-gopd":70,"./_object-gpo":74,"./_property-desc":85}],213:[function(t,e,n){var i=t("./_global"),o=t("./_inherit-if-required"),s=t("./_object-dp").f,r=t("./_object-gopn").f,a=t("./_is-regexp"),l=t("./_flags"),h=i.RegExp,c=h,u=h.prototype,d=/a/g,p=/a/g,m=new h(d)!==d;if(t("./_descriptors")&&(!m||t("./_fails")(function(){return p[t("./_wks")("match")]=!1,h(d)!=d||h(p)==p||"/a/i"!=h(d,"i")}))){h=function(t,e){var n=this instanceof h,i=a(t),s=void 0===e;return!n&&i&&t.constructor===h&&s?t:o(m?new c(i&&!s?t.source:t,e):c((i=t instanceof h)?t.source:t,i&&s?l.call(t):e),n?this:u,h)};for(var f=(function(t){t in h||s(h,t,{configurable:!0,get:function(){return c[t]},set:function(e){c[t]=e}})}),_=r(c),g=0;_.length>g;)f(_[g++]);u.constructor=h,h.prototype=u,t("./_redefine")(i,"RegExp",h)}t("./_set-species")("RegExp")},{"./_descriptors":28,"./_fails":34,"./_flags":36,"./_global":38,"./_inherit-if-required":43,"./_is-regexp":50,"./_object-dp":67,"./_object-gopn":72,"./_redefine":87,"./_set-species":91,"./_wks":117}],214:[function(t,e,n){t("./_descriptors")&&"g"!=/./g.flags&&t("./_object-dp").f(RegExp.prototype,"flags",{configurable:!0,get:t("./_flags")})},{"./_descriptors":28,"./_flags":36,"./_object-dp":67}],215:[function(t,e,n){t("./_fix-re-wks")("match",1,function(t,e,n){return[function(n){"use strict";var i=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,i):new RegExp(n)[e](String(i))},n]})},{"./_fix-re-wks":35}],216:[function(t,e,n){t("./_fix-re-wks")("replace",2,function(t,e,n){return[function(i,o){"use strict";var s=t(this),r=void 0==i?void 0:i[e];return void 0!==r?r.call(i,s,o):n.call(String(s),i,o)},n]})},{"./_fix-re-wks":35}],217:[function(t,e,n){t("./_fix-re-wks")("search",1,function(t,e,n){return[function(n){"use strict";var i=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,i):new RegExp(n)[e](String(i))},n]})},{"./_fix-re-wks":35}],218:[function(t,e,n){t("./_fix-re-wks")("split",2,function(e,n,i){"use strict";var o=t("./_is-regexp"),s=i,r=[].push,a="split",l="length",h="lastIndex";if("c"=="abbc"[a](/(b)*/)[1]||4!="test"[a](/(?:)/,-1)[l]||2!="ab"[a](/(?:ab)*/)[l]||4!="."[a](/(.?)(.?)/)[l]||"."[a](/()()/)[l]>1||""[a](/.?/)[l]){var c=void 0===/()??/.exec("")[1];i=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!o(t))return s.call(n,t,e);var i,a,u,d,p,m=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),_=0,g=void 0===e?4294967295:e>>>0,v=new RegExp(t.source,f+"g");for(c||(i=new RegExp("^"+v.source+"$(?!\\s)",f));(a=v.exec(n))&&(u=a.index+a[0][l],!(u>_&&(m.push(n.slice(_,a.index)),!c&&a[l]>1&&a[0].replace(i,function(){for(p=1;p<arguments[l]-2;p++)void 0===arguments[p]&&(a[p]=void 0)}),a[l]>1&&a.index<n[l]&&r.apply(m,a.slice(1)),d=a[0][l],_=u,m[l]>=g)));)v[h]===a.index&&v[h]++;return _===n[l]?!d&&v.test("")||m.push(""):m.push(n.slice(_)),m[l]>g?m.slice(0,g):m}}else"0"[a](void 0,0)[l]&&(i=function(t,e){return void 0===t&&0===e?[]:s.call(this,t,e)});return[function(t,o){var s=e(this),r=void 0==t?void 0:t[n];return void 0!==r?r.call(t,s,o):i.call(String(s),t,o)},i]})},{"./_fix-re-wks":35,"./_is-regexp":50}],219:[function(t,e,n){"use strict";t("./es6.regexp.flags");var i=t("./_an-object"),o=t("./_flags"),s=t("./_descriptors"),r="toString",a=/./[r],l=function(e){t("./_redefine")(RegExp.prototype,r,e,!0)};t("./_fails")(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?l(function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!s&&t instanceof RegExp?o.call(t):void 0)}):a.name!=r&&l(function(){return a.call(this)})},{"./_an-object":7,"./_descriptors":28,"./_fails":34,"./_flags":36,"./_redefine":87,"./es6.regexp.flags":214}],220:[function(t,e,n){"use strict";var i=t("./_collection-strong");e.exports=t("./_collection")("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(this,t=0===t?0:t,t)}},i)},{"./_collection":22,"./_collection-strong":19}],221:[function(t,e,n){"use strict";t("./_string-html")("anchor",function(t){return function(e){return t(this,"a","name",e)}})},{"./_string-html":99}],222:[function(t,e,n){"use strict";t("./_string-html")("big",function(t){return function(){return t(this,"big","","")}})},{"./_string-html":99}],223:[function(t,e,n){"use strict";t("./_string-html")("blink",function(t){return function(){return t(this,"blink","","")}})},{"./_string-html":99}],224:[function(t,e,n){"use strict";t("./_string-html")("bold",function(t){return function(){return t(this,"b","","")}})},{"./_string-html":99}],225:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_string-at")(!1);i(i.P,"String",{codePointAt:function(t){return o(this,t)}})},{"./_export":32,"./_string-at":97}],226:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_to-length"),s=t("./_string-context"),r="endsWith",a=""[r];i(i.P+i.F*t("./_fails-is-regexp")(r),"String",{endsWith:function(t){var e=s(this,t,r),n=arguments.length>1?arguments[1]:void 0,i=o(e.length),l=void 0===n?i:Math.min(o(n),i),h=String(t);return a?a.call(e,h,l):e.slice(l-h.length,l)===h}})},{"./_export":32,"./_fails-is-regexp":33,"./_string-context":98,"./_to-length":108}],227:[function(t,e,n){"use strict";t("./_string-html")("fixed",function(t){return function(){return t(this,"tt","","")}})},{"./_string-html":99}],228:[function(t,e,n){"use strict";t("./_string-html")("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},{"./_string-html":99}],229:[function(t,e,n){"use strict";t("./_string-html")("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},{"./_string-html":99}],230:[function(t,e,n){var i=t("./_export"),o=t("./_to-index"),s=String.fromCharCode,r=String.fromCodePoint;i(i.S+i.F*(!!r&&1!=r.length),"String",{fromCodePoint:function(t){for(var e,n=[],i=arguments.length,r=0;i>r;){if(e=+arguments[r++],o(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?s(e):s(((e-=65536)>>10)+55296,e%1024+56320))}return n.join("")}})},{"./_export":32,"./_to-index":105}],231:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_string-context"),s="includes";i(i.P+i.F*t("./_fails-is-regexp")(s),"String",{includes:function(t){return!!~o(this,t,s).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},{"./_export":32,"./_fails-is-regexp":33,"./_string-context":98}],232:[function(t,e,n){"use strict";t("./_string-html")("italics",function(t){return function(){return t(this,"i","","")}})},{"./_string-html":99}],233:[function(t,e,n){"use strict";var i=t("./_string-at")(!0);t("./_iter-define")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},{"./_iter-define":53,"./_string-at":97}],234:[function(t,e,n){"use strict";t("./_string-html")("link",function(t){return function(e){return t(this,"a","href",e)}})},{"./_string-html":99}],235:[function(t,e,n){var i=t("./_export"),o=t("./_to-iobject"),s=t("./_to-length");i(i.S,"String",{raw:function(t){for(var e=o(t.raw),n=s(e.length),i=arguments.length,r=[],a=0;n>a;)r.push(String(e[a++])),a<i&&r.push(String(arguments[a]));return r.join("")}})},{"./_export":32,"./_to-iobject":107,"./_to-length":108}],236:[function(t,e,n){var i=t("./_export");i(i.P,"String",{repeat:t("./_string-repeat")})},{"./_export":32,"./_string-repeat":101}],237:[function(t,e,n){"use strict";t("./_string-html")("small",function(t){return function(){return t(this,"small","","")}})},{"./_string-html":99}],238:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_to-length"),s=t("./_string-context"),r="startsWith",a=""[r];i(i.P+i.F*t("./_fails-is-regexp")(r),"String",{startsWith:function(t){var e=s(this,t,r),n=o(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),i=String(t);return a?a.call(e,i,n):e.slice(n,n+i.length)===i}})},{"./_export":32,"./_fails-is-regexp":33,"./_string-context":98,"./_to-length":108}],239:[function(t,e,n){"use strict";t("./_string-html")("strike",function(t){return function(){return t(this,"strike","","")}})},{"./_string-html":99}],240:[function(t,e,n){"use strict";t("./_string-html")("sub",function(t){return function(){return t(this,"sub","","")}})},{"./_string-html":99}],241:[function(t,e,n){"use strict";t("./_string-html")("sup",function(t){return function(){return t(this,"sup","","")}})},{"./_string-html":99}],242:[function(t,e,n){"use strict";t("./_string-trim")("trim",function(t){return function(){return t(this,3)}})},{"./_string-trim":102}],243:[function(t,e,n){"use strict";var i=t("./_global"),o=t("./_has"),s=t("./_descriptors"),r=t("./_export"),a=t("./_redefine"),l=t("./_meta").KEY,h=t("./_fails"),c=t("./_shared"),u=t("./_set-to-string-tag"),d=t("./_uid"),p=t("./_wks"),m=t("./_wks-ext"),f=t("./_wks-define"),_=t("./_keyof"),g=t("./_enum-keys"),v=t("./_is-array"),y=t("./_an-object"),b=t("./_to-iobject"),x=t("./_to-primitive"),L=t("./_property-desc"),w=t("./_object-create"),M=t("./_object-gopn-ext"),k=t("./_object-gopd"),P=t("./_object-dp"),S=t("./_object-keys"),E=k.f,T=P.f,C=M.f,D=i.Symbol,j=i.JSON,O=j&&j.stringify,I="prototype",A=p("_hidden"),z=p("toPrimitive"),N={}.propertyIsEnumerable,U=c("symbol-registry"),R=c("symbols"),F=c("op-symbols"),B=Object[I],G="function"==typeof D,q=i.QObject,Z=!q||!q[I]||!q[I].findChild,H=s&&h(function(){return 7!=w(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=E(B,e);i&&delete B[e],T(t,e,n),i&&t!==B&&T(B,e,i)}:T,W=function(t){var e=R[t]=w(D[I]);return e._k=t,e},V=G&&"symbol"==typeof D.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof D},$=function(t,e,n){return t===B&&$(F,e,n),y(t),e=x(e,!0),y(n),o(R,e)?(n.enumerable?(o(t,A)&&t[A][e]&&(t[A][e]=!1),n=w(n,{enumerable:L(0,!1)})):(o(t,A)||T(t,A,L(1,{})),t[A][e]=!0),H(t,e,n)):T(t,e,n)},J=function(t,e){y(t);for(var n,i=g(e=b(e)),o=0,s=i.length;s>o;)$(t,n=i[o++],e[n]);return t},Y=function(t,e){return void 0===e?w(t):J(w(t),e)},X=function(t){var e=N.call(this,t=x(t,!0));return!(this===B&&o(R,t)&&!o(F,t))&&(!(e||!o(this,t)||!o(R,t)||o(this,A)&&this[A][t])||e)},K=function(t,e){if(t=b(t),e=x(e,!0),t!==B||!o(R,e)||o(F,e)){var n=E(t,e);return!n||!o(R,e)||o(t,A)&&t[A][e]||(n.enumerable=!0),n}},Q=function(t){for(var e,n=C(b(t)),i=[],s=0;n.length>s;)o(R,e=n[s++])||e==A||e==l||i.push(e);return i},tt=function(t){for(var e,n=t===B,i=C(n?F:b(t)),s=[],r=0;i.length>r;)!o(R,e=i[r++])||n&&!o(B,e)||s.push(R[e]);return s};G||(D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===B&&e.call(F,n),o(this,A)&&o(this[A],t)&&(this[A][t]=!1),H(this,t,L(1,n))};return s&&Z&&H(B,t,{configurable:!0,set:e}),W(t)},a(D[I],"toString",function(){return this._k}),k.f=K,P.f=$,t("./_object-gopn").f=M.f=Q,t("./_object-pie").f=X,t("./_object-gops").f=tt,s&&!t("./_library")&&a(B,"propertyIsEnumerable",X,!0),m.f=function(t){return W(p(t))}),r(r.G+r.W+r.F*!G,{Symbol:D});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)p(et[nt++]);for(var et=S(p.store),nt=0;et.length>nt;)f(et[nt++]);r(r.S+r.F*!G,"Symbol",{"for":function(t){return o(U,t+="")?U[t]:U[t]=D(t)},keyFor:function(t){if(V(t))return _(U,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){Z=!0},useSimple:function(){Z=!1}}),r(r.S+r.F*!G,"Object",{create:Y,defineProperty:$,defineProperties:J,getOwnPropertyDescriptor:K,getOwnPropertyNames:Q,getOwnPropertySymbols:tt}),j&&r(r.S+r.F*(!G||h(function(){var t=D();return"[null]"!=O([t])||"{}"!=O({a:t})||"{}"!=O(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!V(t)){for(var e,n,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);return e=i[1],"function"==typeof e&&(n=e),!n&&v(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!V(e))return e}),i[1]=e,O.apply(j,i)}}}),D[I][z]||t("./_hide")(D[I],z,D[I].valueOf),u(D,"Symbol"),u(Math,"Math",!0),u(i.JSON,"JSON",!0)},{"./_an-object":7,"./_descriptors":28,"./_enum-keys":31,"./_export":32,"./_fails":34,"./_global":38,"./_has":39,"./_hide":40,"./_is-array":47,"./_keyof":57,"./_library":58,"./_meta":62,"./_object-create":66,"./_object-dp":67,"./_object-gopd":70,"./_object-gopn":72,"./_object-gopn-ext":71,"./_object-gops":73,"./_object-keys":76,"./_object-pie":77,"./_property-desc":85,"./_redefine":87,"./_set-to-string-tag":92,"./_shared":94,"./_to-iobject":107,"./_to-primitive":110,"./_uid":114,"./_wks":117,"./_wks-define":115,"./_wks-ext":116}],244:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_typed"),s=t("./_typed-buffer"),r=t("./_an-object"),a=t("./_to-index"),l=t("./_to-length"),h=t("./_is-object"),c=t("./_global").ArrayBuffer,u=t("./_species-constructor"),d=s.ArrayBuffer,p=s.DataView,m=o.ABV&&c.isView,f=d.prototype.slice,_=o.VIEW,g="ArrayBuffer";i(i.G+i.W+i.F*(c!==d),{ArrayBuffer:d}),i(i.S+i.F*!o.CONSTR,g,{isView:function(t){return m&&m(t)||h(t)&&_ in t}}),i(i.P+i.U+i.F*t("./_fails")(function(){return!new d(2).slice(1,void 0).byteLength}),g,{slice:function(t,e){if(void 0!==f&&void 0===e)return f.call(r(this),t);for(var n=r(this).byteLength,i=a(t,n),o=a(void 0===e?n:e,n),s=new(u(this,d))(l(o-i)),h=new p(this),c=new p(s),m=0;i<o;)c.setUint8(m++,h.getUint8(i++));return s}}),t("./_set-species")(g)},{"./_an-object":7,"./_export":32,"./_fails":34,"./_global":38,"./_is-object":49,"./_set-species":91,"./_species-constructor":95,"./_to-index":105,"./_to-length":108,"./_typed":113,"./_typed-buffer":112}],245:[function(t,e,n){var i=t("./_export");i(i.G+i.W+i.F*!t("./_typed").ABV,{DataView:t("./_typed-buffer").DataView})},{"./_export":32,"./_typed":113,"./_typed-buffer":112}],246:[function(t,e,n){t("./_typed-array")("Float32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},{"./_typed-array":111}],247:[function(t,e,n){t("./_typed-array")("Float64",8,function(t){return function(e,n,i){return t(this,e,n,i)}})},{"./_typed-array":111}],248:[function(t,e,n){t("./_typed-array")("Int16",2,function(t){return function(e,n,i){return t(this,e,n,i)}})},{"./_typed-array":111}],249:[function(t,e,n){t("./_typed-array")("Int32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},{"./_typed-array":111}],250:[function(t,e,n){t("./_typed-array")("Int8",1,function(t){return function(e,n,i){return t(this,e,n,i)}})},{"./_typed-array":111}],251:[function(t,e,n){t("./_typed-array")("Uint16",2,function(t){return function(e,n,i){return t(this,e,n,i)}})},{"./_typed-array":111}],252:[function(t,e,n){t("./_typed-array")("Uint32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},{"./_typed-array":111}],253:[function(t,e,n){t("./_typed-array")("Uint8",1,function(t){return function(e,n,i){return t(this,e,n,i)}})},{"./_typed-array":111}],254:[function(t,e,n){t("./_typed-array")("Uint8",1,function(t){return function(e,n,i){return t(this,e,n,i)}},!0)},{"./_typed-array":111}],255:[function(t,e,n){"use strict";var i,o=t("./_array-methods")(0),s=t("./_redefine"),r=t("./_meta"),a=t("./_object-assign"),l=t("./_collection-weak"),h=t("./_is-object"),c=r.getWeak,u=Object.isExtensible,d=l.ufstore,p={},m=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},f={get:function(t){if(h(t)){var e=c(t);return e===!0?d(this).get(t):e?e[this._i]:void 0}},set:function(t,e){return l.def(this,t,e)}},_=e.exports=t("./_collection")("WeakMap",m,f,l,!0,!0);7!=(new _).set((Object.freeze||Object)(p),7).get(p)&&(i=l.getConstructor(m),a(i.prototype,f),r.NEED=!0,o(["delete","has","get","set"],function(t){var e=_.prototype,n=e[t];s(e,t,function(e,o){if(h(e)&&!u(e)){this._f||(this._f=new i);var s=this._f[t](e,o);return"set"==t?this:s}return n.call(this,e,o)})}))},{"./_array-methods":12,"./_collection":22,"./_collection-weak":21,"./_is-object":49,"./_meta":62,"./_object-assign":65,"./_redefine":87}],256:[function(t,e,n){"use strict";var i=t("./_collection-weak");t("./_collection")("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(this,t,!0)}},i,!1,!0)},{"./_collection":22,"./_collection-weak":21}],257:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_array-includes")(!0);i(i.P,"Array",{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),t("./_add-to-unscopables")("includes")},{"./_add-to-unscopables":5,"./_array-includes":11,"./_export":32}],258:[function(t,e,n){var i=t("./_export"),o=t("./_microtask")(),s=t("./_global").process,r="process"==t("./_cof")(s);i(i.G,{asap:function(t){var e=r&&s.domain;o(e?e.bind(t):t)}})},{"./_cof":18,"./_export":32,"./_global":38,"./_microtask":64}],259:[function(t,e,n){var i=t("./_export"),o=t("./_cof");i(i.S,"Error",{isError:function(t){return"Error"===o(t)}})},{"./_cof":18,"./_export":32}],260:[function(t,e,n){var i=t("./_export");i(i.P+i.R,"Map",{toJSON:t("./_collection-to-json")("Map")})},{"./_collection-to-json":20,"./_export":32}],261:[function(t,e,n){var i=t("./_export");i(i.S,"Math",{iaddh:function(t,e,n,i){var o=t>>>0,s=e>>>0,r=n>>>0;return s+(i>>>0)+((o&r|(o|r)&~(o+r>>>0))>>>31)|0}})},{"./_export":32}],262:[function(t,e,n){var i=t("./_export");i(i.S,"Math",{imulh:function(t,e){var n=65535,i=+t,o=+e,s=i&n,r=o&n,a=i>>16,l=o>>16,h=(a*r>>>0)+(s*r>>>16);return a*l+(h>>16)+((s*l>>>0)+(h&n)>>16)}})},{"./_export":32}],263:[function(t,e,n){var i=t("./_export");i(i.S,"Math",{isubh:function(t,e,n,i){var o=t>>>0,s=e>>>0,r=n>>>0;return s-(i>>>0)-((~o&r|~(o^r)&o-r>>>0)>>>31)|0}})},{"./_export":32}],264:[function(t,e,n){var i=t("./_export");i(i.S,"Math",{umulh:function(t,e){var n=65535,i=+t,o=+e,s=i&n,r=o&n,a=i>>>16,l=o>>>16,h=(a*r>>>0)+(s*r>>>16);return a*l+(h>>>16)+((s*l>>>0)+(h&n)>>>16)}})},{"./_export":32}],265:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_to-object"),s=t("./_a-function"),r=t("./_object-dp");t("./_descriptors")&&i(i.P+t("./_object-forced-pam"),"Object",{__defineGetter__:function(t,e){r.f(o(this),t,{get:s(e),enumerable:!0,configurable:!0})}})},{"./_a-function":3,"./_descriptors":28,"./_export":32,"./_object-dp":67,"./_object-forced-pam":69,"./_to-object":109}],266:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_to-object"),s=t("./_a-function"),r=t("./_object-dp");
t("./_descriptors")&&i(i.P+t("./_object-forced-pam"),"Object",{__defineSetter__:function(t,e){r.f(o(this),t,{set:s(e),enumerable:!0,configurable:!0})}})},{"./_a-function":3,"./_descriptors":28,"./_export":32,"./_object-dp":67,"./_object-forced-pam":69,"./_to-object":109}],267:[function(t,e,n){var i=t("./_export"),o=t("./_object-to-array")(!0);i(i.S,"Object",{entries:function(t){return o(t)}})},{"./_export":32,"./_object-to-array":79}],268:[function(t,e,n){var i=t("./_export"),o=t("./_own-keys"),s=t("./_to-iobject"),r=t("./_object-gopd"),a=t("./_create-property");i(i.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n=s(t),i=r.f,l=o(n),h={},c=0;l.length>c;)a(h,e=l[c++],i(n,e));return h}})},{"./_create-property":24,"./_export":32,"./_object-gopd":70,"./_own-keys":80,"./_to-iobject":107}],269:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_to-object"),s=t("./_to-primitive"),r=t("./_object-gpo"),a=t("./_object-gopd").f;t("./_descriptors")&&i(i.P+t("./_object-forced-pam"),"Object",{__lookupGetter__:function(t){var e,n=o(this),i=s(t,!0);do if(e=a(n,i))return e.get;while(n=r(n))}})},{"./_descriptors":28,"./_export":32,"./_object-forced-pam":69,"./_object-gopd":70,"./_object-gpo":74,"./_to-object":109,"./_to-primitive":110}],270:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_to-object"),s=t("./_to-primitive"),r=t("./_object-gpo"),a=t("./_object-gopd").f;t("./_descriptors")&&i(i.P+t("./_object-forced-pam"),"Object",{__lookupSetter__:function(t){var e,n=o(this),i=s(t,!0);do if(e=a(n,i))return e.set;while(n=r(n))}})},{"./_descriptors":28,"./_export":32,"./_object-forced-pam":69,"./_object-gopd":70,"./_object-gpo":74,"./_to-object":109,"./_to-primitive":110}],271:[function(t,e,n){var i=t("./_export"),o=t("./_object-to-array")(!1);i(i.S,"Object",{values:function(t){return o(t)}})},{"./_export":32,"./_object-to-array":79}],272:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_global"),s=t("./_core"),r=t("./_microtask")(),a=t("./_wks")("observable"),l=t("./_a-function"),h=t("./_an-object"),c=t("./_an-instance"),u=t("./_redefine-all"),d=t("./_hide"),p=t("./_for-of"),m=p.RETURN,f=function(t){return null==t?void 0:l(t)},_=function(t){var e=t._c;e&&(t._c=void 0,e())},g=function(t){return void 0===t._o},v=function(t){g(t)||(t._o=void 0,_(t))},y=function(t,e){h(t),this._c=void 0,this._o=t,t=new b(this);try{var n=e(t),i=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){i.unsubscribe()}:l(n),this._c=n)}catch(o){return void t.error(o)}g(this)&&_(this)};y.prototype=u({},{unsubscribe:function(){v(this)}});var b=function(t){this._s=t};b.prototype=u({},{next:function(t){var e=this._s;if(!g(e)){var n=e._o;try{var i=f(n.next);if(i)return i.call(n,t)}catch(o){try{v(e)}finally{throw o}}}},error:function(t){var e=this._s;if(g(e))throw t;var n=e._o;e._o=void 0;try{var i=f(n.error);if(!i)throw t;t=i.call(n,t)}catch(o){try{_(e)}finally{throw o}}return _(e),t},complete:function(t){var e=this._s;if(!g(e)){var n=e._o;e._o=void 0;try{var i=f(n.complete);t=i?i.call(n,t):void 0}catch(o){try{_(e)}finally{throw o}}return _(e),t}}});var x=function(t){c(this,x,"Observable","_f")._f=l(t)};u(x.prototype,{subscribe:function(t){return new y(t,this._f)},forEach:function(t){var e=this;return new(s.Promise||o.Promise)(function(n,i){l(t);var o=e.subscribe({next:function(e){try{return t(e)}catch(n){i(n),o.unsubscribe()}},error:i,complete:n})})}}),u(x,{from:function(t){var e="function"==typeof this?this:x,n=f(h(t)[a]);if(n){var i=h(n.call(t));return i.constructor===e?i:new e(function(t){return i.subscribe(t)})}return new e(function(e){var n=!1;return r(function(){if(!n){try{if(p(t,!1,function(t){if(e.next(t),n)return m})===m)return}catch(i){if(n)throw i;return void e.error(i)}e.complete()}}),function(){n=!0}})},of:function(){for(var t=0,e=arguments.length,n=Array(e);t<e;)n[t]=arguments[t++];return new("function"==typeof this?this:x)(function(t){var e=!1;return r(function(){if(!e){for(var i=0;i<n.length;++i)if(t.next(n[i]),e)return;t.complete()}}),function(){e=!0}})}}),d(x.prototype,a,function(){return this}),i(i.G,{Observable:x}),t("./_set-species")("Observable")},{"./_a-function":3,"./_an-instance":6,"./_an-object":7,"./_core":23,"./_export":32,"./_for-of":37,"./_global":38,"./_hide":40,"./_microtask":64,"./_redefine-all":86,"./_set-species":91,"./_wks":117}],273:[function(t,e,n){var i=t("./_metadata"),o=t("./_an-object"),s=i.key,r=i.set;i.exp({defineMetadata:function(t,e,n,i){r(t,e,o(n),s(i))}})},{"./_an-object":7,"./_metadata":63}],274:[function(t,e,n){var i=t("./_metadata"),o=t("./_an-object"),s=i.key,r=i.map,a=i.store;i.exp({deleteMetadata:function(t,e){var n=arguments.length<3?void 0:s(arguments[2]),i=r(o(e),n,!1);if(void 0===i||!i["delete"](t))return!1;if(i.size)return!0;var l=a.get(e);return l["delete"](n),!!l.size||a["delete"](e)}})},{"./_an-object":7,"./_metadata":63}],275:[function(t,e,n){var i=t("./es6.set"),o=t("./_array-from-iterable"),s=t("./_metadata"),r=t("./_an-object"),a=t("./_object-gpo"),l=s.keys,h=s.key,c=function(t,e){var n=l(t,e),s=a(t);if(null===s)return n;var r=c(s,e);return r.length?n.length?o(new i(n.concat(r))):r:n};s.exp({getMetadataKeys:function(t){return c(r(t),arguments.length<2?void 0:h(arguments[1]))}})},{"./_an-object":7,"./_array-from-iterable":10,"./_metadata":63,"./_object-gpo":74,"./es6.set":220}],276:[function(t,e,n){var i=t("./_metadata"),o=t("./_an-object"),s=t("./_object-gpo"),r=i.has,a=i.get,l=i.key,h=function(t,e,n){var i=r(t,e,n);if(i)return a(t,e,n);var o=s(e);return null!==o?h(t,o,n):void 0};i.exp({getMetadata:function(t,e){return h(t,o(e),arguments.length<3?void 0:l(arguments[2]))}})},{"./_an-object":7,"./_metadata":63,"./_object-gpo":74}],277:[function(t,e,n){var i=t("./_metadata"),o=t("./_an-object"),s=i.keys,r=i.key;i.exp({getOwnMetadataKeys:function(t){return s(o(t),arguments.length<2?void 0:r(arguments[1]))}})},{"./_an-object":7,"./_metadata":63}],278:[function(t,e,n){var i=t("./_metadata"),o=t("./_an-object"),s=i.get,r=i.key;i.exp({getOwnMetadata:function(t,e){return s(t,o(e),arguments.length<3?void 0:r(arguments[2]))}})},{"./_an-object":7,"./_metadata":63}],279:[function(t,e,n){var i=t("./_metadata"),o=t("./_an-object"),s=t("./_object-gpo"),r=i.has,a=i.key,l=function(t,e,n){var i=r(t,e,n);if(i)return!0;var o=s(e);return null!==o&&l(t,o,n)};i.exp({hasMetadata:function(t,e){return l(t,o(e),arguments.length<3?void 0:a(arguments[2]))}})},{"./_an-object":7,"./_metadata":63,"./_object-gpo":74}],280:[function(t,e,n){var i=t("./_metadata"),o=t("./_an-object"),s=i.has,r=i.key;i.exp({hasOwnMetadata:function(t,e){return s(t,o(e),arguments.length<3?void 0:r(arguments[2]))}})},{"./_an-object":7,"./_metadata":63}],281:[function(t,e,n){var i=t("./_metadata"),o=t("./_an-object"),s=t("./_a-function"),r=i.key,a=i.set;i.exp({metadata:function(t,e){return function(n,i){a(t,e,(void 0!==i?o:s)(n),r(i))}}})},{"./_a-function":3,"./_an-object":7,"./_metadata":63}],282:[function(t,e,n){var i=t("./_export");i(i.P+i.R,"Set",{toJSON:t("./_collection-to-json")("Set")})},{"./_collection-to-json":20,"./_export":32}],283:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_string-at")(!0);i(i.P,"String",{at:function(t){return o(this,t)}})},{"./_export":32,"./_string-at":97}],284:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_defined"),s=t("./_to-length"),r=t("./_is-regexp"),a=t("./_flags"),l=RegExp.prototype,h=function(t,e){this._r=t,this._s=e};t("./_iter-create")(h,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),i(i.P,"String",{matchAll:function(t){if(o(this),!r(t))throw TypeError(t+" is not a regexp!");var e=String(this),n="flags"in l?String(t.flags):a.call(t),i=new RegExp(t.source,~n.indexOf("g")?n:"g"+n);return i.lastIndex=s(t.lastIndex),new h(i,e)}})},{"./_defined":27,"./_export":32,"./_flags":36,"./_is-regexp":50,"./_iter-create":52,"./_to-length":108}],285:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_string-pad");i(i.P,"String",{padEnd:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},{"./_export":32,"./_string-pad":100}],286:[function(t,e,n){"use strict";var i=t("./_export"),o=t("./_string-pad");i(i.P,"String",{padStart:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},{"./_export":32,"./_string-pad":100}],287:[function(t,e,n){"use strict";t("./_string-trim")("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},{"./_string-trim":102}],288:[function(t,e,n){"use strict";t("./_string-trim")("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},{"./_string-trim":102}],289:[function(t,e,n){t("./_wks-define")("asyncIterator")},{"./_wks-define":115}],290:[function(t,e,n){t("./_wks-define")("observable")},{"./_wks-define":115}],291:[function(t,e,n){var i=t("./_export");i(i.S,"System",{global:t("./_global")})},{"./_export":32,"./_global":38}],292:[function(t,e,n){for(var i=t("./es6.array.iterator"),o=t("./_redefine"),s=t("./_global"),r=t("./_hide"),a=t("./_iterators"),l=t("./_wks"),h=l("iterator"),c=l("toStringTag"),u=a.Array,d=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],p=0;p<5;p++){var m,f=d[p],_=s[f],g=_&&_.prototype;if(g){g[h]||r(g,h,u),g[c]||r(g,c,f),a[f]=u;for(m in i)g[m]||o(g,m,i[m],!0)}}},{"./_global":38,"./_hide":40,"./_iterators":56,"./_redefine":87,"./_wks":117,"./es6.array.iterator":130}],293:[function(t,e,n){var i=t("./_export"),o=t("./_task");i(i.G+i.B,{setImmediate:o.set,clearImmediate:o.clear})},{"./_export":32,"./_task":104}],294:[function(t,e,n){var i=t("./_global"),o=t("./_export"),s=t("./_invoke"),r=t("./_partial"),a=i.navigator,l=!!a&&/MSIE .\./.test(a.userAgent),h=function(t){return l?function(e,n){return t(s(r,[].slice.call(arguments,2),"function"==typeof e?e:Function(e)),n)}:t};o(o.G+o.B+o.F*l,{setTimeout:h(i.setTimeout),setInterval:h(i.setInterval)})},{"./_export":32,"./_global":38,"./_invoke":44,"./_partial":83}],295:[function(t,e,n){t("./modules/es6.symbol"),t("./modules/es6.object.create"),t("./modules/es6.object.define-property"),t("./modules/es6.object.define-properties"),t("./modules/es6.object.get-own-property-descriptor"),t("./modules/es6.object.get-prototype-of"),t("./modules/es6.object.keys"),t("./modules/es6.object.get-own-property-names"),t("./modules/es6.object.freeze"),t("./modules/es6.object.seal"),t("./modules/es6.object.prevent-extensions"),t("./modules/es6.object.is-frozen"),t("./modules/es6.object.is-sealed"),t("./modules/es6.object.is-extensible"),t("./modules/es6.object.assign"),t("./modules/es6.object.is"),t("./modules/es6.object.set-prototype-of"),t("./modules/es6.object.to-string"),t("./modules/es6.function.bind"),t("./modules/es6.function.name"),t("./modules/es6.function.has-instance"),t("./modules/es6.parse-int"),t("./modules/es6.parse-float"),t("./modules/es6.number.constructor"),t("./modules/es6.number.to-fixed"),t("./modules/es6.number.to-precision"),t("./modules/es6.number.epsilon"),t("./modules/es6.number.is-finite"),t("./modules/es6.number.is-integer"),t("./modules/es6.number.is-nan"),t("./modules/es6.number.is-safe-integer"),t("./modules/es6.number.max-safe-integer"),t("./modules/es6.number.min-safe-integer"),t("./modules/es6.number.parse-float"),t("./modules/es6.number.parse-int"),t("./modules/es6.math.acosh"),t("./modules/es6.math.asinh"),t("./modules/es6.math.atanh"),t("./modules/es6.math.cbrt"),t("./modules/es6.math.clz32"),t("./modules/es6.math.cosh"),t("./modules/es6.math.expm1"),t("./modules/es6.math.fround"),t("./modules/es6.math.hypot"),t("./modules/es6.math.imul"),t("./modules/es6.math.log10"),t("./modules/es6.math.log1p"),t("./modules/es6.math.log2"),t("./modules/es6.math.sign"),t("./modules/es6.math.sinh"),t("./modules/es6.math.tanh"),t("./modules/es6.math.trunc"),t("./modules/es6.string.from-code-point"),t("./modules/es6.string.raw"),t("./modules/es6.string.trim"),t("./modules/es6.string.iterator"),t("./modules/es6.string.code-point-at"),t("./modules/es6.string.ends-with"),t("./modules/es6.string.includes"),t("./modules/es6.string.repeat"),t("./modules/es6.string.starts-with"),t("./modules/es6.string.anchor"),t("./modules/es6.string.big"),t("./modules/es6.string.blink"),t("./modules/es6.string.bold"),t("./modules/es6.string.fixed"),t("./modules/es6.string.fontcolor"),t("./modules/es6.string.fontsize"),t("./modules/es6.string.italics"),t("./modules/es6.string.link"),t("./modules/es6.string.small"),t("./modules/es6.string.strike"),t("./modules/es6.string.sub"),t("./modules/es6.string.sup"),t("./modules/es6.date.now"),t("./modules/es6.date.to-json"),t("./modules/es6.date.to-iso-string"),t("./modules/es6.date.to-string"),t("./modules/es6.date.to-primitive"),t("./modules/es6.array.is-array"),t("./modules/es6.array.from"),t("./modules/es6.array.of"),t("./modules/es6.array.join"),t("./modules/es6.array.slice"),t("./modules/es6.array.sort"),t("./modules/es6.array.for-each"),t("./modules/es6.array.map"),t("./modules/es6.array.filter"),t("./modules/es6.array.some"),t("./modules/es6.array.every"),t("./modules/es6.array.reduce"),t("./modules/es6.array.reduce-right"),t("./modules/es6.array.index-of"),t("./modules/es6.array.last-index-of"),t("./modules/es6.array.copy-within"),t("./modules/es6.array.fill"),t("./modules/es6.array.find"),t("./modules/es6.array.find-index"),t("./modules/es6.array.species"),t("./modules/es6.array.iterator"),t("./modules/es6.regexp.constructor"),t("./modules/es6.regexp.to-string"),t("./modules/es6.regexp.flags"),t("./modules/es6.regexp.match"),t("./modules/es6.regexp.replace"),t("./modules/es6.regexp.search"),t("./modules/es6.regexp.split"),t("./modules/es6.promise"),t("./modules/es6.map"),t("./modules/es6.set"),t("./modules/es6.weak-map"),t("./modules/es6.weak-set"),t("./modules/es6.typed.array-buffer"),t("./modules/es6.typed.data-view"),t("./modules/es6.typed.int8-array"),t("./modules/es6.typed.uint8-array"),t("./modules/es6.typed.uint8-clamped-array"),t("./modules/es6.typed.int16-array"),t("./modules/es6.typed.uint16-array"),t("./modules/es6.typed.int32-array"),t("./modules/es6.typed.uint32-array"),t("./modules/es6.typed.float32-array"),t("./modules/es6.typed.float64-array"),t("./modules/es6.reflect.apply"),t("./modules/es6.reflect.construct"),t("./modules/es6.reflect.define-property"),t("./modules/es6.reflect.delete-property"),t("./modules/es6.reflect.enumerate"),t("./modules/es6.reflect.get"),t("./modules/es6.reflect.get-own-property-descriptor"),t("./modules/es6.reflect.get-prototype-of"),t("./modules/es6.reflect.has"),t("./modules/es6.reflect.is-extensible"),t("./modules/es6.reflect.own-keys"),t("./modules/es6.reflect.prevent-extensions"),t("./modules/es6.reflect.set"),t("./modules/es6.reflect.set-prototype-of"),t("./modules/es7.array.includes"),t("./modules/es7.string.at"),t("./modules/es7.string.pad-start"),t("./modules/es7.string.pad-end"),t("./modules/es7.string.trim-left"),t("./modules/es7.string.trim-right"),t("./modules/es7.string.match-all"),t("./modules/es7.symbol.async-iterator"),t("./modules/es7.symbol.observable"),t("./modules/es7.object.get-own-property-descriptors"),t("./modules/es7.object.values"),t("./modules/es7.object.entries"),t("./modules/es7.object.define-getter"),t("./modules/es7.object.define-setter"),t("./modules/es7.object.lookup-getter"),t("./modules/es7.object.lookup-setter"),t("./modules/es7.map.to-json"),t("./modules/es7.set.to-json"),t("./modules/es7.system.global"),t("./modules/es7.error.is-error"),t("./modules/es7.math.iaddh"),t("./modules/es7.math.isubh"),t("./modules/es7.math.imulh"),t("./modules/es7.math.umulh"),t("./modules/es7.reflect.define-metadata"),t("./modules/es7.reflect.delete-metadata"),t("./modules/es7.reflect.get-metadata"),t("./modules/es7.reflect.get-metadata-keys"),t("./modules/es7.reflect.get-own-metadata"),t("./modules/es7.reflect.get-own-metadata-keys"),t("./modules/es7.reflect.has-metadata"),t("./modules/es7.reflect.has-own-metadata"),t("./modules/es7.reflect.metadata"),t("./modules/es7.asap"),t("./modules/es7.observable"),t("./modules/web.timers"),t("./modules/web.immediate"),t("./modules/web.dom.iterable"),e.exports=t("./modules/_core")},{"./modules/_core":23,"./modules/es6.array.copy-within":120,"./modules/es6.array.every":121,"./modules/es6.array.fill":122,"./modules/es6.array.filter":123,"./modules/es6.array.find":125,"./modules/es6.array.find-index":124,"./modules/es6.array.for-each":126,"./modules/es6.array.from":127,"./modules/es6.array.index-of":128,"./modules/es6.array.is-array":129,"./modules/es6.array.iterator":130,"./modules/es6.array.join":131,"./modules/es6.array.last-index-of":132,"./modules/es6.array.map":133,"./modules/es6.array.of":134,"./modules/es6.array.reduce":136,"./modules/es6.array.reduce-right":135,"./modules/es6.array.slice":137,"./modules/es6.array.some":138,"./modules/es6.array.sort":139,"./modules/es6.array.species":140,"./modules/es6.date.now":141,"./modules/es6.date.to-iso-string":142,"./modules/es6.date.to-json":143,"./modules/es6.date.to-primitive":144,"./modules/es6.date.to-string":145,"./modules/es6.function.bind":146,"./modules/es6.function.has-instance":147,"./modules/es6.function.name":148,"./modules/es6.map":149,"./modules/es6.math.acosh":150,"./modules/es6.math.asinh":151,"./modules/es6.math.atanh":152,"./modules/es6.math.cbrt":153,"./modules/es6.math.clz32":154,"./modules/es6.math.cosh":155,"./modules/es6.math.expm1":156,"./modules/es6.math.fround":157,"./modules/es6.math.hypot":158,"./modules/es6.math.imul":159,"./modules/es6.math.log10":160,"./modules/es6.math.log1p":161,"./modules/es6.math.log2":162,"./modules/es6.math.sign":163,"./modules/es6.math.sinh":164,"./modules/es6.math.tanh":165,"./modules/es6.math.trunc":166,"./modules/es6.number.constructor":167,"./modules/es6.number.epsilon":168,"./modules/es6.number.is-finite":169,"./modules/es6.number.is-integer":170,"./modules/es6.number.is-nan":171,"./modules/es6.number.is-safe-integer":172,"./modules/es6.number.max-safe-integer":173,"./modules/es6.number.min-safe-integer":174,"./modules/es6.number.parse-float":175,"./modules/es6.number.parse-int":176,"./modules/es6.number.to-fixed":177,"./modules/es6.number.to-precision":178,"./modules/es6.object.assign":179,"./modules/es6.object.create":180,"./modules/es6.object.define-properties":181,"./modules/es6.object.define-property":182,"./modules/es6.object.freeze":183,"./modules/es6.object.get-own-property-descriptor":184,"./modules/es6.object.get-own-property-names":185,"./modules/es6.object.get-prototype-of":186,"./modules/es6.object.is":190,"./modules/es6.object.is-extensible":187,"./modules/es6.object.is-frozen":188,"./modules/es6.object.is-sealed":189,"./modules/es6.object.keys":191,"./modules/es6.object.prevent-extensions":192,"./modules/es6.object.seal":193,"./modules/es6.object.set-prototype-of":194,"./modules/es6.object.to-string":195,"./modules/es6.parse-float":196,"./modules/es6.parse-int":197,"./modules/es6.promise":198,"./modules/es6.reflect.apply":199,"./modules/es6.reflect.construct":200,"./modules/es6.reflect.define-property":201,"./modules/es6.reflect.delete-property":202,"./modules/es6.reflect.enumerate":203,"./modules/es6.reflect.get":206,"./modules/es6.reflect.get-own-property-descriptor":204,"./modules/es6.reflect.get-prototype-of":205,"./modules/es6.reflect.has":207,"./modules/es6.reflect.is-extensible":208,"./modules/es6.reflect.own-keys":209,"./modules/es6.reflect.prevent-extensions":210,"./modules/es6.reflect.set":212,"./modules/es6.reflect.set-prototype-of":211,"./modules/es6.regexp.constructor":213,"./modules/es6.regexp.flags":214,"./modules/es6.regexp.match":215,"./modules/es6.regexp.replace":216,"./modules/es6.regexp.search":217,"./modules/es6.regexp.split":218,"./modules/es6.regexp.to-string":219,"./modules/es6.set":220,"./modules/es6.string.anchor":221,"./modules/es6.string.big":222,"./modules/es6.string.blink":223,"./modules/es6.string.bold":224,"./modules/es6.string.code-point-at":225,"./modules/es6.string.ends-with":226,"./modules/es6.string.fixed":227,"./modules/es6.string.fontcolor":228,"./modules/es6.string.fontsize":229,"./modules/es6.string.from-code-point":230,"./modules/es6.string.includes":231,"./modules/es6.string.italics":232,"./modules/es6.string.iterator":233,"./modules/es6.string.link":234,"./modules/es6.string.raw":235,"./modules/es6.string.repeat":236,"./modules/es6.string.small":237,"./modules/es6.string.starts-with":238,"./modules/es6.string.strike":239,"./modules/es6.string.sub":240,"./modules/es6.string.sup":241,"./modules/es6.string.trim":242,"./modules/es6.symbol":243,"./modules/es6.typed.array-buffer":244,"./modules/es6.typed.data-view":245,"./modules/es6.typed.float32-array":246,"./modules/es6.typed.float64-array":247,"./modules/es6.typed.int16-array":248,"./modules/es6.typed.int32-array":249,"./modules/es6.typed.int8-array":250,"./modules/es6.typed.uint16-array":251,"./modules/es6.typed.uint32-array":252,"./modules/es6.typed.uint8-array":253,"./modules/es6.typed.uint8-clamped-array":254,"./modules/es6.weak-map":255,"./modules/es6.weak-set":256,"./modules/es7.array.includes":257,"./modules/es7.asap":258,"./modules/es7.error.is-error":259,"./modules/es7.map.to-json":260,"./modules/es7.math.iaddh":261,"./modules/es7.math.imulh":262,"./modules/es7.math.isubh":263,"./modules/es7.math.umulh":264,"./modules/es7.object.define-getter":265,"./modules/es7.object.define-setter":266,"./modules/es7.object.entries":267,"./modules/es7.object.get-own-property-descriptors":268,"./modules/es7.object.lookup-getter":269,"./modules/es7.object.lookup-setter":270,"./modules/es7.object.values":271,"./modules/es7.observable":272,"./modules/es7.reflect.define-metadata":273,"./modules/es7.reflect.delete-metadata":274,"./modules/es7.reflect.get-metadata":276,"./modules/es7.reflect.get-metadata-keys":275,"./modules/es7.reflect.get-own-metadata":278,"./modules/es7.reflect.get-own-metadata-keys":277,"./modules/es7.reflect.has-metadata":279,"./modules/es7.reflect.has-own-metadata":280,"./modules/es7.reflect.metadata":281,"./modules/es7.set.to-json":282,"./modules/es7.string.at":283,"./modules/es7.string.match-all":284,"./modules/es7.string.pad-end":285,"./modules/es7.string.pad-start":286,"./modules/es7.string.trim-left":287,"./modules/es7.string.trim-right":288,"./modules/es7.symbol.async-iterator":289,"./modules/es7.symbol.observable":290,"./modules/es7.system.global":291,"./modules/web.dom.iterable":292,"./modules/web.immediate":293,"./modules/web.timers":294}],296:[function(t,e,n){!function(n){"function"==typeof define&&define.amd?define(["leaflet"],function(t){return n(t)}):"object"==typeof e&&"object"==typeof e.exports&&(e.exports=n(t("leaflet"))),"undefined"!=typeof window&&window.L&&n(window.L)}(function(t){var e={VERSION:"1.0.4",Layers:{},Services:{},Controls:{},Tasks:{},Util:{},Support:{CORS:!!(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),pointerEvents:""===document.documentElement.style.pointerEvents}};return"undefined"!=typeof window&&window.L&&(window.L.esri=e),function(e){function n(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function i(t,e){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function o(t){return i(t[0],t[t.length-1])||t.push(t[0]),t}function s(t){var e,n=0,i=0,o=t.length,s=t[i];for(i;i<o-1;i++)e=t[i+1],n+=(e[0]-s[0])*(e[1]+s[1]),s=e;return n>=0}function r(t,e,n,i){var o=(i[0]-n[0])*(t[1]-n[1])-(i[1]-n[1])*(t[0]-n[0]),s=(e[0]-t[0])*(t[1]-n[1])-(e[1]-t[1])*(t[0]-n[0]),r=(i[1]-n[1])*(e[0]-t[0])-(i[0]-n[0])*(e[1]-t[1]);if(0!==r){var a=o/r,l=s/r;if(0<=a&&a<=1&&0<=l&&l<=1)return!0}return!1}function a(t,e){for(var n=0;n<t.length-1;n++)for(var i=0;i<e.length-1;i++)if(r(t[n],t[n+1],e[i],e[i+1]))return!0;return!1}function l(t,e){for(var n=!1,i=-1,o=t.length,s=o-1;++i<o;s=i)(t[i][1]<=e[1]&&e[1]<t[s][1]||t[s][1]<=e[1]&&e[1]<t[i][1])&&e[0]<(t[s][0]-t[i][0])*(e[1]-t[i][1])/(t[s][1]-t[i][1])+t[i][0]&&(n=!n);return n}function h(t,e){var n=a(t,e),i=l(t,e[0]);return!(n||!i)}function c(t){for(var e,n,i,r=[],l=[],c=0;c<t.length;c++){var u=o(t[c].slice(0));if(!(u.length<4))if(s(u)){var d=[u];r.push(d)}else l.push(u)}for(var p=[];l.length;){i=l.pop();var m=!1;for(e=r.length-1;e>=0;e--)if(n=r[e][0],h(n,i)){r[e].push(i),m=!0;break}m||p.push(i)}for(;p.length;){i=p.pop();var f=!1;for(e=r.length-1;e>=0;e--)if(n=r[e][0],a(n,i)){r[e].push(i),f=!0;break}f||r.push([i.reverse()])}return 1===r.length?{type:"Polygon",coordinates:r[0]}:{type:"MultiPolygon",coordinates:r}}function u(t){var e=[],n=t.slice(0),i=o(n.shift().slice(0));if(i.length>=4){s(i)||i.reverse(),e.push(i);for(var r=0;r<n.length;r++){var a=o(n[r].slice(0));a.length>=4&&(s(a)&&a.reverse(),e.push(a))}}return e}function d(t){for(var e=[],n=0;n<t.length;n++)for(var i=u(t[n]),o=i.length-1;o>=0;o--){var s=i[o].slice(0);e.push(s)}return e}var p=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)};e.Util.extentToBounds=function(e){var n=new t.LatLng(e.ymin,e.xmin),i=new t.LatLng(e.ymax,e.xmax);return new t.LatLngBounds(n,i)},e.Util.boundsToExtent=function(e){return e=t.latLngBounds(e),{xmin:e.getSouthWest().lng,ymin:e.getSouthWest().lat,xmax:e.getNorthEast().lng,ymax:e.getNorthEast().lat,spatialReference:{wkid:4326}}},e.Util.arcgisToGeojson=function(t,i){var o={};return"number"==typeof t.x&&"number"==typeof t.y&&(o.type="Point",o.coordinates=[t.x,t.y]),t.points&&(o.type="MultiPoint",o.coordinates=t.points.slice(0)),t.paths&&(1===t.paths.length?(o.type="LineString",o.coordinates=t.paths[0].slice(0)):(o.type="MultiLineString",o.coordinates=t.paths.slice(0))),t.rings&&(o=c(t.rings.slice(0))),(t.geometry||t.attributes)&&(o.type="Feature",o.geometry=t.geometry?e.Util.arcgisToGeojson(t.geometry):null,o.properties=t.attributes?n(t.attributes):null,t.attributes&&(o.id=t.attributes[i]||t.attributes.OBJECTID||t.attributes.FID)),o},e.Util.geojsonToArcGIS=function(t,i){i=i||"OBJECTID";var o,s={wkid:4326},r={};switch(t.type){case"Point":r.x=t.coordinates[0],r.y=t.coordinates[1],r.spatialReference=s;break;case"MultiPoint":r.points=t.coordinates.slice(0),r.spatialReference=s;break;case"LineString":r.paths=[t.coordinates.slice(0)],r.spatialReference=s;break;case"MultiLineString":r.paths=t.coordinates.slice(0),r.spatialReference=s;break;case"Polygon":r.rings=u(t.coordinates.slice(0)),r.spatialReference=s;break;case"MultiPolygon":r.rings=d(t.coordinates.slice(0)),r.spatialReference=s;break;case"Feature":t.geometry&&(r.geometry=e.Util.geojsonToArcGIS(t.geometry,i)),r.attributes=t.properties?n(t.properties):{},t.id&&(r.attributes[i]=t.id);break;case"FeatureCollection":for(r=[],o=0;o<t.features.length;o++)r.push(e.Util.geojsonToArcGIS(t.features[o],i));break;case"GeometryCollection":for(r=[],o=0;o<t.geometries.length;o++)r.push(e.Util.geojsonToArcGIS(t.geometries[o],i))}return r},e.Util.responseToFeatureCollection=function(t,n){var i;if(n)i=n;else if(t.objectIdFieldName)i=t.objectIdFieldName;else if(t.fields){for(var o=0;o<=t.fields.length-1;o++)if("esriFieldTypeOID"===t.fields[o].type){i=t.fields[o].name;break}}else i="OBJECTID";var s={type:"FeatureCollection",features:[]},r=t.features||t.results;if(r.length)for(var a=r.length-1;a>=0;a--)s.features.push(e.Util.arcgisToGeojson(r[a],i));return s},e.Util.cleanUrl=function(t){return t=t.replace(/^\s+|\s+$|\A\s+|\s+\z/g,""),"/"!==t[t.length-1]&&(t+="/"),t},e.Util.isArcgisOnline=function(t){return/\.arcgis\.com.*?FeatureServer/g.test(t)},e.Util.geojsonTypeToArcGIS=function(t){var e;switch(t){case"Point":e="esriGeometryPoint";break;case"MultiPoint":e="esriGeometryMultipoint";break;case"LineString":e="esriGeometryPolyline";break;case"MultiLineString":e="esriGeometryPolyline";break;case"Polygon":e="esriGeometryPolygon";break;case"MultiPolygon":e="esriGeometryPolygon"}return e},e.Util.requestAnimationFrame=t.Util.bind(p,window),e.Util.warn=function(t){console&&console.warn&&void 0}}(e),function(e){function n(t){var e="";t.f=t.f||"json";for(var n in t)if(t.hasOwnProperty(n)){var i,o=t[n],s=Object.prototype.toString.call(o);e.length&&(e+="&"),i="[object Array]"===s?"[object Object]"===Object.prototype.toString.call(o[0])?JSON.stringify(o):o.join(","):"[object Object]"===s?JSON.stringify(o):"[object Date]"===s?o.valueOf():o,e+=encodeURIComponent(n)+"="+encodeURIComponent(i)}return e}function i(e,n){var i=new XMLHttpRequest;return i.onerror=function(o){i.onreadystatechange=t.Util.falseFn,e.call(n,{error:{code:500,message:"XMLHttpRequest error"}},null)},i.onreadystatechange=function(){var e,o;if(4===i.readyState){try{e=JSON.parse(i.responseText)}catch(s){e=null,o={code:500,message:"Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error."}}!o&&e.error&&(o=e.error,e=null),i.onerror=t.Util.falseFn,s.call(n,o,e)}},i}var o=0;window._EsriLeafletCallbacks={},e.Request={request:function(o,s,r,a){var l=n(s),h=i(r,a),c=(o+"?"+l).length;if(c<=2e3&&t.esri.Support.CORS)h.open("GET",o+"?"+l),h.send(null);else{if(!(c>2e3&&t.esri.Support.CORS))return c<=2e3&&!t.esri.Support.CORS?t.esri.Request.get.JSONP(o,s,r,a):void e.Util.warn("a request to "+o+" was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy http://esri.github.io/esri-leaflet/api-reference/request.html");h.open("POST",o),h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),h.send(l)}return h},post:{XMLHTTP:function(t,e,o,s){var r=i(o,s);return r.open("POST",t),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(n(e)),r}},get:{CORS:function(t,e,o,s){var r=i(o,s);return r.open("GET",t+"?"+n(e),!0),r.send(null),r},JSONP:function(e,i,s,r){var a="c"+o;i.callback="window._EsriLeafletCallbacks."+a;var l=t.DomUtil.create("script",null,document.body);return l.type="text/javascript",l.src=e+"?"+n(i),l.id=a,window._EsriLeafletCallbacks[a]=function(t){if(window._EsriLeafletCallbacks[a]!==!0){var e,n=Object.prototype.toString.call(t);"[object Object]"!==n&&"[object Array]"!==n&&(e={error:{code:500,message:"Expected array or object as JSONP response"}},t=null),!e&&t.error&&(e=t,t=null),s.call(r,e,t),window._EsriLeafletCallbacks[a]=!0}},o++,{id:a,url:l.src,abort:function(){window._EsriLeafletCallbacks._callback[a]({code:0,message:"Request aborted."})}}}}},e.get=e.Support.CORS?e.Request.get.CORS:e.Request.get.JSONP,e.post=e.Request.post.XMLHTTP,e.request=e.Request.request}(e),e.Services.Service=t.Class.extend({includes:t.Mixin.Events,options:{proxy:!1,useCors:e.Support.CORS},initialize:function(n){n=n||{},this._requestQueue=[],this._authenticating=!1,t.Util.setOptions(this,n),this.options.url=e.Util.cleanUrl(this.options.url)},get:function(t,e,n,i){return this._request("get",t,e,n,i)},post:function(t,e,n,i){return this._request("post",t,e,n,i)},request:function(t,e,n,i){return this._request("request",t,e,n,i)},metadata:function(t,e){return this._request("get","",{},t,e)},authenticate:function(t){return this._authenticating=!1,this.options.token=t,this._runQueue(),this},_request:function(t,n,i,o,s){this.fire("requeststart",{url:this.options.url+n,params:i,method:t});var r=this._createServiceCallback(t,n,i,o,s);if(this.options.token&&(i.token=this.options.token),this._authenticating)return void this._requestQueue.push([t,n,i,o,s]);var a=this.options.proxy?this.options.proxy+"?"+this.options.url+n:this.options.url+n;return"get"!==t&&"request"!==t||this.options.useCors?e[t](a,i,r):e.Request.get.JSONP(a,i,r)},_createServiceCallback:function(e,n,i,o,s){return t.Util.bind(function(r,a){!r||499!==r.code&&498!==r.code||(this._authenticating=!0,this._requestQueue.push([e,n,i,o,s]),this.fire("authenticationrequired",{authenticate:t.Util.bind(this.authenticate,this)}),r.authenticate=t.Util.bind(this.authenticate,this)),o.call(s,r,a),r?this.fire("requesterror",{url:this.options.url+n,params:i,message:r.message,code:r.code,method:e}):this.fire("requestsuccess",{url:this.options.url+n,params:i,response:a,method:e}),this.fire("requestend",{url:this.options.url+n,params:i,method:e
})},this)},_runQueue:function(){for(var t=this._requestQueue.length-1;t>=0;t--){var e=this._requestQueue[t],n=e.shift();this[n].apply(this,e)}this._requestQueue=[]}}),e.Services.service=function(t){return new e.Services.Service(t)},e.Services.FeatureLayerService=e.Services.Service.extend({options:{idAttribute:"OBJECTID"},query:function(){return new e.Tasks.Query(this)},addFeature:function(t,n,i){return delete t.id,t=e.Util.geojsonToArcGIS(t),this.post("addFeatures",{features:[t]},function(t,e){var o=e&&e.addResults?e.addResults[0]:void 0;n&&n.call(i,t||e.addResults[0].error,o)},i)},updateFeature:function(t,n,i){return t=e.Util.geojsonToArcGIS(t,this.options.idAttribute),this.post("updateFeatures",{features:[t]},function(t,e){var o=e&&e.updateResults?e.updateResults[0]:void 0;n&&n.call(i,t||e.updateResults[0].error,o)},i)},deleteFeature:function(t,e,n){return this.post("deleteFeatures",{objectIds:t},function(t,i){var o=i&&i.deleteResults?i.deleteResults[0]:void 0;e&&e.call(n,t||i.deleteResults[0].error,o)},n)},deleteFeatures:function(t,e,n){return this.post("deleteFeatures",{objectIds:t},function(t,i){var o=i&&i.deleteResults?i.deleteResults:void 0;e&&e.call(n,t||i.deleteResults[0].error,o)},n)}}),e.Services.featureLayerService=function(t){return new e.Services.FeatureLayerService(t)},e.Services.MapService=e.Services.Service.extend({identify:function(){return new e.Tasks.identifyFeatures(this)},find:function(){return new e.Tasks.Find(this)},query:function(){return new e.Tasks.Query(this)}}),e.Services.mapService=function(t){return new e.Services.MapService(t)},e.Services.ImageService=e.Services.Service.extend({query:function(){return new e.Tasks.Query(this)},identify:function(){return new e.Tasks.IdentifyImage(this)}}),e.Services.imageService=function(t){return new e.Services.ImageService(t)},e.Tasks.Task=t.Class.extend({options:{proxy:!1,useCors:e.Support.CORS},generateSetter:function(e,n){return t.Util.bind(function(t){return this.params[e]=t,this},n)},initialize:function(e){if(e.request&&e.options?(this._service=e,t.Util.setOptions(this,e.options)):(t.Util.setOptions(this,e),this.options.url=t.esri.Util.cleanUrl(e.url)),this.params=t.Util.extend({},this.params||{}),this.setters)for(var n in this.setters){var i=this.setters[n];this[n]=this.generateSetter(i,this)}},token:function(t){return this._service?this._service.authenticate(t):this.params.token=t,this},request:function(t,e){return this._service?this._service.request(this.path,this.params,t,e):this._request("request",this.path,this.params,t,e)},_request:function(t,n,i,o,s){var r=this.options.proxy?this.options.proxy+"?"+this.options.url+n:this.options.url+n;return"get"!==t&&"request"!==t||this.options.useCors?e[t](r,i,o,s):e.Request.get.JSONP(r,i,o,s)}}),e.Tasks.Query=e.Tasks.Task.extend({setters:{offset:"offset",limit:"limit",fields:"outFields",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",token:"token"},path:"query",params:{returnGeometry:!0,where:"1=1",outSr:4326,outFields:"*"},within:function(t){return this._setGeometry(t),this.params.spatialRel="esriSpatialRelContains",this},intersects:function(t){return this._setGeometry(t),this.params.spatialRel="esriSpatialRelIntersects",this},contains:function(t){return this._setGeometry(t),this.params.spatialRel="esriSpatialRelWithin",this},overlaps:function(t){return this._setGeometry(t),this.params.spatialRel="esriSpatialRelOverlaps",this},nearby:function(e,n){return e=t.latLng(e),this.params.geometry=[e.lng,e.lat],this.params.geometryType="esriGeometryPoint",this.params.spatialRel="esriSpatialRelIntersects",this.params.units="esriSRUnit_Meter",this.params.distance=n,this.params.inSr=4326,this},where:function(t){return this.params.where=t,this},between:function(t,e){return this.params.time=[t.valueOf(),e.valueOf()],this},simplify:function(t,e){var n=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=n/t.getSize().y*e,this},orderBy:function(t,e){return e=e||"ASC",this.params.orderByFields=this.params.orderByFields?this.params.orderByFields+",":"",this.params.orderByFields+=[t,e].join(" "),this},run:function(t,n){return this._cleanParams(),e.Util.isArcgisOnline(this.options.url)?(this.params.f="geojson",this.request(function(e,i){this._trapSQLerrors(e),t.call(n,e,i,i)},this)):this.request(function(i,o){this._trapSQLerrors(i),t.call(n,i,o&&e.Util.responseToFeatureCollection(o),o)},this)},count:function(t,e){return this._cleanParams(),this.params.returnCountOnly=!0,this.request(function(e,n){t.call(this,e,n&&n.count,n)},e)},ids:function(t,e){return this._cleanParams(),this.params.returnIdsOnly=!0,this.request(function(e,n){t.call(this,e,n&&n.objectIds,n)},e)},bounds:function(t,n){return this._cleanParams(),this.params.returnExtentOnly=!0,this.request(function(i,o){t.call(n,i,o&&o.extent&&e.Util.extentToBounds(o.extent),o)},n)},pixelSize:function(e){return e=t.point(e),this.params.pixelSize=[e.x,e.y],this},layer:function(t){return this.path=t+"/query",this},_trapSQLerrors:function(t){t&&"400"===t.code&&e.Util.warn("one common syntax error in query requests is encasing string values in double quotes instead of single quotes")},_cleanParams:function(){delete this.params.returnIdsOnly,delete this.params.returnExtentOnly,delete this.params.returnCountOnly},_setGeometry:function(n){return this.params.inSr=4326,n instanceof t.LatLngBounds?(this.params.geometry=e.Util.boundsToExtent(n),void(this.params.geometryType="esriGeometryEnvelope")):(n.getLatLng&&(n=n.getLatLng()),n instanceof t.LatLng&&(n={type:"Point",coordinates:[n.lng,n.lat]}),n instanceof t.GeoJSON&&(n=n.getLayers()[0].feature.geometry,this.params.geometry=e.Util.geojsonToArcGIS(n),this.params.geometryType=e.Util.geojsonTypeToArcGIS(n.type)),n.toGeoJSON&&(n=n.toGeoJSON()),"Feature"===n.type&&(n=n.geometry),"Point"===n.type||"LineString"===n.type||"Polygon"===n.type?(this.params.geometry=e.Util.geojsonToArcGIS(n),void(this.params.geometryType=e.Util.geojsonTypeToArcGIS(n.type))):void e.Util.warn("invalid geometry passed to spatial query. Should be an L.LatLng, L.LatLngBounds or L.Marker or a GeoJSON Point Line or Polygon object"))}}),e.Tasks.query=function(t){return new e.Tasks.Query(t)},e.Tasks.Find=e.Tasks.Task.extend({setters:{contains:"contains",text:"searchText",fields:"searchFields",spatialReference:"sr",sr:"sr",layers:"layers",returnGeometry:"returnGeometry",maxAllowableOffset:"maxAllowableOffset",precision:"geometryPrecision",dynamicLayers:"dynamicLayers",returnZ:"returnZ",returnM:"returnM",gdbVersion:"gdbVersion",token:"token"},path:"find",params:{sr:4326,contains:!0,returnGeometry:!0,returnZ:!0,returnM:!1},layerDefs:function(t,e){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[t,e].join(":"),this},simplify:function(t,e){var n=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=n/t.getSize().y*e,this},run:function(t,n){return this.request(function(i,o){t.call(n,i,o&&e.Util.responseToFeatureCollection(o),o)},n)}}),e.Tasks.find=function(t){return new e.Tasks.Find(t)},e.Tasks.Identify=e.Tasks.Task.extend({path:"identify",between:function(t,e){return this.params.time=[t.valueOf(),e.valueOf()],this}}),e.Tasks.IdentifyImage=e.Tasks.Identify.extend({setters:{setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",setPixelSize:"pixelSize",returnCatalogItems:"returnCatalogItems",returnGeometry:"returnGeometry"},params:{returnGeometry:!1},at:function(e){return e=t.latLng(e),this.params.geometry=JSON.stringify({x:e.lng,y:e.lat,spatialReference:{wkid:4326}}),this.params.geometryType="esriGeometryPoint",this},getMosaicRule:function(){return this.params.mosaicRule},getRenderingRule:function(){return this.params.renderingRule},getPixelSize:function(){return this.params.pixelSize},run:function(t,e){return this.request(function(n,i){t.call(e,n,i&&this._responseToGeoJSON(i),i)},this)},_responseToGeoJSON:function(t){var n=t.location,i=t.catalogItems,o=t.catalogItemVisibilities,s={pixel:{type:"Feature",geometry:{type:"Point",coordinates:[n.x,n.y]},crs:{type:"EPSG",properties:{code:n.spatialReference.wkid}},properties:{OBJECTID:t.objectId,name:t.name,value:t.value},id:t.objectId}};if(t.properties&&t.properties.Values&&(s.pixel.properties.values=t.properties.Values),i&&i.features&&(s.catalogItems=e.Util.responseToFeatureCollection(i),o&&o.length===s.catalogItems.features.length))for(var r=o.length-1;r>=0;r--)s.catalogItems.features[r].properties.catalogItemVisibility=o[r];return s}}),e.Tasks.identifyImage=function(t){return new e.Tasks.IdentifyImage(t)},e.Tasks.IdentifyFeatures=e.Tasks.Identify.extend({setters:{layers:"layers",precision:"geometryPrecision",tolerance:"tolerance",returnGeometry:"returnGeometry"},params:{sr:4326,layers:"all",tolerance:3,returnGeometry:!0},on:function(t){var n=e.Util.boundsToExtent(t.getBounds()),i=t.getSize();return this.params.imageDisplay=[i.x,i.y,96],this.params.mapExtent=[n.xmin,n.ymin,n.xmax,n.ymax],this},at:function(e){return e=t.latLng(e),this.params.geometry=[e.lng,e.lat],this.params.geometryType="esriGeometryPoint",this},layerDef:function(t,e){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[t,e].join(":"),this},simplify:function(t,e){var n=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=n/t.getSize().y*(1-e),this},run:function(t,n){return this.request(function(i,o){if(i)return void t.call(n,i,void 0,o);var s=e.Util.responseToFeatureCollection(o);o.results=o.results.reverse();for(var r=0;r<s.features.length;r++){var a=s.features[r];a.layerId=o.results[r].layerId}t.call(n,void 0,s,o)})}}),e.Tasks.identifyFeatures=function(t){return new e.Tasks.IdentifyFeatures(t)},function(e){var n="https:"!==window.location.protocol?"http:":"https:";e.Layers.BasemapLayer=t.TileLayer.extend({statics:{TILES:{Streets:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",attributionUrl:"https://static.arcgis.com/attribution/World_Street_Map",options:{hideLogo:!1,logoPosition:"bottomright",minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"Esri"}},Topographic:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",attributionUrl:"https://static.arcgis.com/attribution/World_Topo_Map",options:{hideLogo:!1,logoPosition:"bottomright",minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"Esri"}},Oceans:{urlTemplate:n+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",attributionUrl:"https://static.arcgis.com/attribution/Ocean_Basemap",options:{hideLogo:!1,logoPosition:"bottomright",minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"Esri"}},OceansLabels:{urlTemplate:n+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}",options:{hideLogo:!0,logoPosition:"bottomright",minZoom:1,maxZoom:16,subdomains:["server","services"]}},NationalGeographic:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{hideLogo:!1,logoPosition:"bottomright",minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"Esri"}},DarkGray:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{hideLogo:!1,logoPosition:"bottomright",minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"Esri, DeLorme, HERE"}},DarkGrayLabels:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{hideLogo:!0,logoPosition:"bottomright",minZoom:1,maxZoom:16,subdomains:["server","services"]}},Gray:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{hideLogo:!1,logoPosition:"bottomright",minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"Esri, NAVTEQ, DeLorme"}},GrayLabels:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{hideLogo:!0,logoPosition:"bottomright",minZoom:1,maxZoom:16,subdomains:["server","services"]}},Imagery:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{hideLogo:!1,logoPosition:"bottomright",minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"Esri, DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community"}},ImageryLabels:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",options:{hideLogo:!0,logoPosition:"bottomright",minZoom:1,maxZoom:19,subdomains:["server","services"]}},ImageryTransportation:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",options:{hideLogo:!0,logoPosition:"bottomright",minZoom:1,maxZoom:19,subdomains:["server","services"]}},ShadedRelief:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",options:{hideLogo:!1,logoPosition:"bottomright",minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"Esri, NAVTEQ, DeLorme"}},ShadedReliefLabels:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}",options:{hideLogo:!0,logoPosition:"bottomright",minZoom:1,maxZoom:12,subdomains:["server","services"]}},Terrain:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",options:{hideLogo:!1,logoPosition:"bottomright",minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"Esri, USGS, NOAA"}},TerrainLabels:{urlTemplate:n+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}",options:{hideLogo:!0,logoPosition:"bottomright",minZoom:1,maxZoom:13,subdomains:["server","services"]}}}},initialize:function(n,i){var o;if("object"==typeof n&&n.urlTemplate&&n.options)o=n;else{if("string"!=typeof n||!e.BasemapLayer.TILES[n])throw new Error('L.esri.BasemapLayer: Invalid parameter. Use one of "Streets", "Topographic", "Oceans", "OceansLabels", "NationalGeographic", "Gray", "GrayLabels", "DarkGray", "DarkGrayLabels", "Imagery", "ImageryLabels", "ImageryTransportation", "ShadedRelief", "ShadedReliefLabels", "Terrain" or "TerrainLabels"');o=e.BasemapLayer.TILES[n]}var s=t.Util.extend(o.options,i);t.TileLayer.prototype.initialize.call(this,o.urlTemplate,t.Util.setOptions(this,s)),o.attributionUrl&&this._getAttributionData(o.attributionUrl),this._logo=new e.Controls.Logo({position:this.options.logoPosition})},onAdd:function(e){this.options.hideLogo||e._hasEsriLogo||(this._logo.addTo(e),e._hasEsriLogo=!0),t.TileLayer.prototype.onAdd.call(this,e),e.on("moveend",this._updateMapAttribution,this)},onRemove:function(e){e._hasEsriLogo&&this._logo&&this._logo._container&&(e.removeControl(this._logo),e._hasEsriLogo=!1),t.TileLayer.prototype.onRemove.call(this,e),e.off("moveend",this._updateMapAttribution,this)},getAttribution:function(){var t='<span class="esri-attributions" style="line-height:14px; vertical-align: -3px; text-overflow:ellipsis; white-space:nowrap; overflow:hidden; display:inline-block;">'+this.options.attribution+"</span>";return t},_getAttributionData:function(e){t.esri.Request.get.JSONP(e,{},t.Util.bind(function(e,n){this._attributions=[];for(var i=0;i<n.contributors.length;i++)for(var o=n.contributors[i],s=0;s<o.coverageAreas.length;s++){var r=o.coverageAreas[s],a=new t.LatLng(r.bbox[0],r.bbox[1]),l=new t.LatLng(r.bbox[2],r.bbox[3]);this._attributions.push({attribution:o.attribution,score:r.score,bounds:new t.LatLngBounds(a,l),minZoom:r.zoomMin,maxZoom:r.zoomMax})}this._attributions.sort(function(t,e){return e.score-t.score}),this._updateMapAttribution()},this))},_updateMapAttribution:function(){if(this._map&&this._map.attributionControl&&this._attributions){for(var t="",e=this._map.getBounds(),n=this._map.getZoom(),i=0;i<this._attributions.length;i++){var o=this._attributions[i],s=o.attribution;!t.match(s)&&e.intersects(o.bounds)&&n>=o.minZoom&&n<=o.maxZoom&&(t+=", "+s)}t=t.substr(2);var r=this._map.attributionControl._container.querySelector(".esri-attributions");r.innerHTML=t,r.style.maxWidth=.65*this._map.getSize().x+"px",this.fire("attributionupdated",{attribution:t})}}}),e.BasemapLayer=e.Layers.BasemapLayer,e.Layers.basemapLayer=function(t,n){return new e.Layers.BasemapLayer(t,n)},e.basemapLayer=function(t,n){return new e.Layers.BasemapLayer(t,n)}}(e),e.Layers.RasterLayer=t.Class.extend({includes:t.Mixin.Events,options:{opacity:1,position:"front",f:"image"},onAdd:function(e){if(this._map=e,this._update=t.Util.limitExecByInterval(this._update,this.options.updateInterval,this),e.options.crs&&e.options.crs.code){var n=e.options.crs.code.split(":")[1];this.options.bboxSR=n,this.options.imageSR=n}e.on("moveend",this._update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?e.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this._update(),this._popup&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this))},bindPopup:function(e,n){return this._shouldRenderPopup=!1,this._lastClick=!1,this._popup=t.popup(n),this._popupFunction=e,this._map&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this},unbindPopup:function(){return this._map&&(this._map.closePopup(this._popup),this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._popup=!1,this},onRemove:function(t){this._currentImage&&this._map.removeLayer(this._currentImage),this._popup&&(this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._map.off("moveend",this._update,this),this._map=null},addTo:function(t){return t.addLayer(this),this},removeFrom:function(t){return t.removeLayer(this),this},bringToFront:function(){return this.options.position="front",this._currentImage&&this._currentImage.bringToFront(),this},bringToBack:function(){return this.options.position="back",this._currentImage&&this._currentImage.bringToBack(),this},getAttribution:function(){return this.options.attribution},getOpacity:function(){return this.options.opacity},setOpacity:function(t){return this.options.opacity=t,this._currentImage.setOpacity(t),this},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(t,e){return this.options.from=t,this.options.to=e,this._update(),this},metadata:function(t,e){return this._service.metadata(t,e),this},authenticate:function(t){return this._service.authenticate(t),this},_renderImage:function(e,n){if(this._map){var i=new t.ImageOverlay(e,n,{opacity:0}).addTo(this._map);i.once("load",function(t){var e=t.target,i=this._currentImage;e._bounds.equals(n)&&e._bounds.equals(this._map.getBounds())?(this._currentImage=e,"front"===this.options.position?this.bringToFront():this.bringToBack(),this._map&&this._currentImage._map?this._currentImage.setOpacity(this.options.opacity):this._currentImage._map.removeLayer(this._currentImage),i&&this._map&&this._map.removeLayer(i),i&&i._map&&i._map.removeLayer(i)):this._map.removeLayer(e),this.fire("load",{bounds:n})},this),this.fire("loading",{bounds:n})}},_update:function(){if(this._map){var t=this._map.getZoom(),e=this._map.getBounds();if(!(this._animatingZoom||this._map._panTransition&&this._map._panTransition._inProgress)){if(t>this.options.maxZoom||t<this.options.minZoom)return void(this._currentImage&&this._currentImage._map.removeLayer(this._currentImage));var n=this._buildExportParams();this._requestExport(n,e)}}},_renderPopup:function(e,n,i,o){if(e=t.latLng(e),this._shouldRenderPopup&&this._lastClick.equals(e)){var s=this._popupFunction(n,i,o);s&&this._popup.setLatLng(e).setContent(s).openOn(this._map)}},_resetPopupState:function(t){this._shouldRenderPopup=!1,this._lastClick=t.latlng},_propagateEvent:function(e){e=t.extend({layer:e.target,target:this},e),this.fire(e.type,e)}}),e.Layers.DynamicMapLayer=e.Layers.RasterLayer.extend({options:{updateInterval:150,layers:!1,layerDefs:!1,timeOptions:!1,format:"png24",transparent:!0,f:"json"},initialize:function(n){n.url=e.Util.cleanUrl(n.url),this._service=new e.Services.MapService(n),this._service.on("authenticationrequired requeststart requestend requesterror requestsuccess",this._propagateEvent,this),(n.proxy||n.token)&&"json"!==n.f&&(n.f="json"),t.Util.setOptions(this,n)},getDynamicLayers:function(){return this.options.dynamicLayers},setDynamicLayers:function(t){return this.options.dynamicLayers=t,this._update(),this},getLayers:function(){return this.options.layers},setLayers:function(t){return this.options.layers=t,this._update(),this},getLayerDefs:function(){return this.options.layerDefs},setLayerDefs:function(t){return this.options.layerDefs=t,this._update(),this},getTimeOptions:function(){return this.options.timeOptions},setTimeOptions:function(t){return this.options.timeOptions=t,this._update(),this},query:function(){return this._service.query()},identify:function(){return this._service.identify()},find:function(){return this._service.find()},_getPopupData:function(e){var n=t.Util.bind(function(n,i,o){n||setTimeout(t.Util.bind(function(){this._renderPopup(e.latlng,n,i,o)},this),300)},this),i=this.identify().on(this._map).at(e.latlng);this.options.layers?i.layers("visible:"+this.options.layers.join(",")):i.layers("visible"),i.run(n),this._shouldRenderPopup=!0,this._lastClick=e.latlng},_buildExportParams:function(){var t=this._map.getBounds(),e=this._map.getSize(),n=this._map.options.crs.project(t._northEast),i=this._map.options.crs.project(t._southWest),o=this._map.latLngToLayerPoint(t._northEast),s=this._map.latLngToLayerPoint(t._southWest);(o.y>0||s.y<e.y)&&(e.y=s.y-o.y);var r={bbox:[i.x,i.y,n.x,n.y].join(","),size:e.x+","+e.y,dpi:96,format:this.options.format,transparent:this.options.transparent,bboxSR:this.options.bboxSR,imageSR:this.options.imageSR};return this.options.dynamicLayers&&(r.dynamicLayers=this.options.dynamicLayers),this.options.layers&&(r.layers="show:"+this.options.layers.join(",")),this.options.layerDefs&&(r.layerDefs=JSON.stringify(this.options.layerDefs)),this.options.timeOptions&&(r.timeOptions=JSON.stringify(this.options.timeOptions)),this.options.from&&this.options.to&&(r.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this._service.options.token&&(r.token=this._service.options.token),r},_requestExport:function(e,n){"json"===this.options.f?this._service.request("export",e,function(t,e){t||this._renderImage(e.href,n)},this):(e.f="image",this._renderImage(this.options.url+"export"+t.Util.getParamString(e),n))}}),e.DynamicMapLayer=e.Layers.DynamicMapLayer,e.Layers.dynamicMapLayer=function(t){return new e.Layers.DynamicMapLayer(t)},e.dynamicMapLayer=function(t){return new e.Layers.DynamicMapLayer(t)},e.Layers.ImageMapLayer=e.Layers.RasterLayer.extend({options:{updateInterval:150,format:"jpgpng",transparent:!0,f:"json"},query:function(){return this._service.query()},identify:function(){return this._service.identify()},initialize:function(n){n.url=e.Util.cleanUrl(n.url),this._service=new e.Services.ImageService(n),this._service.on("authenticationrequired requeststart requestend requesterror requestsuccess",this._propagateEvent,this),t.Util.setOptions(this,n)},setPixelType:function(t){return this.options.pixelType=t,this._update(),this},getPixelType:function(){return this.options.pixelType},setBandIds:function(e){return t.Util.isArray(e)?this.options.bandIds=e.join(","):this.options.bandIds=e.toString(),this._update(),this},getBandIds:function(){return this.options.bandIds},setNoData:function(e,n){return t.Util.isArray(e)?this.options.noData=e.join(","):this.options.noData=e.toString(),n&&(this.options.noDataInterpretation=n),this._update(),this},getNoData:function(){return this.options.noData},getNoDataInterpretation:function(){return this.options.noDataInterpretation},setRenderingRule:function(t){this.options.renderingRule=t,this._update()},getRenderingRule:function(){return this.options.renderingRule},setMosaicRule:function(t){this.options.mosaicRule=t,this._update()},getMosaicRule:function(){return this.options.mosaicRule},_getPopupData:function(e){var n=t.Util.bind(function(n,i,o){n||setTimeout(t.Util.bind(function(){this._renderPopup(e.latlng,n,i,o)},this),300)},this),i=this.identify().at(e.latlng);this.options.mosaicRule&&i.setMosaicRule(this.options.mosaicRule),i.run(n),this._shouldRenderPopup=!0,this._lastClick=e.latlng},_buildExportParams:function(){var t=this._map.getBounds(),e=this._map.getSize(),n=this._map.options.crs.project(t._northEast),i=this._map.options.crs.project(t._southWest),o={bbox:[i.x,i.y,n.x,n.y].join(","),size:e.x+","+e.y,format:this.options.format,transparent:this.options.transparent,bboxSR:this.options.bboxSR,imageSR:this.options.imageSR};return this.options.from&&this.options.to&&(o.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.options.pixelType&&(o.pixelType=this.options.pixelType),this.options.interpolation&&(o.interpolation=this.options.interpolation),this.options.compressionQuality&&(o.compressionQuality=this.options.compressionQuality),this.options.bandIds&&(o.bandIds=this.options.bandIds),this.options.noData&&(o.noData=this.options.noData),this.options.noDataInterpretation&&(o.noDataInterpretation=this.options.noDataInterpretation),this._service.options.token&&(o.token=this._service.options.token),this.options.renderingRule&&(o.renderingRule=JSON.stringify(this.options.renderingRule)),this.options.mosaicRule&&(o.mosaicRule=JSON.stringify(this.options.mosaicRule)),o},_requestExport:function(e,n){"json"===this.options.f?this._service.request("exportImage",e,function(t,e){t||this._renderImage(e.href,n)},this):(e.f="image",this._renderImage(this.options.url+"exportImage"+t.Util.getParamString(e),n))}}),e.ImageMapLayer=e.Layers.ImageMapLayer,e.Layers.imageMapLayer=function(t){return new e.Layers.ImageMapLayer(t)},e.imageMapLayer=function(t){return new e.Layers.ImageMapLayer(t)},e.Layers.TiledMapLayer=t.TileLayer.extend({options:{zoomOffsetAllowance:.1,correctZoomLevels:!0},statics:{MercatorZoomLevels:{0:156543.033928,1:78271.5169639999,2:39135.7584820001,3:19567.8792409999,4:9783.93962049996,5:4891.96981024998,6:2445.98490512499,7:1222.99245256249,8:611.49622628138,9:305.748113140558,10:152.874056570411,11:76.4370282850732,12:38.2185141425366,13:19.1092570712683,14:9.55462853563415,15:4.77731426794937,16:2.38865713397468,17:1.19432856685505,18:.597164283559817,19:.298582141647617,20:.14929107082381,21:.07464553541191,22:.0373227677059525,23:.0186613838529763}},initialize:function(n){n.url=e.Util.cleanUrl(n.url),n=t.Util.setOptions(this,n),this.tileUrl=t.esri.Util.cleanUrl(n.url)+"tile/{z}/{y}/{x}",this._service=new t.esri.Services.MapService(n),this._service.on("authenticationrequired requeststart requestend requesterror requestsuccess",this._propagateEvent,this),this.tileUrl.match("://tiles.arcgisonline.com")&&(this.tileUrl=this.tileUrl.replace("://tiles.arcgisonline.com","://tiles{s}.arcgisonline.com"),n.subdomains=["1","2","3","4"]),this.options.token&&(this.tileUrl+="?token="+this.options.token),t.TileLayer.prototype.initialize.call(this,this.tileUrl,n)},getTileUrl:function(e){return t.Util.template(this.tileUrl,t.extend({s:this._getSubdomain(e),z:this._lodMap[e.z]||e.z,x:e.x,y:e.y},this.options))},onAdd:function(n){!this._lodMap&&this.options.correctZoomLevels?(this._lodMap={},this.metadata(function(i,o){if(!i){var s=o.spatialReference.latestWkid||o.spatialReference.wkid;if(102100===s||3857===s)for(var r=o.tileInfo.lods,a=e.Layers.TiledMapLayer.MercatorZoomLevels,l=0;l<r.length;l++){var h=r[l];for(var c in a){var u=a[c];if(this._withinPercentage(h.resolution,u,this.options.zoomOffsetAllowance)){this._lodMap[c]=h.level;break}}}else e.Util.warn("L.esri.TiledMapLayer is using a non-mercator spatial reference. Support may be available through Proj4Leaflet http://esri.github.io/esri-leaflet/examples/non-mercator-projection.html")}t.TileLayer.prototype.onAdd.call(this,n)},this)):t.TileLayer.prototype.onAdd.call(this,n)},metadata:function(t,e){return this._service.metadata(t,e),this},identify:function(){return this._service.identify()},authenticate:function(t){var e="?token="+t;return this.tileUrl=this.options.token?this.tileUrl.replace(/\?token=(.+)/g,e):this.tileUrl+e,this.options.token=t,this._service.authenticate(t),this},_propagateEvent:function(e){e=t.extend({layer:e.target,target:this},e),this.fire(e.type,e)},_withinPercentage:function(t,e,n){var i=Math.abs(t/e-1);return i<n}}),t.esri.TiledMapLayer=t.esri.Layers.tiledMapLayer,t.esri.Layers.tiledMapLayer=function(e){return new t.esri.Layers.TiledMapLayer(e)},t.esri.tiledMapLayer=function(e){return new t.esri.Layers.TiledMapLayer(e)},e.Layers.FeatureGrid=t.Class.extend({includes:t.Mixin.Events,options:{cellSize:512,updateInterval:150},initialize:function(e){e=t.setOptions(this,e)},onAdd:function(e){this._map=e,this._update=t.Util.limitExecByInterval(this._update,this.options.updateInterval,this),this._map.addEventListener(this.getEvents(),this),this._reset(),this._update()},onRemove:function(){this._map.removeEventListener(this.getEvents(),this),this._removeCells()},getEvents:function(){var t={viewreset:this._reset,moveend:this._update,zoomend:this._onZoom};return t},addTo:function(t){return t.addLayer(this),this},removeFrom:function(t){return t.removeLayer(this),this},_onZoom:function(){var t=this._map.getZoom();t>this.options.maxZoom||t<this.options.minZoom?(this.removeFrom(this._map),this._map.addEventListener("zoomend",this.getEvents().zoomend,this)):this._map.hasLayer(this)||(this._map.removeEventListener("zoomend",this.getEvents().zoomend,this),this.addTo(this._map))},_reset:function(){this._removeCells(),this._cells={},this._activeCells={},this._cellsToLoad=0,this._cellsTotal=0,this._resetWrap()},_resetWrap:function(){var t=this._map,e=t.options.crs;if(!e.infinite){var n=this._getCellSize();e.wrapLng&&(this._wrapLng=[Math.floor(t.project([0,e.wrapLng[0]]).x/n),Math.ceil(t.project([0,e.wrapLng[1]]).x/n)]),e.wrapLat&&(this._wrapLat=[Math.floor(t.project([e.wrapLat[0],0]).y/n),Math.ceil(t.project([e.wrapLat[1],0]).y/n)])}},_getCellSize:function(){return this.options.cellSize},_update:function(){if(this._map){var e=this._map.getPixelBounds(),n=this._map.getZoom(),i=this._getCellSize(),o=[i/2,i/2];if(!(n>this.options.maxZoom||n<this.options.minZoom)){var s=e.min.subtract(o).divideBy(i).floor();s.x=Math.max(s.x,0),s.y=Math.max(s.y,0);var r=t.bounds(s,e.max.add(o).divideBy(i).floor());this._removeOtherCells(r),this._addCells(r)}}},_addCells:function(e){var n,i,o,s=[],r=e.getCenter(),a=this._map.getZoom();for(n=e.min.y;n<=e.max.y;n++)for(i=e.min.x;i<=e.max.x;i++)o=new t.Point(i,n),o.z=a,s.push(o);var l=s.length;if(0!==l)for(this._cellsToLoad+=l,this._cellsTotal+=l,s.sort(function(t,e){return t.distanceTo(r)-e.distanceTo(r)}),i=0;i<l;i++)this._addCell(s[i])},_cellCoordsToBounds:function(e){var n=this._map,i=this.options.cellSize,o=e.multiplyBy(i),s=o.add([i,i]),r=n.unproject(o,e.z).wrap(),a=n.unproject(s,e.z).wrap();return new t.LatLngBounds(r,a)},_cellCoordsToKey:function(t){return t.x+":"+t.y},_keyToCellCoords:function(e){var n=e.split(":"),i=parseInt(n[0],10),o=parseInt(n[1],10);return new t.Point(i,o)},_removeOtherCells:function(t){for(var e in this._cells)t.contains(this._keyToCellCoords(e))||this._removeCell(e)},_removeCell:function(t){var e=this._activeCells[t];e&&(delete this._activeCells[t],this.cellLeave&&this.cellLeave(e.bounds,e.coords),
this.fire("cellleave",{bounds:e.bounds,coords:e.coords}))},_removeCells:function(){for(var t in this._cells){var e=this._cells[t].bounds,n=this._cells[t].coords;this.cellLeave&&this.cellLeave(e,n),this.fire("cellleave",{bounds:e,coords:n})}},_addCell:function(t){this._wrapCoords(t);var e=this._cellCoordsToKey(t),n=this._cells[e];n&&!this._activeCells[e]&&(this.cellEnter&&this.cellEnter(n.bounds,t),this.fire("cellenter",{bounds:n.bounds,coords:t}),this._activeCells[e]=n),n||(n={coords:t,bounds:this._cellCoordsToBounds(t)},this._cells[e]=n,this._activeCells[e]=n,this.createCell&&this.createCell(n.bounds,t),this.fire("cellcreate",{bounds:n.bounds,coords:t}))},_wrapCoords:function(e){e.x=this._wrapLng?t.Util.wrapNum(e.x,this._wrapLng):e.x,e.y=this._wrapLat?t.Util.wrapNum(e.y,this._wrapLat):e.y}}),function(e){function n(t){this.values=t||[]}e.Layers.FeatureManager=e.Layers.FeatureGrid.extend({options:{where:"1=1",fields:["*"],from:!1,to:!1,timeField:!1,timeFilterMode:"server",simplifyFactor:0,precision:6},initialize:function(i){if(e.Layers.FeatureGrid.prototype.initialize.call(this,i),i.url=e.Util.cleanUrl(i.url),i=t.setOptions(this,i),this._service=new e.Services.FeatureLayerService(i),"*"!==this.options.fields[0]){for(var o=!1,s=0;s<this.options.fields.length;s++)this.options.fields[s].match(/^(OBJECTID|FID|OID|ID)$/i)&&(o=!0);o===!1&&e.Util.warn("no known esriFieldTypeOID field detected in fields Array.  Please add an attribute field containing unique IDs to ensure the layer can be drawn correctly.")}this._service.on("authenticationrequired requeststart requestend requesterror requestsuccess",function(e){e=t.extend({target:this},e),this.fire(e.type,e)},this),this.options.timeField.start&&this.options.timeField.end?(this._startTimeIndex=new n,this._endTimeIndex=new n):this.options.timeField&&(this._timeIndex=new n),this._cache={},this._currentSnapshot=[],this._activeRequests=0,this._pendingRequests=[]},onAdd:function(t){return e.Layers.FeatureGrid.prototype.onAdd.call(this,t)},onRemove:function(t){return e.Layers.FeatureGrid.prototype.onRemove.call(this,t)},getAttribution:function(){return this.options.attribution},createCell:function(t,e){this._requestFeatures(t,e)},_requestFeatures:function(n,i,o){this._activeRequests++,1===this._activeRequests&&this.fire("loading",{bounds:n}),this._buildQuery(n).run(function(s,r,a){a&&a.exceededTransferLimit&&this.fire("drawlimitexceeded"),!s&&r&&r.features.length&&!this._removed&&e.Util.requestAnimationFrame(t.Util.bind(function(){this._addFeatures(r.features,i),this._postProcessFeatures(n)},this)),s||!r||r.features.length||this._postProcessFeatures(n),o&&o.call(this,s,r)},this)},_postProcessFeatures:function(t){this._activeRequests--,this._activeRequests<=0&&this.fire("load",{bounds:t})},_cacheKey:function(t){return t.z+":"+t.x+":"+t.y},_addFeatures:function(t,e){var n=this._cacheKey(e);this._cache[n]=this._cache[n]||[];for(var i=t.length-1;i>=0;i--){var o=t[i].id;this._currentSnapshot.push(o),this._cache[n].push(o)}this.options.timeField&&this._buildTimeIndexes(t);var s=this._map.getZoom();s>this.options.maxZoom||s<this.options.minZoom||this.createLayers(t)},_buildQuery:function(t){var e=this._service.query().intersects(t).where(this.options.where).fields(this.options.fields).precision(this.options.precision);return this.options.simplifyFactor&&e.simplify(this._map,this.options.simplifyFactor),"server"===this.options.timeFilterMode&&this.options.from&&this.options.to&&e.between(this.options.from,this.options.to),e},setWhere:function(n,i,o){this.options.where=n&&n.length?n:"1=1";for(var s=[],r=[],a=0,l=null,h=t.Util.bind(function(n,h){if(a--,n&&(l=n),h)for(var c=h.features.length-1;c>=0;c--)r.push(h.features[c].id);a<=0&&(this._currentSnapshot=r,e.Util.requestAnimationFrame(t.Util.bind(function(){this.removeLayers(s),this.addLayers(r),i&&i.call(o,l)},this)))},this),c=this._currentSnapshot.length-1;c>=0;c--)s.push(this._currentSnapshot[c]);for(var u in this._activeCells){a++;var d=this._keyToCellCoords(u),p=this._cellCoordsToBounds(d);this._requestFeatures(p,u,h)}return this},getWhere:function(){return this.options.where},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(e,n,i,o){var s=this.options.from,r=this.options.to,a=0,l=null,h=t.Util.bind(function(t){t&&(l=t),this._filterExistingFeatures(s,r,e,n),a--,i&&a<=0&&i.call(o,l)},this);if(this.options.from=e,this.options.to=n,this._filterExistingFeatures(s,r,e,n),"server"===this.options.timeFilterMode)for(var c in this._activeCells){a++;var u=this._keyToCellCoords(c),d=this._cellCoordsToBounds(u);this._requestFeatures(d,c,h)}},refresh:function(){for(var t in this._activeCells){var e=this._keyToCellCoords(t),n=this._cellCoordsToBounds(e);this._requestFeatures(n,t)}this.redraw&&this.once("load",function(){this.eachFeature(function(t){this._redraw(t.feature.id)},this)},this)},_filterExistingFeatures:function(n,i,o,s){var r=n&&i?this._getFeaturesInTimeRange(n,i):this._currentSnapshot,a=this._getFeaturesInTimeRange(o,s);if(a.indexOf)for(var l=0;l<a.length;l++){var h=r.indexOf(a[l]);h>=0&&r.splice(h,1)}e.Util.requestAnimationFrame(t.Util.bind(function(){this.removeLayers(r),this.addLayers(a)},this))},_getFeaturesInTimeRange:function(t,e){var n,i=[];if(this.options.timeField.start&&this.options.timeField.end){var o=this._startTimeIndex.between(t,e),s=this._endTimeIndex.between(t,e);n=o.concat(s)}else n=this._timeIndex.between(t,e);for(var r=n.length-1;r>=0;r--)i.push(n[r].id);return i},_buildTimeIndexes:function(t){var e,n;if(this.options.timeField.start&&this.options.timeField.end){var i=[],o=[];for(e=t.length-1;e>=0;e--)n=t[e],i.push({id:n.id,value:new Date(n.properties[this.options.timeField.start])}),o.push({id:n.id,value:new Date(n.properties[this.options.timeField.end])});this._startTimeIndex.bulkAdd(i),this._endTimeIndex.bulkAdd(o)}else{var s=[];for(e=t.length-1;e>=0;e--)n=t[e],s.push({id:n.id,value:new Date(n.properties[this.options.timeField])});this._timeIndex.bulkAdd(s)}},_featureWithinTimeRange:function(t){if(!this.options.from||!this.options.to)return!0;var e=+this.options.from.valueOf(),n=+this.options.to.valueOf();if("string"==typeof this.options.timeField){var i=+t.properties[this.options.timeField];return i>=e&&i<=n}if(this.options.timeField.start&&this.options.timeField.end){var o=+t.properties[this.options.timeField.start],s=+t.properties[this.options.timeField.end];return o>=e&&o<=n||s>=e&&s<=n}},authenticate:function(t){return this._service.authenticate(t),this},metadata:function(t,e){return this._service.metadata(t,e),this},query:function(){return this._service.query()},_getMetadata:function(e){if(this._metadata){var n;e(n,this._metadata)}else this.metadata(t.Util.bind(function(t,n){this._metadata=n,e(t,this._metadata)},this))},addFeature:function(e,n,i){this._getMetadata(t.Util.bind(function(o,s){this._service.addFeature(e,t.Util.bind(function(t,o){t||(e.properties[s.objectIdField]=o.objectId,e.id=o.objectId,this.createLayers([e])),n&&n.call(i,t,o)},this))},this))},updateFeature:function(t,e,n){this._service.updateFeature(t,function(i,o){i||(this.removeLayers([t.id],!0),this.createLayers([t])),e&&e.call(n,i,o)},this)},deleteFeature:function(t,e,n){this._service.deleteFeature(t,function(t,i){!t&&i.objectId&&this.removeLayers([i.objectId],!0),e&&e.call(n,t,i)},this)},deleteFeatures:function(t,e,n){return this._service.deleteFeatures(t,function(t,i){if(!t&&i.length>0)for(var o=0;o<i.length;o++)this.removeLayers([i[o].objectId],!0);e&&e.call(n,t,i)},this)}}),n.prototype._query=function(t){for(var e,n,i,o=0,s=this.values.length-1;o<=s;)if(i=e=(o+s)/2|0,n=this.values[Math.round(e)],+n.value<+t)o=e+1;else{if(!(+n.value>+t))return e;s=e-1}return~s},n.prototype.sort=function(){this.values.sort(function(t,e){return+e.value-+t.value}).reverse(),this.dirty=!1},n.prototype.between=function(t,e){this.dirty&&this.sort();var n=this._query(t),i=this._query(e);return 0===n&&0===i?[]:(n=Math.abs(n),i=i<0?Math.abs(i):i+1,this.values.slice(n,i))},n.prototype.bulkAdd=function(t){this.dirty=!0,this.values=this.values.concat(t)}}(e),e.Layers.FeatureLayer=e.Layers.FeatureManager.extend({statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},options:{cacheLayers:!0},initialize:function(n){e.Layers.FeatureManager.prototype.initialize.call(this,n),n=t.setOptions(this,n),this._layers={},this._leafletIds={},this._key="c"+(1e9*Math.random()).toString(36).replace(".","_")},onAdd:function(t){return t.on("zoomstart zoomend",function(t){this._zooming="zoomstart"===t.type},this),this._removed=!1,e.Layers.FeatureManager.prototype.onAdd.call(this,t)},onRemove:function(t){this._removed=!0;for(var n in this._layers)t.removeLayer(this._layers[n]),this.fire("removefeature",{feature:this._layers[n].feature});return e.Layers.FeatureManager.prototype.onRemove.call(this,t)},createNewLayer:function(e){return t.GeoJSON.geometryToLayer(e,this.options.pointToLayer,t.GeoJSON.coordsToLatLng,this.options)},_updateLayer:function(e,n){var i=[],o=this.options.coordsToLatLng||t.GeoJSON.coordsToLatLng;switch(n.properties&&(e.feature.properties=n.properties),n.geometry.type){case"Point":i=t.GeoJSON.coordsToLatLng(n.geometry.coordinates),e.setLatLng(i);break;case"LineString":i=t.GeoJSON.coordsToLatLngs(n.geometry.coordinates,0,o),e.setLatLngs(i);break;case"MultiLineString":i=t.GeoJSON.coordsToLatLngs(n.geometry.coordinates,1,o),e.setLatLngs(i);break;case"Polygon":i=t.GeoJSON.coordsToLatLngs(n.geometry.coordinates,1,o),e.setLatLngs(i);break;case"MultiPolygon":i=t.GeoJSON.coordsToLatLngs(n.geometry.coordinates,2,o),e.setLatLngs(i)}},createLayers:function(t){for(var n=t.length-1;n>=0;n--){var i,o=t[n],s=this._layers[o.id];s&&!this._map.hasLayer(s)&&(this._map.addLayer(s),this.fire("addfeature",{feature:s.feature})),s&&(s.setLatLngs||s.setLatLng)&&this._updateLayer(s,o),s||(i=this.createNewLayer(o),i.feature=o,this.options.style?i._originalStyle=this.options.style:i.setStyle&&(i._originalStyle=i.options),i._leaflet_id=this._key+"_"+o.id,this._leafletIds[i._leaflet_id]=o.id,i.on(e.Layers.FeatureLayer.EVENTS,this._propagateEvent,this),this._popup&&i.bindPopup&&i.bindPopup(this._popup(i.feature,i),this._popupOptions),this.options.onEachFeature&&this.options.onEachFeature(i.feature,i),this._layers[i.feature.id]=i,this.resetStyle(i.feature.id),this.fire("createfeature",{feature:i.feature}),(!this.options.timeField||this.options.timeField&&this._featureWithinTimeRange(o))&&(this._map.addLayer(i),this.fire("addfeature",{feature:i.feature})))}},addLayers:function(t){for(var e=t.length-1;e>=0;e--){var n=this._layers[t[e]];n&&(this.fire("addfeature",{feature:n.feature}),this._map.addLayer(n))}},removeLayers:function(t,e){for(var n=t.length-1;n>=0;n--){var i=t[n],o=this._layers[i];o&&(this.fire("removefeature",{feature:o.feature,permanent:e}),this._map.removeLayer(o)),o&&e&&delete this._layers[i]}},cellEnter:function(n,i){this._zooming||e.Util.requestAnimationFrame(t.Util.bind(function(){var t=this._cacheKey(i),e=this._cellCoordsToKey(i),n=this._cache[t];this._activeCells[e]&&n&&this.addLayers(n)},this))},cellLeave:function(n,i){this._zooming||e.Util.requestAnimationFrame(t.Util.bind(function(){var t=this._cacheKey(i),e=this._cellCoordsToKey(i),n=this._cache[t],o=this._map.getBounds();if(!this._activeCells[e]&&n){for(var s=!0,r=0;r<n.length;r++){var a=this._layers[n[r]];a&&a.getBounds&&o.intersects(a.getBounds())&&(s=!1)}s&&this.removeLayers(n,!this.options.cacheLayers),!this.options.cacheLayers&&s&&(delete this._cache[t],delete this._cells[e],delete this._activeCells[e])}},this))},resetStyle:function(t){var e=this._layers[t];return e&&this.setFeatureStyle(e.feature.id,e._originalStyle),this},setStyle:function(t){return this.options.style=t,this.eachFeature(function(e){this.setFeatureStyle(e.feature.id,t)},this),this},setFeatureStyle:function(e,n){var i=this._layers[e];return"function"==typeof n&&(n=n(i.feature)),n||i.defaultOptions||(n=t.Path.prototype.options,n.fill=!0),i&&i.setStyle&&i.setStyle(n),this},bindPopup:function(t,e){this._popup=t,this._popupOptions=e;for(var n in this._layers){var i=this._layers[n],o=this._popup(i.feature,i);i.bindPopup(o,e)}return this},unbindPopup:function(){this._popup=!1;for(var t in this._layers){var e=this._layers[t];if(e.unbindPopup)e.unbindPopup();else if(e.getLayers){var n=e.getLayers();for(var i in n){var o=n[i];o.unbindPopup()}}}return this},eachFeature:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getFeature:function(t){return this._layers[t]},bringToBack:function(){this.eachFeature(function(t){t.bringToBack&&t.bringToBack()})},bringToFront:function(){this.eachFeature(function(t){t.bringToFront&&t.bringToFront()})},redraw:function(t){return t&&this._redraw(t),this},_redraw:function(e){var n=this._layers[e],i=n.feature;if(n&&n.setIcon&&this.options.pointToLayer&&this.options.pointToLayer){var o=this.options.pointToLayer(i,t.latLng(i.geometry.coordinates[1],i.geometry.coordinates[0])),s=o.options.icon;n.setIcon(s)}if(n&&n.setStyle&&this.options.pointToLayer){var r=this.options.pointToLayer(i,t.latLng(i.geometry.coordinates[1],i.geometry.coordinates[0])),a=r.options;this.setFeatureStyle(i.id,a)}n&&n.setStyle&&this.options.style&&this.resetStyle(i.id)},_propagateEvent:function(t){t.layer=this._layers[this._leafletIds[t.target._leaflet_id]],t.target=this,this.fire(t.type,t)}}),e.FeatureLayer=e.Layers.FeatureLayer,e.Layers.featureLayer=function(t){return new e.Layers.FeatureLayer(t)},e.featureLayer=function(t){return new e.Layers.FeatureLayer(t)},e.Controls.Logo=t.Control.extend({options:{position:"bottomright",marginTop:0,marginLeft:0,marginBottom:0,marginRight:0},onAdd:function(){var e=t.DomUtil.create("div","esri-leaflet-logo");return e.style.marginTop=this.options.marginTop,e.style.marginLeft=this.options.marginLeft,e.style.marginBottom=this.options.marginBottom,e.style.marginRight=this.options.marginRight,e.innerHTML=this._adjustLogo(this._map._size),this._map.on("resize",function(t){e.innerHTML=this._adjustLogo(t.newSize)},this),e},_adjustLogo:function(t){return t.x<=600||t.y<=600?'<a href="https://developers.arcgis.com" style="border: none;"><img src="https://js.arcgis.com/3.13/esri/images/map/logo-sm.png" alt="Powered by Esri" style="border: none;"></a>':'<a href="https://developers.arcgis.com" style="border: none;"><img src="https://js.arcgis.com/3.13/esri/images/map/logo-med.png" alt="Powered by Esri" style="border: none;"></a>'}}),e.Controls.logo=function(e){return new t.esri.Controls.Logo(e)},e})},{leaflet:299}],297:[function(t,e,n){!function(t,e,n){L.drawVersion="0.4.9",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes.",text:"Save"},cancel:{title:"Cancel editing, discards all changes.",text:"Cancel"}},buttons:{edit:"Edit layers.",editDisabled:"No layers to edit.",remove:"Delete layers.",removeDisabled:"No layers to delete."}},handlers:{edit:{tooltip:{text:"Drag handles, or marker to edit feature.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove"}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({includes:L.Mixin.Events,initialize:function(t,e){this._map=t,this._container=t._container,this._overlayPane=t._panes.overlayPane,this._popupPane=t._panes.popupPane,e&&e.shapeOptions&&(e.shapeOptions=L.Util.extend({},this.options.shapeOptions,e.shapeOptions)),L.setOptions(this,e)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(L.DomUtil.disableTextSelection(),t.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(t){L.setOptions(this,t)},_fireCreatedEvent:function(t){this._map.fire(L.Draw.Event.CREATED,{layer:t,layerType:this.type})},_cancelDrawing:function(t){this._map.fire("draw:canceled",{layerType:this.type}),27===t.keyCode&&this.disable()}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3},initialize:function(t,e){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,e&&e.drawError&&(e.drawError=L.Util.extend({},this.options.drawError,e.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var t=this._markers.pop(),e=this._poly,n=e.getLatLngs(),i=n.splice(-1,1)[0];this._poly.setLatLngs(n),this._markerGroup.removeLayer(t),e.getLatLngs().length<2&&this._map.removeLayer(e),this._vertexChanged(i,!1)}},addVertex:function(t){var e=this._markers.length;return e>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(t)?void this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(t)),this._poly.addLatLng(t),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),void this._vertexChanged(t,!0))},completeShape:function(){this._markers.length<=1||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var t=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),e=this._poly.newLatLngIntersects(t[t.length-1]);return!this.options.allowIntersection&&e||!this._shapeIsValid()?void this._showErrorTooltip():(this._fireCreatedEvent(),this.disable(),void(this.options.repeatMode&&this.enable()))},_shapeIsValid:function(){return!0},_onZoomEnd:function(){null!==this._markers&&this._updateGuide()},_onMouseMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent),n=this._map.layerPointToLatLng(e);this._currentLatLng=n,this._updateTooltip(n),this._updateGuide(e),this._mouseMarker.setLatLng(n),L.DomEvent.preventDefault(t.originalEvent)},_vertexChanged:function(t,e){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(t,e),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(t){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(t),this._clickHandled=!0,this._disableNewMarkers();var e=t.originalEvent,n=e.clientX,i=e.clientY;this._startPoint.call(this,n,i)}},_startPoint:function(t,e){this._mouseDownOrigin=L.point(t,e)},_onMouseUp:function(t){var e=t.originalEvent,n=e.clientX,i=e.clientY;this._endPoint.call(this,n,i,t),this._clickHandled=null},_endPoint:function(e,n,i){if(this._mouseDownOrigin){var o=L.point(e,n).distanceTo(this._mouseDownOrigin),s=this._calculateFinishDistance(i.latlng);s<10&&L.Browser.touch?this._finishShape():Math.abs(o)<9*(t.devicePixelRatio||1)&&this.addVertex(i.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(t){var e,n,i=t.originalEvent;!i.touches||!i.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(e=i.touches[0].clientX,n=i.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,e,n),this._endPoint.call(this,e,n,t),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(t){var e;if(this._markers.length>0){var n;if(this.type===L.Draw.Polyline.TYPE)n=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;n=this._markers[0]}var i=this._map.latLngToContainerPoint(n.getLatLng()),o=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),s=this._map.latLngToContainerPoint(o.getLatLng());e=i.distanceTo(s)}else e=1/0;return e},_updateFinishHandler:function(){var t=this._markers.length;t>1&&this._markers[t-1].on("click",this._finishShape,this),t>2&&this._markers[t-2].off("click",this._finishShape,this)},_createMarker:function(t){var e=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(e),e},_updateGuide:function(t){var e=this._markers?this._markers.length:0;e>0&&(t=t||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[e-1].getLatLng()),t))},_updateTooltip:function(t){var e=this._getTooltipText();t&&this._tooltip.updatePosition(t),this._errorShown||this._tooltip.updateContent(e)},_drawGuide:function(t,e){var n,i,o,s=Math.floor(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))),r=this.options.guidelineDistance,a=this.options.maxGuideLineLength,l=s>a?s-a:r;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));l<s;l+=this.options.guidelineDistance)n=l/s,i={x:Math.floor(t.x*(1-n)+n*e.x),y:Math.floor(t.y*(1-n)+n*e.y)},o=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),o.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(o,i)},_updateGuideColor:function(t){if(this._guidesContainer)for(var e=0,n=this._guidesContainer.childNodes.length;e<n;e++)this._guidesContainer.childNodes[e].style.backgroundColor=t},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var t,e,n=this.options.showLength;return L.Browser.touch&&(n=!1),0===this._markers.length?t={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(e=n?this._getMeasurementString():"",t=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:e}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:e}),t},_updateRunningMeasure:function(t,e){var n,i,o=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(n=o-(e?2:1),i=t.distanceTo(this._markers[n].getLatLng()),this._measurementRunningTotal+=i*(e?1:-1))},_getMeasurementString:function(){var t,e=this._currentLatLng,n=this._markers[this._markers.length-1].getLatLng();return t=this._measurementRunningTotal+e.distanceTo(n),L.GeometryUtil.readableDistance(t,this.options.metric,this.options.feet,this.options.nautic)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var t=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0},initialize:function(t,e){L.Draw.Polyline.prototype.initialize.call(this,t,e),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var t=this._markers.length;1===t&&this._markers[0].on("click",this._finishShape,this),t>2&&(this._markers[t-1].on("dblclick",this._finishShape,this),t>3&&this._markers[t-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var t,e;return 0===this._markers.length?t=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?t=L.drawLocal.draw.handlers.polygon.tooltip.cont:(t=L.drawLocal.draw.handlers.polygon.tooltip.end,e=this._getMeasurementString()),{text:t,subtext:e}},_getMeasurementString:function(){var t=this._area;return t?L.GeometryUtil.readableArea(t,this.options.metric):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(t,e){var n;!this.options.allowIntersection&&this.options.showArea&&(n=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(n)),L.Draw.Polyline.prototype._vertexChanged.call(this,t,e)},_cleanUpShape:function(){var t=this._markers.length;t>0&&(this._markers[0].off("click",this._finishShape,this),t>2&&this._markers[t-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(t,e){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(e,"mouseup",this._onMouseUp,this),L.DomEvent.off(e,"touchend",this._onMouseUp,this),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(t){this._isDrawing=!0,this._startLatLng=t.latlng,L.DomEvent.on(e,"mouseup",this._onMouseUp,this).on(e,"touchend",this._onMouseUp,this).preventDefault(t.originalEvent)},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(e))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,showArea:!0,clickable:!0},metric:!0},initialize:function(t,e){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},_drawShape:function(t){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,t)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,t),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_getTooltipText:function(){var t,e,n,i=L.Draw.SimpleShape.prototype._getTooltipText.call(this),o=this._shape,s=this.options.showArea;return o&&(t=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),e=L.GeometryUtil.geodesicArea(t),n=s?L.GeometryUtil.readableArea(e,this.options.metric):""),{text:i.text,subtext:n}}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(t,e){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,
L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},_drawShape:function(t){this._shape?this._shape.setRadius(this._startLatLng.distanceTo(t)):(this._shape=new L.Circle(this._startLatLng,this._startLatLng.distanceTo(t),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_onMouseMove:function(t){var e,n=t.latlng,i=this.options.showRadius,o=this.options.metric;if(this._tooltip.updatePosition(n),this._isDrawing){this._drawShape(n),e=this._shape.getRadius().toFixed(1);var s="";i&&(s=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(e,o,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:s})}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(t,e){this.type=L.Draw.Marker.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:L.drawLocal.draw.handlers.marker.tooltip.start}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._marker&&(this._marker.off("click",this._onClick,this),this._map.off("click",this._onClick,this).off("click",this._onTouch,this).removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._mouseMarker.setLatLng(e),this._marker?(e=this._mouseMarker.getLatLng(),this._marker.setLatLng(e)):(this._marker=new L.Marker(e,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset}),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(t){this._onMouseMove(t),this._onClick()},_fireCreatedEvent:function(){var t=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(t,e){this._marker=t,L.setOptions(this,e)},addHooks:function(){var t=this._marker;t.dragging.enable(),t.on("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()},removeHooks:function(){var t=this._marker;t.dragging.disable(),t.off("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()},_onDragEnd:function(t){var e=t.target;e.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:e})},_toggleMarkerHighlight:function(){var t=this._marker._icon;t&&(t.style.display="none",L.DomUtil.hasClass(t,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(t,"leaflet-edit-marker-selected"),this._offsetMarker(t,-4)):(L.DomUtil.addClass(t,"leaflet-edit-marker-selected"),this._offsetMarker(t,4)),t.style.display="")},_offsetMarker:function(t,e){var n=parseInt(t.style.marginTop,10)-e,i=parseInt(t.style.marginLeft,10)-e;t.style.marginTop=n+"px",t.style.marginLeft=i+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({options:{},initialize:function(t,e){this.latlngs=[t._latlngs],t._holes&&(this.latlngs=this.latlngs.concat(t._holes)),this._poly=t,L.setOptions(this,e),this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(t){for(var e=0;e<this._verticesHandlers.length;e++)t(this._verticesHandlers[e])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(t){t.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(t){t.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(t){t.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var t=0;t<this.latlngs.length;t++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[t],this.options))},_updateLatLngs:function(t){this.latlngs=[t.layer._latlngs],t.layer._holes&&(this.latlngs=this.latlngs.concat(t.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(t,e,n){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=t,n&&n.drawError&&(n.drawError=L.Util.extend({},this.options.drawError,n.drawError)),this._latlngs=e,L.setOptions(this,n)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var t=this._poly;t instanceof L.Polygon||(t.options.fill=!1,t.options.editing&&(t.options.editing.fill=!1)),t.setStyle(t.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var t=this._poly;t.setStyle(t.options.original),t._map&&(t._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var t,e,n,i,o=this._defaultShape();for(t=0,n=o.length;t<n;t++)i=this._createMarker(o[t],t),i.on("click",this._onMarkerClick,this),this._markers.push(i);var s,r;for(t=0,e=n-1;t<n;e=t++)(0!==t||L.Polygon&&this._poly instanceof L.Polygon)&&(s=this._markers[e],r=this._markers[t],this._createMiddleMarker(s,r),this._updatePrevNext(s,r))},_createMarker:function(t,e){var n=new L.Marker.Touch(t,{draggable:!0,icon:this.options.icon});return n._origLatLng=t,n._index=e,n.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(n),n},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var t=this._defaultShape(),e=[].splice.apply(t,arguments);return this._poly._convertLatLngs(t,!0),this._poly.redraw(),e},_removeMarker:function(t){var e=t._index;this._markerGroup.removeLayer(t),this._markers.splice(e,1),this._spliceLatLngs(e,1),this._updateIndexes(e,-1),t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(t){var e=t.target,n=this._poly;if(L.extend(e._origLatLng,e._latlng),e._middleLeft&&e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e)),e._middleRight&&e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next)),n.options.poly){var i=n._map._editTooltip;if(!n.options.poly.allowIntersection&&n.intersects()){var o=n.options.color;n.setStyle({color:this.options.drawError.color}),0!==L.version.indexOf("0.7")&&e.dragging._draggable._onUp(t),this._onMarkerClick(t),i&&i.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){n.setStyle({color:o}),i&&i.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(t){var e=L.Polygon&&this._poly instanceof L.Polygon?4:3,n=t.target;this._defaultShape().length<e||(this._removeMarker(n),this._updatePrevNext(n._prev,n._next),n._middleLeft&&this._markerGroup.removeLayer(n._middleLeft),n._middleRight&&this._markerGroup.removeLayer(n._middleRight),n._prev&&n._next?this._createMiddleMarker(n._prev,n._next):n._prev?n._next||(n._prev._middleRight=null):n._next._middleLeft=null,this._fireEdit())},_onTouchMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent.touches[0]),n=this._map.layerPointToLatLng(e),i=t.target;L.extend(i._origLatLng,n),i._middleLeft&&i._middleLeft.setLatLng(this._getMiddleLatLng(i._prev,i)),i._middleRight&&i._middleRight.setLatLng(this._getMiddleLatLng(i,i._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(t,e){this._markerGroup.eachLayer(function(n){n._index>t&&(n._index+=e)})},_createMiddleMarker:function(t,e){var n,i,o,s=this._getMiddleLatLng(t,e),r=this._createMarker(s);r.setOpacity(.6),t._middleRight=e._middleLeft=r,i=function(){r.off("touchmove",i,this);var o=e._index;r._index=o,r.off("click",n,this).on("click",this._onMarkerClick,this),s.lat=r.getLatLng().lat,s.lng=r.getLatLng().lng,this._spliceLatLngs(o,0,s),this._markers.splice(o,0,r),r.setOpacity(1),this._updateIndexes(o,1),e._index++,this._updatePrevNext(t,r),this._updatePrevNext(r,e),this._poly.fire("editstart")},o=function(){r.off("dragstart",i,this),r.off("dragend",o,this),r.off("touchmove",i,this),this._createMiddleMarker(t,r),this._createMiddleMarker(r,e)},n=function(){i.call(this),o.call(this),this._fireEdit()},r.on("click",n,this).on("dragstart",i,this).on("dragend",o,this).on("touchmove",i,this),this._markerGroup.addLayer(r)},_updatePrevNext:function(t,e){t&&(t._next=e),e&&(e._prev=t)},_getMiddleLatLng:function(t,e){var n=this._poly._map,i=n.project(t.getLatLng()),o=n.project(e.getLatLng());return n.unproject(i._add(o)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this,this.options.poly),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(t,e){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=t,L.Util.setOptions(this,e)},addHooks:function(){var t=this._shape;this._shape._map&&(this._map=this._shape._map,t.setStyle(t.options.editing),t._map&&(this._map=t._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var t=this._shape;if(t.setStyle(t.options.original),t._map){this._unbindMarker(this._moveMarker);for(var e=0,n=this._resizeMarkers.length;e<n;e++)this._unbindMarker(this._resizeMarkers[e]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(t,e){var n=new L.Marker.Touch(t,{draggable:!0,icon:e,zIndexOffset:10});return this._bindMarker(n),this._markerGroup.addLayer(n),n},_bindMarker:function(t){t.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(t){t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(t){var e=t.target;e.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(t){var e=t.target,n=e.getLatLng();e===this._moveMarker?this._move(n):this._resize(n),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(t){var e=t.target;e.setOpacity(1),this._fireEdit()},_onTouchStart:function(t){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t),"function"==typeof this._getCorners){var e=this._getCorners(),n=t.target,i=n._cornerIndex;n.setOpacity(0),this._oppositeCorner=e[(i+2)%4],this._toggleCornerMarkers(0,i)}this._shape.fire("editstart")},_onTouchMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent.touches[0]),n=this._map.layerPointToLatLng(e),i=t.target;return i===this._moveMarker?this._move(n):this._resize(n),this._shape.redraw(),!1},_onTouchEnd:function(t){var e=t.target;e.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getBounds(),e=t.getCenter();this._moveMarker=this._createMarker(e,this.options.moveIcon)},_createResizeMarker:function(){var t=this._getCorners();this._resizeMarkers=[];for(var e=0,n=t.length;e<n;e++)this._resizeMarkers.push(this._createMarker(t[e],this.options.resizeIcon)),this._resizeMarkers[e]._cornerIndex=e},_onMarkerDragStart:function(t){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t);var e=this._getCorners(),n=t.target,i=n._cornerIndex;this._oppositeCorner=e[(i+2)%4],this._toggleCornerMarkers(0,i)},_onMarkerDragEnd:function(t){var e,n,i=t.target;i===this._moveMarker&&(e=this._shape.getBounds(),n=e.getCenter(),i.setLatLng(n)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,t)},_move:function(t){for(var e,n=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),i=this._shape.getBounds(),o=i.getCenter(),s=[],r=0,a=n.length;r<a;r++)e=[n[r].lat-o.lat,n[r].lng-o.lng],s.push([t.lat+e[0],t.lng+e[1]]);this._shape.setLatLngs(s),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(t){var e;this._shape.setBounds(L.latLngBounds(t,this._oppositeCorner)),e=this._shape.getBounds(),this._moveMarker.setLatLng(e.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var t=this._shape.getBounds(),e=t.getNorthWest(),n=t.getNorthEast(),i=t.getSouthEast(),o=t.getSouthWest();return[e,n,i,o]},_toggleCornerMarkers:function(t){for(var e=0,n=this._resizeMarkers.length;e<n;e++)this._resizeMarkers[e].setOpacity(t)},_repositionCornerMarkers:function(){for(var t=this._getCorners(),e=0,n=this._resizeMarkers.length;e<n;e++)this._resizeMarkers[e].setLatLng(t[e])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getLatLng();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){var t=this._shape.getLatLng(),e=this._getResizeMarkerPoint(t);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(e,this.options.resizeIcon))},_getResizeMarkerPoint:function(t){var e=this._shape._radius*Math.cos(Math.PI/4),n=this._map.project(t);return this._map.unproject([n.x+e,n.y-e])},_move:function(t){var e=this._getResizeMarkerPoint(t);this._resizeMarkers[0].setLatLng(e),this._shape.setLatLng(t),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(t){var e=this._moveMarker.getLatLng(),n=e.distanceTo(t);this._shape.setRadius(n),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart),L.DomEvent.off(this._container,"touchend",this._onTouchEnd),L.DomEvent.off(this._container,"touchmove",this._onTouchMove),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDowm",this._onTouchStart),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave))},_touchEvent:function(t,e){var n={};if("undefined"!=typeof t.touches){if(!t.touches.length)return;n=t.touches[0]}else{if("touch"!==t.pointerType)return;if(n=t,!this._filterClick(t))return}var i=this._map.mouseEventToContainerPoint(n),o=this._map.mouseEventToLayerPoint(n),s=this._map.layerPointToLatLng(o);this._map.fire(e,{latlng:s,layerPoint:o,containerPoint:i,pageX:n.pageX,pageY:n.pageY,originalEvent:t})},_filterClick:function(t){var e=t.timeStamp||t.originalEvent.timeStamp,n=L.DomEvent._lastClick&&e-L.DomEvent._lastClick;return n&&n>100&&n<500||t.target._simulatedClick&&!t._simulated?(L.DomEvent.stop(t),!1):(L.DomEvent._lastClick=e,!0)},_onTouchStart:function(t){if(this._map._loaded){var e="touchstart";this._touchEvent(t,e)}},_onTouchEnd:function(t){if(this._map._loaded){var e="touchend";this._touchEvent(t,e)}},_onTouchCancel:function(t){if(this._map._loaded){var e="touchcancel";this._detectIE()&&(e="pointercancel"),this._touchEvent(t,e)}},_onTouchLeave:function(t){if(this._map._loaded){var e="touchleave";this._touchEvent(t,e)}},_onTouchMove:function(t){if(this._map._loaded){var e="touchmove";this._touchEvent(t,e)}},_detectIE:function(){var e=t.navigator.userAgent,n=e.indexOf("MSIE ");if(n>0)return parseInt(e.substring(n+5,e.indexOf(".",n)),10);var i=e.indexOf("Trident/");if(i>0){var o=e.indexOf("rv:");return parseInt(e.substring(o+3,e.indexOf(".",o)),10)}var s=e.indexOf("Edge/");return s>0&&parseInt(e.substring(s+5,e.indexOf(".",s)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?e.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):e.concat(["touchcancel"]),L.DomUtil.addClass(t,"leaflet-clickable"),L.DomEvent.on(t,"click",this._onMouseClick,this),L.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var n=0;n<e.length;n++)L.DomEvent.on(t,e[n],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var e=t.navigator.userAgent,n=e.indexOf("MSIE ");if(n>0)return parseInt(e.substring(n+5,e.indexOf(".",n)),10);var i=e.indexOf("Trident/");if(i>0){var o=e.indexOf("rv:");return parseInt(e.substring(o+3,e.indexOf(".",o)),10)}var s=e.indexOf("Edge/");return s>0&&parseInt(e.substring(s+5,e.indexOf(".",s)),10)}}),L.LatLngUtil={cloneLatLngs:function(t){for(var e=[],n=0,i=t.length;n<i;n++)Array.isArray(t[n])?e.push(L.LatLngUtil.cloneLatLngs(t[n])):e.push(this.cloneLatLng(t[n]));return e},cloneLatLng:function(t){return L.latLng(t.lat,t.lng)}},L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(t){var e,n,i=t.length,o=0,s=Math.PI/180;if(i>2){for(var r=0;r<i;r++)e=t[r],n=t[(r+1)%i],o+=(n.lng-e.lng)*s*(2+Math.sin(e.lat*s)+Math.sin(n.lat*s));o=6378137*o*6378137/2}return Math.abs(o)},readableArea:function(t,e){var n;return e?n=t>=1e4?(1e-4*t).toFixed(2)+" ha":t.toFixed(2)+" m&sup2;":(t/=.836127,n=t>=3097600?(t/3097600).toFixed(2)+" mi&sup2;":t>=4840?(t/4840).toFixed(2)+" acres":Math.ceil(t)+" yd&sup2;"),n},readableDistance:function(t,e,n,i){var o,s;switch(s="string"==typeof e?e:n?"feet":i?"nauticalMile":e?"metric":"yards"){case"metric":o=t>1e3?(t/1e3).toFixed(2)+" km":Math.ceil(t)+" m";break;case"feet":t*=3.28083,o=Math.ceil(t)+" ft";break;case"nauticalMile":t*=.53996,o=(t/1e3).toFixed(2)+" nm";break;case"yards":default:t*=1.09361,o=t>1760?(t/1760).toFixed(2)+" miles":Math.ceil(t)+" yd"}return o}}),L.Util.extend(L.LineUtil,{segmentsIntersect:function(t,e,n,i){return this._checkCounterclockwise(t,n,i)!==this._checkCounterclockwise(e,n,i)&&this._checkCounterclockwise(t,e,n)!==this._checkCounterclockwise(t,e,i)},_checkCounterclockwise:function(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}}),L.Polyline.include({intersects:function(){var t,e,n,i=this._getProjectedPoints(),o=i?i.length:0;if(this._tooFewPointsForIntersection())return!1;for(t=o-1;t>=3;t--)if(e=i[t-1],n=i[t],this._lineSegmentsIntersectsRange(e,n,t-2))return!0;return!1},newLatLngIntersects:function(t,e){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(t),e)},newPointIntersects:function(t,e){var n=this._getProjectedPoints(),i=n?n.length:0,o=n?n[i-1]:null,s=i-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(o,t,s,e?1:0)},_tooFewPointsForIntersection:function(t){var e=this._getProjectedPoints(),n=e?e.length:0;return n+=t||0,!e||n<=3},_lineSegmentsIntersectsRange:function(t,e,n,i){var o,s,r=this._getProjectedPoints();i=i||0;for(var a=n;a>i;a--)if(o=r[a-1],s=r[a],L.LineUtil.segmentsIntersect(t,e,o,s))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var t=[],e=this._defaultShape(),n=0;n<e.length;n++)t.push(this._map.latLngToLayerPoint(e[n]));return t}}),L.Polygon.include({intersects:function(){var t,e,n,i,o,s=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!(t=L.Polyline.prototype.intersects.call(this))||(e=s.length,n=s[0],i=s[e-1],o=e-2,this._lineSegmentsIntersectsRange(i,n,o,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(t){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,t);var e;this._toolbars={},L.DrawToolbar&&this.options.draw&&(e=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=e,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(e=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=e,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(t){var e,n=L.DomUtil.create("div","leaflet-draw"),i=!1,o="leaflet-draw-toolbar-top";for(var s in this._toolbars)this._toolbars.hasOwnProperty(s)&&(e=this._toolbars[s].addToolbar(t),e&&(i||(L.DomUtil.hasClass(e,o)||L.DomUtil.addClass(e.childNodes[0],o),i=!0),n.appendChild(e)));return n},onRemove:function(){for(var t in this._toolbars)this._toolbars.hasOwnProperty(t)&&this._toolbars[t].removeToolbar()},setDrawingOptions:function(t){for(var e in this._toolbars)this._toolbars[e]instanceof L.DrawToolbar&&this._toolbars[e].setOptions(t)},_toolbarEnabled:function(t){var e=t.target;for(var n in this._toolbars)this._toolbars[n]!==e&&this._toolbars[n].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({includes:[L.Mixin.Events],initialize:function(t){L.setOptions(this,t),this._modes={},this._actionButtons=[],this._activeMode=null},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(t){var e,n=L.DomUtil.create("div","leaflet-draw-section"),i=0,o=this._toolbarClass||"",s=this.getModeHandlers(t);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=t,e=0;e<s.length;e++)s[e].enabled&&this._initModeHandler(s[e].handler,this._toolbarContainer,i++,o,s[e].title);if(i)return this._lastButtonIndex=--i,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),n.appendChild(this._toolbarContainer),n.appendChild(this._actionsContainer),n},removeToolbar:function(){for(var t in this._modes)this._modes.hasOwnProperty(t)&&(this._disposeButton(this._modes[t].button,this._modes[t].handler.enable,this._modes[t].handler),this._modes[t].handler.disable(),this._modes[t].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var e=0,n=this._actionButtons.length;e<n;e++)this._disposeButton(this._actionButtons[e].button,this._actionButtons[e].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(t,e,n,i,o){var s=t.type;this._modes[s]={},this._modes[s].handler=t,this._modes[s].button=this._createButton({type:s,title:o,className:i+"-"+s,container:e,callback:this._modes[s].handler.enable,context:this._modes[s].handler}),this._modes[s].buttonIndex=n,this._modes[s].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_createButton:function(t){var e=L.DomUtil.create("a",t.className||"",t.container),n=L.DomUtil.create("span","sr-only",t.container);return e.href="#",e.appendChild(n),t.title&&(e.title=t.title,n.innerHTML=t.title),t.text&&(e.innerHTML=t.text,n.innerHTML=t.text),L.DomEvent.on(e,"click",L.DomEvent.stopPropagation).on(e,"mousedown",L.DomEvent.stopPropagation).on(e,"dblclick",L.DomEvent.stopPropagation).on(e,"touchstart",L.DomEvent.stopPropagation).on(e,"click",L.DomEvent.preventDefault).on(e,"click",t.callback,t.context),e},_disposeButton:function(t,e){L.DomEvent.off(t,"click",L.DomEvent.stopPropagation).off(t,"mousedown",L.DomEvent.stopPropagation).off(t,"dblclick",L.DomEvent.stopPropagation).off(t,"touchstart",L.DomEvent.stopPropagation).off(t,"click",L.DomEvent.preventDefault).off(t,"click",e)},_handlerActivated:function(t){this.disable(),this._activeMode=this._modes[t.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(t){var e,n,i,o,s=this._actionsContainer,r=this.getActions(t),a=r.length;for(n=0,i=this._actionButtons.length;n<i;n++)this._disposeButton(this._actionButtons[n].button,this._actionButtons[n].callback);for(this._actionButtons=[];s.firstChild;)s.removeChild(s.firstChild);for(var l=0;l<a;l++)"enabled"in r[l]&&!r[l].enabled||(e=L.DomUtil.create("li","",s),o=this._createButton({title:r[l].title,text:r[l].text,container:e,callback:r[l].callback,context:r[l].context}),this._actionButtons.push({button:o,callback:r[l].callback}))},_showActionsToolbar:function(){var t=this._activeMode.buttonIndex,e=this._lastButtonIndex,n=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=n+"px",0===t&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),t===e&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block"},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom")}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(t){this._map=t,this._popupPane=t._panes.popupPane,this._container=t.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(t){return this._container?(t.subtext=t.subtext||"",0!==t.subtext.length||this._singleLineLabel?t.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(t.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+t.subtext+"</span><br />":"")+"<span>"+t.text+"</span>",this):this},updatePosition:function(t){var e=this._map.latLngToLayerPoint(t),n=this._container;return this._container&&(n.style.visibility="inherit",L.DomUtil.setPosition(n,e)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{}
},initialize:function(t){for(var e in this.options)this.options.hasOwnProperty(e)&&t[e]&&(t[e]=L.extend({},this.options[e],t[e]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,t)},getModeHandlers:function(t){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(t,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(t,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(t,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(t,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(t,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker}]},getActions:function(t){return[{enabled:t.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:t.completeShape,context:t},{enabled:t.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:t.deleteLastVertex,context:t},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(t){L.setOptions(this,t);for(var e in this._modes)this._modes.hasOwnProperty(e)&&t.hasOwnProperty(e)&&this._modes[e].handler.setOptions(t[e])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(t){t.edit&&("undefined"==typeof t.edit.selectedPathOptions&&(t.edit.selectedPathOptions=this.options.edit.selectedPathOptions),t.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,t.edit.selectedPathOptions)),t.remove&&(t.remove=L.extend({},this.options.remove,t.remove)),t.poly&&(t.poly=L.extend({},this.options.poly,t.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,t),this._selectedFeatureCount=0},getModeHandlers:function(t){var e=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(t,{featureGroup:e,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(t,{featureGroup:e}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(){return[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}]},addToolbar:function(t){var e=L.Toolbar.prototype.addToolbar.call(this,t);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),e},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var t,e=this.options.featureGroup,n=0!==e.getLayers().length;this.options.edit&&(t=this._modes[L.EditToolbar.Edit.TYPE].button,n?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",n?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(t=this._modes[L.EditToolbar.Delete.TYPE].button,n?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",n?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},includes:L.Mixin.Events,initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.setOptions(this,e),this._featureGroup=e.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),t._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(t){this._revertLayer(t)},this)},save:function(){var t=new L.LayerGroup;this._featureGroup.eachLayer(function(e){e.edited&&(t.addLayer(e),e.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:t})},_backupLayer:function(t){var e=L.Util.stamp(t);this._uneditedLayerProps[e]||(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?this._uneditedLayerProps[e]={latlngs:L.LatLngUtil.cloneLatLngs(t.getLatLngs())}:t instanceof L.Circle?this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng()),radius:t.getRadius()}:t instanceof L.Marker&&(this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(t){var e=L.Util.stamp(t);t.edited=!1,this._uneditedLayerProps.hasOwnProperty(e)&&(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?t.setLatLngs(this._uneditedLayerProps[e].latlngs):t instanceof L.Circle?(t.setLatLng(this._uneditedLayerProps[e].latlng),t.setRadius(this._uneditedLayerProps[e].radius)):t instanceof L.Marker&&t.setLatLng(this._uneditedLayerProps[e].latlng),t.fire("revert-edited",{layer:t}))},_enableLayerEdit:function(t){var e,n,i=t.layer||t.target||t;this._backupLayer(i),this.options.poly&&(n=L.Util.extend({},this.options.poly),i.options.poly=n),this.options.selectedPathOptions&&(e=L.Util.extend({},this.options.selectedPathOptions),e.maintainColor&&(e.color=i.options.color,e.fillColor=i.options.fillColor),i.options.original=L.extend({},i.options),i.options.editing=e),i instanceof L.Marker?(i.editing&&i.editing.enable(),i.dragging.enable(),i.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):i.editing.enable()},_disableLayerEdit:function(t){var e=t.layer||t.target||t;e.edited=!1,e.editing&&e.editing.disable(),delete e.options.editing,delete e.options.original,this._selectedPathOptions&&(e instanceof L.Marker?this._toggleMarkerHighlight(e):(e.setStyle(e.options.previousOptions),delete e.options.previousOptions)),e instanceof L.Marker?(e.dragging.disable(),e.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):e.editing.disable()},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_onMarkerDragEnd:function(t){var e=t.target;e.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:e})},_onTouchMove:function(t){var e=t.originalEvent.changedTouches[0],n=this._map.mouseEventToLayerPoint(e),i=this._map.layerPointToLatLng(n);t.target.setLatLng(i)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},includes:L.Mixin.Events,initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.Util.setOptions(this,e),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(t){this._deletableLayers.addLayer(t),t.fire("revert-deleted",{layer:t})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},_enableLayerDelete:function(t){var e=t.layer||t.target||t;e.on("click",this._removeLayer,this)},_disableLayerDelete:function(t){var e=t.layer||t.target||t;e.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(e)},_removeLayer:function(t){var e=t.layer||t.target||t;this._deletableLayers.removeLayer(e),this._deletedLayers.addLayer(e),e.fire("deleted")},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length}})}(window,document)},{}],298:[function(t,e,n){L.Control.Fullscreen=L.Control.extend({options:{position:"topleft",title:{"false":"View Fullscreen","true":"Exit Fullscreen"}},onAdd:function(t){var e=L.DomUtil.create("div","leaflet-control-fullscreen leaflet-bar leaflet-control");return this.link=L.DomUtil.create("a","leaflet-control-fullscreen-button leaflet-bar-part",e),this.link.href="#",this._map=t,this._map.on("fullscreenchange",this._toggleTitle,this),this._toggleTitle(),L.DomEvent.on(this.link,"click",this._click,this),e},_click:function(t){L.DomEvent.stopPropagation(t),L.DomEvent.preventDefault(t),this._map.toggleFullscreen(this.options)},_toggleTitle:function(){this.link.title=this.options.title[this._map.isFullscreen()]}}),L.Map.include({isFullscreen:function(){return this._isFullscreen||!1},toggleFullscreen:function(t){var e=this.getContainer();this.isFullscreen()?t&&t.pseudoFullscreen?this._disablePseudoFullscreen(e):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this._disablePseudoFullscreen(e):t&&t.pseudoFullscreen?this._enablePseudoFullscreen(e):e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.msRequestFullscreen?e.msRequestFullscreen():this._enablePseudoFullscreen(e)},_enablePseudoFullscreen:function(t){L.DomUtil.addClass(t,"leaflet-pseudo-fullscreen"),this._setFullscreen(!0),this.fire("fullscreenchange")},_disablePseudoFullscreen:function(t){L.DomUtil.removeClass(t,"leaflet-pseudo-fullscreen"),this._setFullscreen(!1),this.fire("fullscreenchange")},_setFullscreen:function(t){this._isFullscreen=t;var e=this.getContainer();t?L.DomUtil.addClass(e,"leaflet-fullscreen-on"):L.DomUtil.removeClass(e,"leaflet-fullscreen-on"),this.invalidateSize()},_onFullscreenChange:function(t){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;e!==this.getContainer()||this._isFullscreen?e!==this.getContainer()&&this._isFullscreen&&(this._setFullscreen(!1),this.fire("fullscreenchange")):(this._setFullscreen(!0),this.fire("fullscreenchange"))}}),L.Map.mergeOptions({fullscreenControl:!1}),L.Map.addInitHook(function(){this.options.fullscreenControl&&(this.fullscreenControl=new L.Control.Fullscreen(this.options.fullscreenControl),this.addControl(this.fullscreenControl));var t;if("onfullscreenchange"in document?t="fullscreenchange":"onmozfullscreenchange"in document?t="mozfullscreenchange":"onwebkitfullscreenchange"in document?t="webkitfullscreenchange":"onmsfullscreenchange"in document&&(t="MSFullscreenChange"),t){var e=L.bind(this._onFullscreenChange,this);this.whenReady(function(){L.DomEvent.on(document,t,e)}),this.on("unload",function(){L.DomEvent.off(document,t,e)})}}),L.control.fullscreen=function(t){return new L.Control.Fullscreen(t)}},{}],299:[function(t,e,n){!function(t,n,i){var o=t.L,s={};s.version="0.7.7","object"==typeof e&&"object"==typeof e.exports?e.exports=s:"function"==typeof define&&define.amd&&define(s),s.noConflict=function(){return t.L=o,this},t.L=s,s.Util={extend:function(t){var e,n,i,o,s=Array.prototype.slice.call(arguments,1);for(n=0,i=s.length;n<i;n++){o=s[n]||{};for(e in o)o.hasOwnProperty(e)&&(t[e]=o[e])}return t},bind:function(t,e){var n=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return t.apply(e,n||arguments)}},stamp:function(){var t=0,e="_leaflet_id";return function(n){return n[e]=n[e]||++t,n[e]}}(),invokeEach:function(t,e,n){var i,o;if("object"==typeof t){o=Array.prototype.slice.call(arguments,3);for(i in t)e.apply(n,[i,t[i]].concat(o));return!0}return!1},limitExecByInterval:function(t,e,n){var i,o;return function s(){var r=arguments;return i?void(o=!0):(i=!0,setTimeout(function(){i=!1,o&&(s.apply(n,r),o=!1)},e),void t.apply(n,r))}},falseFn:function(){return!1},formatNum:function(t,e){var n=Math.pow(10,e||5);return Math.round(t*n)/n},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return s.Util.trim(t).split(/\s+/)},setOptions:function(t,e){return t.options=s.extend({},t.options,e),t.options},getParamString:function(t,e,n){var i=[];for(var o in t)i.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&e.indexOf("?")!==-1?"&":"?")+i.join("&")},template:function(t,e){return t.replace(/\{ *([\w_]+) *\}/g,function(t,n){var o=e[n];if(o===i)throw new Error("No value provided for variable "+t);return"function"==typeof o&&(o=o(e)),o})},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function e(e){var n,i,o=["webkit","moz","o","ms"];for(n=0;n<o.length&&!i;n++)i=t[o[n]+e];return i}function n(e){var n=+new Date,o=Math.max(0,16-(n-i));return i=n+o,t.setTimeout(e,o)}var i=0,o=t.requestAnimationFrame||e("RequestAnimationFrame")||n,r=t.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(e){t.clearTimeout(e)};s.Util.requestAnimFrame=function(e,i,r,a){return e=s.bind(e,i),r&&o===n?void e():o.call(t,e,a)},s.Util.cancelAnimFrame=function(e){e&&r.call(t,e)}}(),s.extend=s.Util.extend,s.bind=s.Util.bind,s.stamp=s.Util.stamp,s.setOptions=s.Util.setOptions,s.Class=function(){},s.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},n=function(){};n.prototype=this.prototype;var i=new n;i.constructor=e,e.prototype=i;for(var o in this)this.hasOwnProperty(o)&&"prototype"!==o&&(e[o]=this[o]);t.statics&&(s.extend(e,t.statics),delete t.statics),t.includes&&(s.Util.extend.apply(null,[i].concat(t.includes)),delete t.includes),t.options&&i.options&&(t.options=s.extend({},i.options,t.options)),s.extend(i,t),i._initHooks=[];var r=this;return e.__super__=r.prototype,i.callInitHooks=function(){if(!this._initHooksCalled){r.prototype.callInitHooks&&r.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=i._initHooks.length;t<e;t++)i._initHooks[t].call(this)}},e},s.Class.include=function(t){s.extend(this.prototype,t)},s.Class.mergeOptions=function(t){s.extend(this.prototype.options,t)},s.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n)};var r="_leaflet_events";s.Mixin={},s.Mixin.Events={addEventListener:function(t,e,n){if(s.Util.invokeEach(t,this.addEventListener,this,e,n))return this;var i,o,a,l,h,c,u,d=this[r]=this[r]||{},p=n&&n!==this&&s.stamp(n);for(t=s.Util.splitWords(t),i=0,o=t.length;i<o;i++)a={action:e,context:n||this},l=t[i],p?(h=l+"_idx",c=h+"_len",u=d[h]=d[h]||{},u[p]||(u[p]=[],d[c]=(d[c]||0)+1),u[p].push(a)):(d[l]=d[l]||[],d[l].push(a));return this},hasEventListeners:function(t){var e=this[r];return!!e&&(t in e&&e[t].length>0||t+"_idx"in e&&e[t+"_idx_len"]>0)},removeEventListener:function(t,e,n){if(!this[r])return this;if(!t)return this.clearAllEventListeners();if(s.Util.invokeEach(t,this.removeEventListener,this,e,n))return this;var i,o,a,l,h,c,u,d,p,m=this[r],f=n&&n!==this&&s.stamp(n);for(t=s.Util.splitWords(t),i=0,o=t.length;i<o;i++)if(a=t[i],c=a+"_idx",u=c+"_len",d=m[c],e){if(l=f&&d?d[f]:m[a]){for(h=l.length-1;h>=0;h--)l[h].action!==e||n&&l[h].context!==n||(p=l.splice(h,1),p[0].action=s.Util.falseFn);n&&d&&0===l.length&&(delete d[f],m[u]--)}}else delete m[a],delete m[c],delete m[u];return this},clearAllEventListeners:function(){return delete this[r],this},fireEvent:function(t,e){if(!this.hasEventListeners(t))return this;var n,i,o,a,l,h=s.Util.extend({},e,{type:t,target:this}),c=this[r];if(c[t])for(n=c[t].slice(),i=0,o=n.length;i<o;i++)n[i].action.call(n[i].context,h);a=c[t+"_idx"];for(l in a)if(n=a[l].slice())for(i=0,o=n.length;i<o;i++)n[i].action.call(n[i].context,h);return this},addOneTimeEventListener:function(t,e,n){if(s.Util.invokeEach(t,this.addOneTimeEventListener,this,e,n))return this;var i=s.bind(function(){this.removeEventListener(t,e,n).removeEventListener(t,i,n)},this);return this.addEventListener(t,e,n).addEventListener(t,i,n)}},s.Mixin.Events.on=s.Mixin.Events.addEventListener,s.Mixin.Events.off=s.Mixin.Events.removeEventListener,s.Mixin.Events.once=s.Mixin.Events.addOneTimeEventListener,s.Mixin.Events.fire=s.Mixin.Events.fireEvent,function(){var e="ActiveXObject"in t,o=e&&!n.addEventListener,r=navigator.userAgent.toLowerCase(),a=r.indexOf("webkit")!==-1,l=r.indexOf("chrome")!==-1,h=r.indexOf("phantom")!==-1,c=r.indexOf("android")!==-1,u=r.search("android [23]")!==-1,d=r.indexOf("gecko")!==-1,p=typeof orientation!=i+"",m=!t.PointerEvent&&t.MSPointerEvent,f=t.PointerEvent&&t.navigator.pointerEnabled||m,_="devicePixelRatio"in t&&t.devicePixelRatio>1||"matchMedia"in t&&t.matchMedia("(min-resolution:144dpi)")&&t.matchMedia("(min-resolution:144dpi)").matches,g=n.documentElement,v=e&&"transition"in g.style,y="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix&&!u,b="MozPerspective"in g.style,x="OTransition"in g.style,L=!t.L_DISABLE_3D&&(v||y||b||x)&&!h,w=!t.L_NO_TOUCH&&!h&&(f||"ontouchstart"in t||t.DocumentTouch&&n instanceof t.DocumentTouch);s.Browser={ie:e,ielt9:o,webkit:a,gecko:d&&!a&&!t.opera&&!e,android:c,android23:u,chrome:l,ie3d:v,webkit3d:y,gecko3d:b,opera3d:x,any3d:L,mobile:p,mobileWebkit:p&&a,mobileWebkit3d:p&&y,mobileOpera:p&&t.opera,touch:w,msPointer:m,pointer:f,retina:_}}(),s.Point=function(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e},s.Point.prototype={clone:function(){return new s.Point(this.x,this.y)},add:function(t){return this.clone()._add(s.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(s.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(t){t=s.point(t);var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return t=s.point(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=s.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+s.Util.formatNum(this.x)+", "+s.Util.formatNum(this.y)+")"}},s.point=function(t,e,n){return t instanceof s.Point?t:s.Util.isArray(t)?new s.Point(t[0],t[1]):t===i||null===t?t:new s.Point(t,e,n)},s.Bounds=function(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])},s.Bounds.prototype={extend:function(t){return t=s.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new s.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new s.Point(this.min.x,this.max.y)},getTopRight:function(){return new s.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return t="number"==typeof t[0]||t instanceof s.Point?s.point(t):s.bounds(t),t instanceof s.Bounds?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=s.bounds(t);var e=this.min,n=this.max,i=t.min,o=t.max,r=o.x>=e.x&&i.x<=n.x,a=o.y>=e.y&&i.y<=n.y;return r&&a},isValid:function(){return!(!this.min||!this.max)}},s.bounds=function(t,e){return!t||t instanceof s.Bounds?t:new s.Bounds(t,e)},s.Transformation=function(t,e,n,i){this._a=t,this._b=e,this._c=n,this._d=i},s.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new s.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},s.DomUtil={get:function(t){return"string"==typeof t?n.getElementById(t):t},getStyle:function(t,e){var i=t.style[e];if(!i&&t.currentStyle&&(i=t.currentStyle[e]),(!i||"auto"===i)&&n.defaultView){var o=n.defaultView.getComputedStyle(t,null);i=o?o[e]:null}return"auto"===i?null:i},getViewportOffset:function(t){var e,i=0,o=0,r=t,a=n.body,l=n.documentElement;do{if(i+=r.offsetTop||0,o+=r.offsetLeft||0,i+=parseInt(s.DomUtil.getStyle(r,"borderTopWidth"),10)||0,o+=parseInt(s.DomUtil.getStyle(r,"borderLeftWidth"),10)||0,e=s.DomUtil.getStyle(r,"position"),r.offsetParent===a&&"absolute"===e)break;if("fixed"===e){i+=a.scrollTop||l.scrollTop||0,o+=a.scrollLeft||l.scrollLeft||0;break}if("relative"===e&&!r.offsetLeft){var h=s.DomUtil.getStyle(r,"width"),c=s.DomUtil.getStyle(r,"max-width"),u=r.getBoundingClientRect();"none"===h&&"none"===c||(o+=u.left+r.clientLeft),i+=u.top+(a.scrollTop||l.scrollTop||0);break}r=r.offsetParent}while(r);r=t;do{if(r===a)break;i-=r.scrollTop||0,o-=r.scrollLeft||0,r=r.parentNode}while(r);return new s.Point(o,i)},documentIsLtr:function(){return s.DomUtil._docIsLtrCached||(s.DomUtil._docIsLtrCached=!0,s.DomUtil._docIsLtr="ltr"===s.DomUtil.getStyle(n.body,"direction")),s.DomUtil._docIsLtr},create:function(t,e,i){var o=n.createElement(t);return o.className=e,i&&i.appendChild(o),o},hasClass:function(t,e){if(t.classList!==i)return t.classList.contains(e);var n=s.DomUtil._getClass(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)},addClass:function(t,e){if(t.classList!==i)for(var n=s.Util.splitWords(e),o=0,r=n.length;o<r;o++)t.classList.add(n[o]);else if(!s.DomUtil.hasClass(t,e)){var a=s.DomUtil._getClass(t);s.DomUtil._setClass(t,(a?a+" ":"")+e)}},removeClass:function(t,e){t.classList!==i?t.classList.remove(e):s.DomUtil._setClass(t,s.Util.trim((" "+s.DomUtil._getClass(t)+" ").replace(" "+e+" "," ")))},_setClass:function(t,e){t.className.baseVal===i?t.className=e:t.className.baseVal=e},_getClass:function(t){return t.className.baseVal===i?t.className:t.className.baseVal},setOpacity:function(t,e){if("opacity"in t.style)t.style.opacity=e;else if("filter"in t.style){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(o){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}},testProp:function(t){for(var e=n.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1},getTranslateString:function(t){var e=s.Browser.webkit3d,n="translate"+(e?"3d":"")+"(",i=(e?",0":"")+")";return n+t.x+"px,"+t.y+"px"+i},getScaleString:function(t,e){var n=s.DomUtil.getTranslateString(e.add(e.multiplyBy(-1*t))),i=" scale("+t+") ";return n+i},setPosition:function(t,e,n){t._leaflet_pos=e,!n&&s.Browser.any3d?t.style[s.DomUtil.TRANSFORM]=s.DomUtil.getTranslateString(e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos}},s.DomUtil.TRANSFORM=s.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),s.DomUtil.TRANSITION=s.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),s.DomUtil.TRANSITION_END="webkitTransition"===s.DomUtil.TRANSITION||"OTransition"===s.DomUtil.TRANSITION?s.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in n)s.extend(s.DomUtil,{disableTextSelection:function(){s.DomEvent.on(t,"selectstart",s.DomEvent.preventDefault)},enableTextSelection:function(){s.DomEvent.off(t,"selectstart",s.DomEvent.preventDefault)}});else{var e=s.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);s.extend(s.DomUtil,{disableTextSelection:function(){if(e){var t=n.documentElement.style;this._userSelect=t[e],t[e]="none"}},enableTextSelection:function(){e&&(n.documentElement.style[e]=this._userSelect,delete this._userSelect)}})}s.extend(s.DomUtil,{disableImageDrag:function(){s.DomEvent.on(t,"dragstart",s.DomEvent.preventDefault)},enableImageDrag:function(){s.DomEvent.off(t,"dragstart",s.DomEvent.preventDefault)}})}(),s.LatLng=function(t,e,n){if(t=parseFloat(t),e=parseFloat(e),isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=t,this.lng=e,n!==i&&(this.alt=parseFloat(n))},s.extend(s.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),s.LatLng.prototype={equals:function(t){if(!t)return!1;t=s.latLng(t);var e=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return e<=s.LatLng.MAX_MARGIN},toString:function(t){return"LatLng("+s.Util.formatNum(this.lat,t)+", "+s.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){t=s.latLng(t);var e=6378137,n=s.LatLng.DEG_TO_RAD,i=(t.lat-this.lat)*n,o=(t.lng-this.lng)*n,r=this.lat*n,a=t.lat*n,l=Math.sin(i/2),h=Math.sin(o/2),c=l*l+h*h*Math.cos(r)*Math.cos(a);return 2*e*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))},wrap:function(t,e){var n=this.lng;return t=t||-180,e=e||180,n=(n+e)%(e-t)+(n<t||n===e?e:t),new s.LatLng(this.lat,n)}},s.latLng=function(t,e){return t instanceof s.LatLng?t:s.Util.isArray(t)?"number"==typeof t[0]||"string"==typeof t[0]?new s.LatLng(t[0],t[1],t[2]):null:t===i||null===t?t:"object"==typeof t&&"lat"in t?new s.LatLng(t.lat,"lng"in t?t.lng:t.lon):e===i?null:new s.LatLng(t,e)},s.LatLngBounds=function(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])},s.LatLngBounds.prototype={extend:function(t){if(!t)return this;var e=s.latLng(t);return t=null!==e?e:s.latLngBounds(t),t instanceof s.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(t.lat,this._southWest.lat),this._southWest.lng=Math.min(t.lng,this._southWest.lng),this._northEast.lat=Math.max(t.lat,this._northEast.lat),this._northEast.lng=Math.max(t.lng,this._northEast.lng)):(this._southWest=new s.LatLng(t.lat,t.lng),this._northEast=new s.LatLng(t.lat,t.lng)):t instanceof s.LatLngBounds&&(this.extend(t._southWest),this.extend(t._northEast)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,o=Math.abs(e.lng-n.lng)*t;return new s.LatLngBounds(new s.LatLng(e.lat-i,e.lng-o),new s.LatLng(n.lat+i,n.lng+o))},getCenter:function(){return new s.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new s.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new s.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof s.LatLng?s.latLng(t):s.latLngBounds(t);var e,n,i=this._southWest,o=this._northEast;return t instanceof s.LatLngBounds?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=o.lat&&e.lng>=i.lng&&n.lng<=o.lng},intersects:function(t){t=s.latLngBounds(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>=e.lat&&i.lat<=n.lat,a=o.lng>=e.lng&&i.lng<=n.lng;return r&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return!!t&&(t=s.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},s.latLngBounds=function(t,e){return!t||t instanceof s.LatLngBounds?t:new s.LatLngBounds(t,e)},s.Projection={},s.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(t){var e=s.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),o=t.lng*e,r=i*e;return r=Math.log(Math.tan(Math.PI/4+r/2)),new s.Point(o,r)},unproject:function(t){var e=s.LatLng.RAD_TO_DEG,n=t.x*e,i=(2*Math.atan(Math.exp(t.y))-Math.PI/2)*e;return new s.LatLng(i,n)}},s.Projection.LonLat={project:function(t){return new s.Point(t.lng,t.lat)},unproject:function(t){return new s.LatLng(t.y,t.x)}},s.CRS={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);
return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},scale:function(t){return 256*Math.pow(2,t)},getSize:function(t){var e=this.scale(t);return s.point(e,e)}},s.CRS.Simple=s.extend({},s.CRS,{projection:s.Projection.LonLat,transformation:new s.Transformation(1,0,(-1),0),scale:function(t){return Math.pow(2,t)}}),s.CRS.EPSG3857=s.extend({},s.CRS,{code:"EPSG:3857",projection:s.Projection.SphericalMercator,transformation:new s.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){var e=this.projection.project(t),n=6378137;return e.multiplyBy(n)}}),s.CRS.EPSG900913=s.extend({},s.CRS.EPSG3857,{code:"EPSG:900913"}),s.CRS.EPSG4326=s.extend({},s.CRS,{code:"EPSG:4326",projection:s.Projection.LonLat,transformation:new s.Transformation(1/360,.5,-1/360,.5)}),s.Map=s.Class.extend({includes:s.Mixin.Events,options:{crs:s.CRS.EPSG3857,fadeAnimation:s.DomUtil.TRANSITION&&!s.Browser.android23,trackResize:!0,markerZoomAnimation:s.DomUtil.TRANSITION&&s.Browser.any3d},initialize:function(t,e){e=s.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=s.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.center&&e.zoom!==i&&this.setView(s.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(e.layers)},setView:function(t,e){return e=e===i?this.getZoom():e,this._resetView(s.latLng(t),this._limitZoom(e)),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=this._limitZoom(t),this)},zoomIn:function(t,e){return this.setZoom(this._zoom+(t||1),e)},zoomOut:function(t,e){return this.setZoom(this._zoom-(t||1),e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),o=this.getSize().divideBy(2),r=t instanceof s.Point?t:this.latLngToContainerPoint(t),a=r.subtract(o).multiplyBy(1-1/i),l=this.containerPointToLatLng(o.add(a));return this.setView(l,e,{zoom:n})},fitBounds:function(t,e){e=e||{},t=t.getBounds?t.getBounds():s.latLngBounds(t);var n=s.point(e.paddingTopLeft||e.padding||[0,0]),i=s.point(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,n.add(i));o=e.maxZoom?Math.min(e.maxZoom,o):o;var r=i.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),o),l=this.project(t.getNorthEast(),o),h=this.unproject(a.add(l).divideBy(2).add(r),o);return this.setView(h,o,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t){return this.fire("movestart"),this._rawPanBy(s.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){return t=s.latLngBounds(t),this.options.maxBounds=t,t?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(t,e){var n=this.getCenter(),i=this._limitCenter(n,this._zoom,t);return n.equals(i)?this:this.panTo(i,e)},addLayer:function(t){var e=s.stamp(t);return this._layers[e]?this:(this._layers[e]=t,!t.options||isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[e]=t,this._updateZoomLevels()),this.options.zoomAnimation&&s.TileLayer&&t instanceof s.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,t.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(t),this)},removeLayer:function(t){var e=s.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&this.fire("layerremove",{layer:t}),this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels()),this.options.zoomAnimation&&s.TileLayer&&t instanceof s.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,t.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(t){return!!t&&s.stamp(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},invalidateSize:function(t){if(!this._loaded)return this;t=s.extend({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var n=this.getSize(),i=e.divideBy(2).round(),o=n.divideBy(2).round(),r=i.subtract(o);return r.x||r.y?(t.animate&&t.pan?this.panBy(r):(t.pan&&this._rawPanBy(r),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(t){this._container._leaflet=i}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new s.LatLngBounds(e,n)},getMinZoom:function(){return this.options.minZoom===i?this._layersMinZoom===i?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===i?this._layersMaxZoom===i?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=s.latLngBounds(t);var i,o=this.getMinZoom()-(e?1:0),r=this.getMaxZoom(),a=this.getSize(),l=t.getNorthWest(),h=t.getSouthEast(),c=!0;n=s.point(n||[0,0]);do o++,i=this.project(h,o).subtract(this.project(l,o)).add(n),c=e?i.x<a.x||i.y<a.y:a.contains(i);while(c&&o<=r);return c&&e?null:e?o:o-1},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new s.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var t=this._getTopLeftPoint();return new s.Bounds(t,t.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t){var e=this.options.crs;return e.scale(t)/e.scale(this._zoom)},getScaleZoom:function(t){return this._zoom+Math.log(t)/Math.LN2},project:function(t,e){return e=e===i?this._zoom:e,this.options.crs.latLngToPoint(s.latLng(t),e)},unproject:function(t,e){return e=e===i?this._zoom:e,this.options.crs.pointToLatLng(s.point(t),e)},layerPointToLatLng:function(t){var e=s.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(s.latLng(t))._round();return e._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(t){return s.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return s.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(s.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(s.latLng(t)))},mouseEventToContainerPoint:function(t){return s.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=s.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet)throw new Error("Map container is already initialized.");e._leaflet=!0},_initLayout:function(){var t=this._container;s.DomUtil.addClass(t,"leaflet-container"+(s.Browser.touch?" leaflet-touch":"")+(s.Browser.retina?" leaflet-retina":"")+(s.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var e=s.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=t.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),t.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),t.shadowPane=this._createPane("leaflet-shadow-pane"),t.overlayPane=this._createPane("leaflet-overlay-pane"),t.markerPane=this._createPane("leaflet-marker-pane"),t.popupPane=this._createPane("leaflet-popup-pane");var e=" leaflet-zoom-hide";this.options.markerZoomAnimation||(s.DomUtil.addClass(t.markerPane,e),s.DomUtil.addClass(t.shadowPane,e),s.DomUtil.addClass(t.popupPane,e))},_createPane:function(t,e){return s.DomUtil.create("div",t,e||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(t){t=t?s.Util.isArray(t)?t:[t]:[];for(var e=0,n=t.length;e<n;e++)this.addLayer(t[e])},_resetView:function(t,e,n,i){var o=this._zoom!==e;i||(this.fire("movestart"),o&&this.fire("zoomstart")),this._zoom=e,this._initialCenter=t,this._initialTopLeftPoint=this._getNewTopLeftPoint(t),n?this._initialTopLeftPoint._add(this._getMapPanePos()):s.DomUtil.setPosition(this._mapPane,new s.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var r=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!n}),r&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(o||i)&&this.fire("zoomend"),this.fire("moveend",{hard:!n})},_rawPanBy:function(t){s.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var t,e=1/0,n=-(1/0),o=this._getZoomSpan();for(t in this._zoomBoundLayers){var s=this._zoomBoundLayers[t];isNaN(s.options.minZoom)||(e=Math.min(e,s.options.minZoom)),isNaN(s.options.maxZoom)||(n=Math.max(n,s.options.maxZoom))}t===i?this._layersMaxZoom=this._layersMinZoom=i:(this._layersMaxZoom=n,this._layersMinZoom=e),o!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){if(s.DomEvent){e=e||"on",s.DomEvent[e](this._container,"click",this._onMouseClick,this);var n,i,o=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(n=0,i=o.length;n<i;n++)s.DomEvent[e](this._container,o[n],this._fireMouseEvent,this);this.options.trackResize&&s.DomEvent[e](t,"resize",this._onResize,this)}},_onResize:function(){s.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=s.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(t){!this._loaded||!t._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||s.DomEvent._skipped(t)||(this.fire("preclick"),this._fireMouseEvent(t))},_fireMouseEvent:function(t){if(this._loaded&&!s.DomEvent._skipped(t)){var e=t.type;if(e="mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,this.hasEventListeners(e)){"contextmenu"===e&&s.DomEvent.preventDefault(t);var n=this.mouseEventToContainerPoint(t),i=this.containerPointToLayerPoint(n),o=this.layerPointToLatLng(i);this.fire(e,{latlng:o,layerPoint:i,containerPoint:n,originalEvent:t})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,this):this.on("load",t,e),this},_layerAdd:function(t){t.onAdd(this),this.fire("layeradd",{layer:t})},_getMapPanePos:function(){return s.DomUtil.getPosition(this._mapPane)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewTopLeftPoint(n,e).add(this._getMapPanePos());return this.project(t,e)._subtract(i)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),o=this.getSize().divideBy(2),r=new s.Bounds(i.subtract(o),i.add(o)),a=this._getBoundsOffset(r,n,e);return this.unproject(i.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new s.Bounds(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=this.project(e.getNorthWest(),n).subtract(t.min),o=this.project(e.getSouthEast(),n).subtract(t.max),r=this._rebound(i.x,-o.x),a=this._rebound(i.y,-o.y);return new s.Point(r,a)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom();return Math.max(e,Math.min(n,t))}}),s.map=function(t,e){return new s.Map(t,e)},s.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(t){var e=s.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),o=this.R_MAJOR,r=this.R_MINOR,a=t.lng*e*o,l=i*e,h=r/o,c=Math.sqrt(1-h*h),u=c*Math.sin(l);u=Math.pow((1-u)/(1+u),.5*c);var d=Math.tan(.5*(.5*Math.PI-l))/u;return l=-o*Math.log(d),new s.Point(a,l)},unproject:function(t){for(var e,n=s.LatLng.RAD_TO_DEG,i=this.R_MAJOR,o=this.R_MINOR,r=t.x*n/i,a=o/i,l=Math.sqrt(1-a*a),h=Math.exp(-t.y/i),c=Math.PI/2-2*Math.atan(h),u=15,d=1e-7,p=u,m=.1;Math.abs(m)>d&&--p>0;)e=l*Math.sin(c),m=Math.PI/2-2*Math.atan(h*Math.pow((1-e)/(1+e),.5*l))-c,c+=m;return new s.LatLng(c*n,r)}},s.CRS.EPSG3395=s.extend({},s.CRS,{code:"EPSG:3395",projection:s.Projection.Mercator,transformation:function(){var t=s.Projection.Mercator,e=t.R_MAJOR,n=.5/(Math.PI*e);return new s.Transformation(n,.5,(-n),.5)}()}),s.TileLayer=s.Class.extend({includes:s.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:s.Browser.mobile,updateWhenIdle:s.Browser.mobile},initialize:function(t,e){e=s.setOptions(this,e),e.detectRetina&&s.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomOffset++,e.minZoom>0&&e.minZoom--,this.options.maxZoom--),e.bounds&&(e.bounds=s.latLngBounds(e.bounds)),this._url=t;var n=this.options.subdomains;"string"==typeof n&&(this.options.subdomains=n.split(""))},onAdd:function(t){this._map=t,this._animated=t._zoomAnimated,this._initContainer(),t.on({viewreset:this._reset,moveend:this._update},this),this._animated&&t.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=s.Util.limitExecByInterval(this._update,150,this),t.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this._container.parentNode.removeChild(this._container),t.off({viewreset:this._reset,moveend:this._update},this),this._animated&&t.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||t.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var t=this._map._panes.tilePane;return this._container&&(t.appendChild(this._container),this._setAutoZIndex(t,Math.max)),this},bringToBack:function(){var t=this._map._panes.tilePane;return this._container&&(t.insertBefore(this._container,t.firstChild),this._setAutoZIndex(t,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==i&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t,e){var n,i,o,s=t.children,r=-e(1/0,-(1/0));for(i=0,o=s.length;i<o;i++)s[i]!==this._container&&(n=parseInt(s[i].style.zIndex,10),isNaN(n)||(r=e(r,n)));this.options.zIndex=this._container.style.zIndex=(isFinite(r)?r:0)+e(1,-1)},_updateOpacity:function(){var t,e=this._tiles;if(s.Browser.ielt9)for(t in e)s.DomUtil.setOpacity(e[t],this.options.opacity);else s.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var t=this._map._panes.tilePane;if(!this._container){if(this._container=s.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var e="leaflet-tile-container";this._bgBuffer=s.DomUtil.create("div",e,this._container),this._tileContainer=s.DomUtil.create("div",e,this._container)}else this._tileContainer=this._container;t.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(t){for(var e in this._tiles)this.fire("tileunload",{tile:this._tiles[e]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&t&&t.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var t=this._map,e=t.getZoom()+this.options.zoomOffset,n=this.options.maxNativeZoom,i=this.options.tileSize;return n&&e>n&&(i=Math.round(t.getZoomScale(e)/t.getZoomScale(n)*i)),i},_update:function(){if(this._map){var t=this._map,e=t.getPixelBounds(),n=t.getZoom(),i=this._getTileSize();if(!(n>this.options.maxZoom||n<this.options.minZoom)){var o=s.bounds(e.min.divideBy(i)._floor(),e.max.divideBy(i)._floor());this._addTilesFromCenterOut(o),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(o)}}},_addTilesFromCenterOut:function(t){var e,i,o,r=[],a=t.getCenter();for(e=t.min.y;e<=t.max.y;e++)for(i=t.min.x;i<=t.max.x;i++)o=new s.Point(i,e),this._tileShouldBeLoaded(o)&&r.push(o);var l=r.length;if(0!==l){r.sort(function(t,e){return t.distanceTo(a)-e.distanceTo(a)});var h=n.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=l,i=0;i<l;i++)this._addTile(r[i],h);this._tileContainer.appendChild(h)}},_tileShouldBeLoaded:function(t){if(t.x+":"+t.y in this._tiles)return!1;var e=this.options;if(!e.continuousWorld){var n=this._getWrapTileNum();if(e.noWrap&&(t.x<0||t.x>=n.x)||t.y<0||t.y>=n.y)return!1}if(e.bounds){var i=this._getTileSize(),o=t.multiplyBy(i),s=o.add([i,i]),r=this._map.unproject(o),a=this._map.unproject(s);if(e.continuousWorld||e.noWrap||(r=r.wrap(),a=a.wrap()),!e.bounds.intersects([r,a]))return!1}return!0},_removeOtherTiles:function(t){var e,n,i,o;for(o in this._tiles)e=o.split(":"),n=parseInt(e[0],10),i=parseInt(e[1],10),(n<t.min.x||n>t.max.x||i<t.min.y||i>t.max.y)&&this._removeTile(o)},_removeTile:function(t){var e=this._tiles[t];this.fire("tileunload",{tile:e,url:e.src}),this.options.reuseTiles?(s.DomUtil.removeClass(e,"leaflet-tile-loaded"),this._unusedTiles.push(e)):e.parentNode===this._tileContainer&&this._tileContainer.removeChild(e),s.Browser.android||(e.onload=null,e.src=s.Util.emptyImageUrl),delete this._tiles[t]},_addTile:function(t,e){var n=this._getTilePos(t),i=this._getTile();s.DomUtil.setPosition(i,n,s.Browser.chrome),this._tiles[t.x+":"+t.y]=i,this._loadTile(i,t),i.parentNode!==this._tileContainer&&e.appendChild(i)},_getZoomForUrl:function(){var t=this.options,e=this._map.getZoom();return t.zoomReverse&&(e=t.maxZoom-e),e+=t.zoomOffset,t.maxNativeZoom?Math.min(e,t.maxNativeZoom):e},_getTilePos:function(t){var e=this._map.getPixelOrigin(),n=this._getTileSize();return t.multiplyBy(n).subtract(e)},getTileUrl:function(t){return s.Util.template(this._url,s.extend({s:this._getSubdomain(t),z:t.z,x:t.x,y:t.y},this.options))},_getWrapTileNum:function(){var t=this._map.options.crs,e=t.getSize(this._map.getZoom());return e.divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(t){var e=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(t.x=(t.x%e.x+e.x)%e.x),this.options.tms&&(t.y=e.y-t.y-1),t.z=this._getZoomForUrl()},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var t=this._unusedTiles.pop();return this._resetTile(t),t}return this._createTile()},_resetTile:function(){},_createTile:function(){var t=s.DomUtil.create("img","leaflet-tile");return t.style.width=t.style.height=this._getTileSize()+"px",t.galleryimg="no",t.onselectstart=t.onmousemove=s.Util.falseFn,s.Browser.ielt9&&this.options.opacity!==i&&s.DomUtil.setOpacity(t,this.options.opacity),s.Browser.mobileWebkit3d&&(t.style.WebkitBackfaceVisibility="hidden"),t},_loadTile:function(t,e){t._layer=this,t.onload=this._tileOnLoad,t.onerror=this._tileOnError,this._adjustTilePoint(e),t.src=this.getTileUrl(e),this.fire("tileloadstart",{tile:t,url:t.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&s.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(s.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var t=this._layer;this.src!==s.Util.emptyImageUrl&&(s.DomUtil.addClass(this,"leaflet-tile-loaded"),t.fire("tileload",{tile:this,url:this.src})),t._tileLoaded()},_tileOnError:function(){var t=this._layer;t.fire("tileerror",{tile:this,url:this.src});var e=t.options.errorTileUrl;e&&(this.src=e),t._tileLoaded()}}),s.tileLayer=function(t,e){return new s.TileLayer(t,e)},s.TileLayer.WMS=s.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(t,e){this._url=t;var n=s.extend({},this.defaultWmsParams),i=e.tileSize||this.options.tileSize;e.detectRetina&&s.Browser.retina?n.width=n.height=2*i:n.width=n.height=i;for(var o in e)this.options.hasOwnProperty(o)||"crs"===o||(n[o]=e[o]);this.wmsParams=n,s.setOptions(this,e)},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,s.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._map,n=this.options.tileSize,i=t.multiplyBy(n),o=i.add([n,n]),r=this._crs.project(e.unproject(i,t.z)),a=this._crs.project(e.unproject(o,t.z)),l=this._wmsVersion>=1.3&&this._crs===s.CRS.EPSG4326?[a.y,r.x,r.y,a.x].join(","):[r.x,a.y,a.x,r.y].join(","),h=s.Util.template(this._url,{s:this._getSubdomain(t)});return h+s.Util.getParamString(this.wmsParams,h,!0)+"&BBOX="+l},setParams:function(t,e){return s.extend(this.wmsParams,t),e||this.redraw(),this}}),s.tileLayer.wms=function(t,e){return new s.TileLayer.WMS(t,e)},s.TileLayer.Canvas=s.TileLayer.extend({options:{async:!1},initialize:function(t){s.setOptions(this,t)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var t in this._tiles)this._redrawTile(this._tiles[t]);return this},_redrawTile:function(t){this.drawTile(t,t._tilePoint,this._map._zoom)},_createTile:function(){var t=s.DomUtil.create("canvas","leaflet-tile");return t.width=t.height=this.options.tileSize,t.onselectstart=t.onmousemove=s.Util.falseFn,t},_loadTile:function(t,e){t._layer=this,t._tilePoint=e,this._redrawTile(t),this.options.async||this.tileDrawn(t)},drawTile:function(){},tileDrawn:function(t){this._tileOnLoad.call(t)}}),s.tileLayer.canvas=function(t){return new s.TileLayer.Canvas(t)},s.ImageOverlay=s.Class.extend({includes:s.Mixin.Events,options:{opacity:1},initialize:function(t,e,n){this._url=t,this._bounds=s.latLngBounds(e),s.setOptions(this,n)},onAdd:function(t){this._map=t,this._image||this._initImage(),t._panes.overlayPane.appendChild(this._image),t.on("viewreset",this._reset,this),t.options.zoomAnimation&&s.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image),t.off("viewreset",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var t=this._map._panes.overlayPane;return this._image&&t.insertBefore(this._image,t.firstChild),this},setUrl:function(t){this._url=t,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=s.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&s.Browser.any3d?s.DomUtil.addClass(this._image,"leaflet-zoom-animated"):s.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),s.extend(this._image,{galleryimg:"no",onselectstart:s.Util.falseFn,onmousemove:s.Util.falseFn,onload:s.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(t){var e=this._map,n=this._image,i=e.getZoomScale(t.zoom),o=this._bounds.getNorthWest(),r=this._bounds.getSouthEast(),a=e._latLngToNewLayerPoint(o,t.zoom,t.center),l=e._latLngToNewLayerPoint(r,t.zoom,t.center)._subtract(a),h=a._add(l._multiplyBy(.5*(1-1/i)));n.style[s.DomUtil.TRANSFORM]=s.DomUtil.getTranslateString(h)+" scale("+i+") "},_reset:function(){var t=this._image,e=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),n=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);s.DomUtil.setPosition(t,e),t.style.width=n.x+"px",t.style.height=n.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){s.DomUtil.setOpacity(this._image,this.options.opacity)}}),s.imageOverlay=function(t,e,n){return new s.ImageOverlay(t,e,n)},s.Icon=s.Class.extend({options:{className:""},initialize:function(t){s.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i;return i=e&&"IMG"===e.tagName?this._createImg(n,e):this._createImg(n),this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n,i=this.options,o=s.point(i[e+"Size"]);n="shadow"===e?s.point(i.shadowAnchor||i.iconAnchor):s.point(i.iconAnchor),!n&&o&&(n=o.divideBy(2,!0)),t.className="leaflet-marker-"+e+" "+i.className,n&&(t.style.marginLeft=-n.x+"px",t.style.marginTop=-n.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return e=e||n.createElement("img"),e.src=t,e},_getIconUrl:function(t){return s.Browser.retina&&this.options[t+"RetinaUrl"]?this.options[t+"RetinaUrl"]:this.options[t+"Url"]}}),s.icon=function(t){return new s.Icon(t)},s.Icon.Default=s.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(t){var e=t+"Url";if(this.options[e])return this.options[e];s.Browser.retina&&"icon"===t&&(t+="-2x");var n=s.Icon.Default.imagePath;if(!n)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return n+"/marker-"+t+".png"}}),s.Icon.Default.imagePath=function(){var t,e,i,o,s,r=n.getElementsByTagName("script"),a=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(t=0,e=r.length;t<e;t++)if(i=r[t].src,o=i.match(a))return s=i.split(a)[0],(s?s+"/":"")+"images"}(),s.Marker=s.Class.extend({includes:s.Mixin.Events,options:{icon:new s.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(t,e){s.setOptions(this,e),this._latlng=s.latLng(t)},onAdd:function(t){this._map=t,t.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),t.options.zoomAnimation&&t.options.markerZoomAnimation&&t.on("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),t.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=s.latLng(t),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update(),this},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){return this._icon&&this._setPos(this._map.latLngToLayerPoint(this._latlng).round()),this},_initIcon:function(){var t=this.options,e=this._map,n=e.options.zoomAnimation&&e.options.markerZoomAnimation,i=n?"leaflet-zoom-animated":"leaflet-zoom-hide",o=t.icon.createIcon(this._icon),r=!1;o!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(o.title=t.title),t.alt&&(o.alt=t.alt)),s.DomUtil.addClass(o,i),t.keyboard&&(o.tabIndex="0"),this._icon=o,this._initInteraction(),t.riseOnHover&&s.DomEvent.on(o,"mouseover",this._bringToFront,this).on(o,"mouseout",this._resetZIndex,this);var a=t.icon.createShadow(this._shadow),l=!1;a!==this._shadow&&(this._removeShadow(),l=!0),a&&s.DomUtil.addClass(a,i),this._shadow=a,t.opacity<1&&this._updateOpacity();var h=this._map._panes;r&&h.markerPane.appendChild(this._icon),a&&l&&h.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&s.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(t){s.DomUtil.setPosition(this._icon,t),this._shadow&&s.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];s.DomUtil.addClass(t,"leaflet-clickable"),s.DomEvent.on(t,"click",this._onMouseClick,this),s.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var n=0;n<e.length;n++)s.DomEvent.on(t,e[n],this._fireMouseEvent,this);s.Handler.MarkerDrag&&(this.dragging=new s.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(t){var e=this.dragging&&this.dragging.moved();(this.hasEventListeners(t.type)||e)&&s.DomEvent.stopPropagation(t),e||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(t.type,{originalEvent:t,latlng:this._latlng})},_onKeyPress:function(t){13===t.keyCode&&this.fire("click",{originalEvent:t,latlng:this._latlng})},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t,latlng:this._latlng}),"contextmenu"===t.type&&this.hasEventListeners(t.type)&&s.DomEvent.preventDefault(t),"mousedown"!==t.type?s.DomEvent.stopPropagation(t):s.DomEvent.preventDefault(t)},setOpacity:function(t){return this.options.opacity=t,
this._map&&this._updateOpacity(),this},_updateOpacity:function(){s.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&s.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),s.marker=function(t,e){return new s.Marker(t,e)},s.DivIcon=s.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:n.createElement("div"),i=this.options;return i.html!==!1?e.innerHTML=i.html:e.innerHTML="",i.bgPos&&(e.style.backgroundPosition=-i.bgPos.x+"px "+-i.bgPos.y+"px"),this._setIconStyles(e,"icon"),e},createShadow:function(){return null}}),s.divIcon=function(t){return new s.DivIcon(t)},s.Map.mergeOptions({closePopupOnClick:!0}),s.Popup=s.Class.extend({includes:s.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(t,e){s.setOptions(this,t),this._source=e,this._animated=s.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(t){this._map=t,this._container||this._initLayout();var e=t.options.fadeAnimation;e&&s.DomUtil.setOpacity(this._container,0),t._panes.popupPane.appendChild(this._container),t.on(this._getEvents(),this),this.update(),e&&s.DomUtil.setOpacity(this._container,1),this.fire("open"),t.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(t){return t.addLayer(this),this},openOn:function(t){return t.openPopup(this),this},onRemove:function(t){t._panes.popupPane.removeChild(this._container),s.Util.falseFn(this._container.offsetWidth),t.off(this._getEvents(),this),t.options.fadeAnimation&&s.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),t.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=s.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var t={viewreset:this._updatePosition};return this._animated&&(t.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t,e="leaflet-popup",n=e+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),i=this._container=s.DomUtil.create("div",n);this.options.closeButton&&(t=this._closeButton=s.DomUtil.create("a",e+"-close-button",i),t.href="#close",t.innerHTML="&#215;",s.DomEvent.disableClickPropagation(t),s.DomEvent.on(t,"click",this._onCloseButtonClick,this));var o=this._wrapper=s.DomUtil.create("div",e+"-content-wrapper",i);s.DomEvent.disableClickPropagation(o),this._contentNode=s.DomUtil.create("div",e+"-content",o),s.DomEvent.disableScrollPropagation(this._contentNode),s.DomEvent.on(o,"contextmenu",s.DomEvent.stopPropagation),this._tipContainer=s.DomUtil.create("div",e+"-tip-container",i),this._tip=s.DomUtil.create("div",e+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,o=this.options.maxHeight,r="leaflet-popup-scrolled";o&&i>o?(e.height=o+"px",s.DomUtil.addClass(t,r)):s.DomUtil.removeClass(t,r),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=this._animated,n=s.point(this.options.offset);e&&s.DomUtil.setPosition(this._container,t),this._containerBottom=-n.y-(e?0:t.y),this._containerLeft=-Math.round(this._containerWidth/2)+n.x+(e?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);s.DomUtil.setPosition(this._container,e)},_adjustPan:function(){if(this.options.autoPan){var t=this._map,e=this._container.offsetHeight,n=this._containerWidth,i=new s.Point(this._containerLeft,-e-this._containerBottom);this._animated&&i._add(s.DomUtil.getPosition(this._container));var o=t.layerPointToContainerPoint(i),r=s.point(this.options.autoPanPadding),a=s.point(this.options.autoPanPaddingTopLeft||r),l=s.point(this.options.autoPanPaddingBottomRight||r),h=t.getSize(),c=0,u=0;o.x+n+l.x>h.x&&(c=o.x+n-h.x+l.x),o.x-c-a.x<0&&(c=o.x-a.x),o.y+e+l.y>h.y&&(u=o.y+e-h.y+l.y),o.y-u-a.y<0&&(u=o.y-a.y),(c||u)&&t.fire("autopanstart").panBy([c,u])}},_onCloseButtonClick:function(t){this._close(),s.DomEvent.stop(t)}}),s.popup=function(t,e){return new s.Popup(t,e)},s.Map.include({openPopup:function(t,e,n){if(this.closePopup(),!(t instanceof s.Popup)){var i=t;t=new s.Popup(n).setLatLng(e).setContent(i)}return t._isOpen=!0,this._popup=t,this.addLayer(t)},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&(this.removeLayer(t),t._isOpen=!1),this}}),s.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(t,e){var n=s.point(this.options.icon.options.popupAnchor||[0,0]);return n=n.add(s.Popup.prototype.options.offset),e&&e.offset&&(n=n.add(e.offset)),e=s.extend({offset:n},e),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),t instanceof s.Popup?(s.setOptions(t,e),this._popup=t,t._source=this):this._popup=new s.Popup(e,this).setContent(t),this},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),s.LayerGroup=s.Class.extend({initialize:function(t){this._layers={};var e,n;if(t)for(e=0,n=t.length;e<n;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)n=this._layers[e],n[t]&&n[t].apply(n,i);return this},onAdd:function(t){this._map=t,this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t),this._map=null},addTo:function(t){return t.addLayer(this),this},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return s.stamp(t)}}),s.layerGroup=function(t){return new s.LayerGroup(t)},s.FeatureGroup=s.LayerGroup.extend({includes:s.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(t){return this.hasLayer(t)?this:("on"in t&&t.on(s.FeatureGroup.EVENTS,this._propagateEvent,this),s.LayerGroup.prototype.addLayer.call(this,t),this._popupContent&&t.bindPopup&&t.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),"off"in t&&t.off(s.FeatureGroup.EVENTS,this._propagateEvent,this),s.LayerGroup.prototype.removeLayer.call(this,t),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:t})):this},bindPopup:function(t,e){return this._popupContent=t,this._popupOptions=e,this.invoke("bindPopup",t,e)},openPopup:function(t){for(var e in this._layers){this._layers[e].openPopup(t);break}return this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new s.LatLngBounds;return this.eachLayer(function(e){t.extend(e instanceof s.Marker?e.getLatLng():e.getBounds())}),t},_propagateEvent:function(t){t=s.extend({layer:t.target,target:this},t),this.fire(t.type,t)}}),s.featureGroup=function(t){return new s.FeatureGroup(t)},s.Path=s.Class.extend({includes:[s.Mixin.Events],statics:{CLIP_PADDING:function(){var e=s.Browser.mobile?1280:2e3,n=(e/Math.max(t.outerWidth,t.outerHeight)-1)/2;return Math.max(0,Math.min(.5,n))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(t){s.setOptions(this,t)},onAdd:function(t){this._map=t,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),t.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,s.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),t.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(t){return s.setOptions(this,t),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),s.Map.include({_updatePathViewport:function(){var t=s.Path.CLIP_PADDING,e=this.getSize(),n=s.DomUtil.getPosition(this._mapPane),i=n.multiplyBy(-1)._subtract(e.multiplyBy(t)._round()),o=i.add(e.multiplyBy(1+2*t)._round());this._pathViewport=new s.Bounds(i,o)}}),s.Path.SVG_NS="http://www.w3.org/2000/svg",s.Browser.svg=!(!n.createElementNS||!n.createElementNS(s.Path.SVG_NS,"svg").createSVGRect),s.Path=s.Path.extend({statics:{SVG:s.Browser.svg},bringToFront:function(){var t=this._map._pathRoot,e=this._container;return e&&t.lastChild!==e&&t.appendChild(e),this},bringToBack:function(){var t=this._map._pathRoot,e=this._container,n=t.firstChild;return e&&n!==e&&t.insertBefore(e,n),this},getPathString:function(){},_createElement:function(t){return n.createElementNS(s.Path.SVG_NS,t)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&s.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var t=this.getPathString();t||(t="M0 0"),this._path.setAttribute("d",t)},_initEvents:function(){if(this.options.clickable){!s.Browser.svg&&s.Browser.vml||s.DomUtil.addClass(this._path,"leaflet-clickable"),s.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var t=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],e=0;e<t.length;e++)s.DomEvent.on(this._container,t[e],this._fireMouseEvent,this)}},_onMouseClick:function(t){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)},_fireMouseEvent:function(t){if(this._map&&this.hasEventListeners(t.type)){var e=this._map,n=e.mouseEventToContainerPoint(t),i=e.containerPointToLayerPoint(n),o=e.layerPointToLatLng(i);this.fire(t.type,{latlng:o,layerPoint:i,containerPoint:n,originalEvent:t}),"contextmenu"===t.type&&s.DomEvent.preventDefault(t),"mousemove"!==t.type&&s.DomEvent.stopPropagation(t)}}}),s.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=s.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&s.Browser.any3d?(s.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):s.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(t){var e=this.getZoomScale(t.zoom),n=this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min);this._pathRoot.style[s.DomUtil.TRANSFORM]=s.DomUtil.getTranslateString(n)+" scale("+e+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,n=t.max,i=n.x-e.x,o=n.y-e.y,r=this._pathRoot,a=this._panes.overlayPane;s.Browser.mobileWebkit&&a.removeChild(r),s.DomUtil.setPosition(r,e),r.setAttribute("width",i),r.setAttribute("height",o),r.setAttribute("viewBox",[e.x,e.y,i,o].join(" ")),s.Browser.mobileWebkit&&a.appendChild(r)}}}),s.Path.include({bindPopup:function(t,e){return t instanceof s.Popup?this._popup=t:(this._popup&&!e||(this._popup=new s.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(t){return this._popup&&(t=t||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:t})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(t){this._popup.setLatLng(t.latlng),this._map.openPopup(this._popup)}}),s.Browser.vml=!s.Browser.svg&&function(){try{var t=n.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(i){return!1}}(),s.Path=s.Browser.svg||!s.Browser.vml?s.Path:s.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return n.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return n.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return n.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var t=this._container=this._createElement("shape");s.DomUtil.addClass(t,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&s.DomUtil.addClass(t,"leaflet-clickable"),t.coordsize="1 1",this._path=this._createElement("path"),t.appendChild(this._path),this._map._pathRoot.appendChild(t)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var t=this._stroke,e=this._fill,n=this.options,i=this._container;i.stroked=n.stroke,i.filled=n.fill,n.stroke?(t||(t=this._stroke=this._createElement("stroke"),t.endcap="round",i.appendChild(t)),t.weight=n.weight+"px",t.color=n.color,t.opacity=n.opacity,n.dashArray?t.dashStyle=s.Util.isArray(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):t.dashStyle="",n.lineCap&&(t.endcap=n.lineCap.replace("butt","flat")),n.lineJoin&&(t.joinstyle=n.lineJoin)):t&&(i.removeChild(t),this._stroke=null),n.fill?(e||(e=this._fill=this._createElement("fill"),i.appendChild(e)),e.color=n.fillColor||n.color,e.opacity=n.fillOpacity):e&&(i.removeChild(e),this._fill=null)},_updatePath:function(){var t=this._container.style;t.display="none",this._path.v=this.getPathString()+" ",t.display=""}}),s.Map.include(s.Browser.svg||!s.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var t=this._pathRoot=n.createElement("div");t.className="leaflet-vml-container",this._panes.overlayPane.appendChild(t),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),s.Browser.canvas=function(){return!!n.createElement("canvas").getContext}(),s.Path=s.Path.SVG&&!t.L_PREFER_CANVAS||!s.Browser.canvas?s.Path:s.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(t){return s.setOptions(this,t),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(t){t.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!s.Path._updateRequest&&(s.Path._updateRequest=s.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){s.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var t=this.options;t.stroke&&(this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color),t.fill&&(this._ctx.fillStyle=t.fillColor||t.color),t.lineCap&&(this._ctx.lineCap=t.lineCap),t.lineJoin&&(this._ctx.lineJoin=t.lineJoin)},_drawPath:function(){var t,e,n,i,o,r;for(this._ctx.beginPath(),t=0,n=this._parts.length;t<n;t++){for(e=0,i=this._parts[t].length;e<i;e++)o=this._parts[t][e],r=(0===e?"move":"line")+"To",this._ctx[r](o.x,o.y);this instanceof s.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var t=this._ctx,e=this.options;this._drawPath(),t.save(),this._updateStyle(),e.fill&&(t.globalAlpha=e.fillOpacity,t.fill(e.fillRule||"evenodd")),e.stroke&&(t.globalAlpha=e.opacity,t.stroke()),t.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click dblclick contextmenu",this._fireMouseEvent,this))},_fireMouseEvent:function(t){this._containsPoint(t.layerPoint)&&this.fire(t.type,t)},_onMouseMove:function(t){this._map&&!this._map._animatingZoom&&(this._containsPoint(t.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",t)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",t)))}}),s.Map.include(s.Path.SVG&&!t.L_PREFER_CANVAS||!s.Browser.canvas?{}:{_initPathRoot:function(){var t,e=this._pathRoot;e||(e=this._pathRoot=n.createElement("canvas"),e.style.position="absolute",t=this._canvasCtx=e.getContext("2d"),t.lineCap="round",t.lineJoin="round",this._panes.overlayPane.appendChild(e),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,n=t.max.subtract(e),i=this._pathRoot;s.DomUtil.setPosition(i,e),i.width=n.x,i.height=n.y,i.getContext("2d").translate(-e.x,-e.y)}}}),s.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=this._reducePoints(t,n),t=this._simplifyDP(t,n)},pointToSegmentDistance:function(t,e,n){return Math.sqrt(this._sqClosestPointOnSegment(t,e,n,!0))},closestPointOnSegment:function(t,e,n){return this._sqClosestPointOnSegment(t,e,n)},_simplifyDP:function(t,e){var n=t.length,o=typeof Uint8Array!=i+""?Uint8Array:Array,s=new o(n);s[0]=s[n-1]=1,this._simplifyDPStep(t,s,e,0,n-1);var r,a=[];for(r=0;r<n;r++)s[r]&&a.push(t[r]);return a},_simplifyDPStep:function(t,e,n,i,o){var s,r,a,l=0;for(r=i+1;r<=o-1;r++)a=this._sqClosestPointOnSegment(t[r],t[i],t[o],!0),a>l&&(s=r,l=a);l>n&&(e[s]=1,this._simplifyDPStep(t,e,n,i,s),this._simplifyDPStep(t,e,n,s,o))},_reducePoints:function(t,e){for(var n=[t[0]],i=1,o=0,s=t.length;i<s;i++)this._sqDist(t[i],t[o])>e&&(n.push(t[i]),o=i);return o<s-1&&n.push(t[s-1]),n},clipSegment:function(t,e,n,i){var o,s,r,a=i?this._lastCode:this._getBitCode(t,n),l=this._getBitCode(e,n);for(this._lastCode=l;;){if(!(a|l))return[t,e];if(a&l)return!1;o=a||l,s=this._getEdgeIntersection(t,e,o,n),r=this._getBitCode(s,n),o===a?(t=s,a=r):(e=s,l=r)}},_getEdgeIntersection:function(t,e,n,i){var o=e.x-t.x,r=e.y-t.y,a=i.min,l=i.max;return 8&n?new s.Point(t.x+o*(l.y-t.y)/r,l.y):4&n?new s.Point(t.x+o*(a.y-t.y)/r,a.y):2&n?new s.Point(l.x,t.y+r*(l.x-t.x)/o):1&n?new s.Point(a.x,t.y+r*(a.x-t.x)/o):void 0},_getBitCode:function(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n},_sqDist:function(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i},_sqClosestPointOnSegment:function(t,e,n,i){var o,r=e.x,a=e.y,l=n.x-r,h=n.y-a,c=l*l+h*h;return c>0&&(o=((t.x-r)*l+(t.y-a)*h)/c,o>1?(r=n.x,a=n.y):o>0&&(r+=l*o,a+=h*o)),l=t.x-r,h=t.y-a,i?l*l+h*h:new s.Point(r,a)}},s.Polyline=s.Path.extend({initialize:function(t,e){s.Path.prototype.initialize.call(this,e),this._latlngs=this._convertLatLngs(t)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var t=0,e=this._latlngs.length;t<e;t++)this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])},getPathString:function(){for(var t=0,e=this._parts.length,n="";t<e;t++)n+=this._getPathPartStr(this._parts[t]);return n},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._latlngs=this._convertLatLngs(t),this.redraw()},addLatLng:function(t){return this._latlngs.push(s.latLng(t)),this.redraw()},spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),t},closestLayerPoint:function(t){for(var e,n,i=1/0,o=this._parts,r=null,a=0,l=o.length;a<l;a++)for(var h=o[a],c=1,u=h.length;c<u;c++){e=h[c-1],n=h[c];var d=s.LineUtil._sqClosestPointOnSegment(t,e,n,!0);d<i&&(i=d,r=s.LineUtil._sqClosestPointOnSegment(t,e,n))}return r&&(r.distance=Math.sqrt(i)),r},getBounds:function(){return new s.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(t,e){var n,i,o=e?t:[];for(n=0,i=t.length;n<i;n++){if(s.Util.isArray(t[n])&&"number"!=typeof t[n][0])return;o[n]=s.latLng(t[n])}return o},_initEvents:function(){s.Path.prototype._initEvents.call(this)},_getPathPartStr:function(t){for(var e,n=s.Path.VML,i=0,o=t.length,r="";i<o;i++)e=t[i],n&&e._round(),r+=(i?"L":"M")+e.x+" "+e.y;return r},_clipPoints:function(){var t,e,n,i=this._originalPoints,o=i.length;if(this.options.noClip)return void(this._parts=[i]);this._parts=[];var r=this._parts,a=this._map._pathViewport,l=s.LineUtil;for(t=0,e=0;t<o-1;t++)n=l.clipSegment(i[t],i[t+1],a,t),n&&(r[e]=r[e]||[],r[e].push(n[0]),n[1]===i[t+1]&&t!==o-2||(r[e].push(n[1]),e++))},_simplifyPoints:function(){for(var t=this._parts,e=s.LineUtil,n=0,i=t.length;n<i;n++)t[n]=e.simplify(t[n],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),s.Path.prototype._updatePath.call(this))}}),s.polyline=function(t,e){return new s.Polyline(t,e)},s.PolyUtil={},s.PolyUtil.clipPolygon=function(t,e){var n,i,o,r,a,l,h,c,u,d=[1,4,2,8],p=s.LineUtil;for(i=0,h=t.length;i<h;i++)t[i]._code=p._getBitCode(t[i],e);for(r=0;r<4;r++){for(c=d[r],n=[],i=0,h=t.length,o=h-1;i<h;o=i++)a=t[i],l=t[o],a._code&c?l._code&c||(u=p._getEdgeIntersection(l,a,c,e),u._code=p._getBitCode(u,e),n.push(u)):(l._code&c&&(u=p._getEdgeIntersection(l,a,c,e),u._code=p._getBitCode(u,e),n.push(u)),n.push(a));t=n}return t},s.Polygon=s.Polyline.extend({options:{fill:!0},initialize:function(t,e){s.Polyline.prototype.initialize.call(this,t,e),this._initWithHoles(t)},_initWithHoles:function(t){var e,n,i;if(t&&s.Util.isArray(t[0])&&"number"!=typeof t[0][0])for(this._latlngs=this._convertLatLngs(t[0]),this._holes=t.slice(1),e=0,n=this._holes.length;e<n;e++)i=this._holes[e]=this._convertLatLngs(this._holes[e]),i[0].equals(i[i.length-1])&&i.pop();t=this._latlngs,t.length>=2&&t[0].equals(t[t.length-1])&&t.pop()},projectLatlngs:function(){if(s.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var t,e,n,i;for(t=0,n=this._holes.length;t<n;t++)for(this._holePoints[t]=[],e=0,i=this._holes[t].length;e<i;e++)this._holePoints[t][e]=this._map.latLngToLayerPoint(this._holes[t][e])}},setLatLngs:function(t){return t&&s.Util.isArray(t[0])&&"number"!=typeof t[0][0]?(this._initWithHoles(t),this.redraw()):s.Polyline.prototype.setLatLngs.call(this,t)},_clipPoints:function(){var t=this._originalPoints,e=[];if(this._parts=[t].concat(this._holePoints),!this.options.noClip){for(var n=0,i=this._parts.length;n<i;n++){var o=s.PolyUtil.clipPolygon(this._parts[n],this._map._pathViewport);o.length&&e.push(o)}this._parts=e}},_getPathPartStr:function(t){var e=s.Polyline.prototype._getPathPartStr.call(this,t);return e+(s.Browser.svg?"z":"x")}}),s.polygon=function(t,e){return new s.Polygon(t,e)},function(){function t(t){return s.FeatureGroup.extend({initialize:function(t,e){this._layers={},this._options=e,this.setLatLngs(t)},setLatLngs:function(e){var n=0,i=e.length;for(this.eachLayer(function(t){n<i?t.setLatLngs(e[n++]):this.removeLayer(t)},this);n<i;)this.addLayer(new t(e[n++],this._options));return this},getLatLngs:function(){var t=[];return this.eachLayer(function(e){t.push(e.getLatLngs())}),t}})}s.MultiPolyline=t(s.Polyline),s.MultiPolygon=t(s.Polygon),s.multiPolyline=function(t,e){return new s.MultiPolyline(t,e)},s.multiPolygon=function(t,e){return new s.MultiPolygon(t,e)}}(),s.Rectangle=s.Polygon.extend({initialize:function(t,e){s.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=s.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),s.rectangle=function(t,e){return new s.Rectangle(t,e)},s.Circle=s.Path.extend({initialize:function(t,e,n){s.Path.prototype.initialize.call(this,n),this._latlng=s.latLng(t),this._mRadius=e},options:{fill:!0},setLatLng:function(t){return this._latlng=s.latLng(t),this.redraw()},setRadius:function(t){return this._mRadius=t,this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),e=this._latlng,n=this._map.latLngToLayerPoint([e.lat,e.lng-t]);this._point=this._map.latLngToLayerPoint(e),this._radius=Math.max(this._point.x-n.x,1)},getBounds:function(){var t=this._getLngRadius(),e=this._mRadius/40075017*360,n=this._latlng;return new s.LatLngBounds([n.lat-e,n.lng-t],[n.lat+e,n.lng+t])},getLatLng:function(){return this._latlng},getPathString:function(){var t=this._point,e=this._radius;return this._checkIfEmpty()?"":s.Browser.svg?"M"+t.x+","+(t.y-e)+"A"+e+","+e+",0,1,1,"+(t.x-.1)+","+(t.y-e)+" z":(t._round(),e=Math.round(e),"AL "+t.x+","+t.y+" "+e+","+e+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(s.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var t=this._map._pathViewport,e=this._radius,n=this._point;return n.x-e>t.max.x||n.y-e>t.max.y||n.x+e<t.min.x||n.y+e<t.min.y}}),s.circle=function(t,e,n){return new s.Circle(t,e,n)},s.CircleMarker=s.Circle.extend({options:{radius:10,weight:2},initialize:function(t,e){s.Circle.prototype.initialize.call(this,t,null,e),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){s.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(t){return s.Circle.prototype.setLatLng.call(this,t),this._popup&&this._popup._isOpen&&this._popup.setLatLng(t),this},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius}}),s.circleMarker=function(t,e){return new s.CircleMarker(t,e)},s.Polyline.include(s.Path.CANVAS?{_containsPoint:function(t,e){var n,i,o,r,a,l,h,c=this.options.weight/2;for(s.Browser.touch&&(c+=10),n=0,r=this._parts.length;n<r;n++)for(h=this._parts[n],i=0,a=h.length,o=a-1;i<a;o=i++)if((e||0!==i)&&(l=s.LineUtil.pointToSegmentDistance(t,h[o],h[i]),l<=c))return!0;return!1}}:{}),s.Polygon.include(s.Path.CANVAS?{_containsPoint:function(t){var e,n,i,o,r,a,l,h,c=!1;if(s.Polyline.prototype._containsPoint.call(this,t,!0))return!0;for(o=0,l=this._parts.length;o<l;o++)for(e=this._parts[o],r=0,h=e.length,a=h-1;r<h;a=r++)n=e[r],i=e[a],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(c=!c);return c}}:{}),s.Circle.include(s.Path.CANVAS?{_drawPath:function(){var t=this._point;this._ctx.beginPath(),this._ctx.arc(t.x,t.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(t){var e=this._point,n=this.options.stroke?this.options.weight/2:0;return t.distanceTo(e)<=this._radius+n}}:{}),s.CircleMarker.include(s.Path.CANVAS?{_updateStyle:function(){s.Path.prototype._updateStyle.call(this)}}:{}),s.GeoJSON=s.FeatureGroup.extend({initialize:function(t,e){s.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,o=s.Util.isArray(t)?t:t.features;if(o){for(e=0,n=o.length;e<n;e++)i=o[e],(i.geometries||i.geometry||i.features||i.coordinates)&&this.addData(o[e]);return this}var r=this.options;if(!r.filter||r.filter(t)){var a=s.GeoJSON.geometryToLayer(t,r.pointToLayer,r.coordsToLatLng,r);return a.feature=s.GeoJSON.asFeature(t),a.defaultOptions=a.options,this.resetStyle(a),r.onEachFeature&&r.onEachFeature(t,a),this.addLayer(a)}},resetStyle:function(t){var e=this.options.style;e&&(s.Util.extend(t.options,t.defaultOptions),this._setLayerStyle(t,e))},setStyle:function(t){this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),s.extend(s.GeoJSON,{geometryToLayer:function(t,e,n,i){var o,r,a,l,h="Feature"===t.type?t.geometry:t,c=h.coordinates,u=[];
switch(n=n||this.coordsToLatLng,h.type){case"Point":return o=n(c),e?e(t,o):new s.Marker(o);case"MultiPoint":for(a=0,l=c.length;a<l;a++)o=n(c[a]),u.push(e?e(t,o):new s.Marker(o));return new s.FeatureGroup(u);case"LineString":return r=this.coordsToLatLngs(c,0,n),new s.Polyline(r,i);case"Polygon":if(2===c.length&&!c[1].length)throw new Error("Invalid GeoJSON object.");return r=this.coordsToLatLngs(c,1,n),new s.Polygon(r,i);case"MultiLineString":return r=this.coordsToLatLngs(c,1,n),new s.MultiPolyline(r,i);case"MultiPolygon":return r=this.coordsToLatLngs(c,2,n),new s.MultiPolygon(r,i);case"GeometryCollection":for(a=0,l=h.geometries.length;a<l;a++)u.push(this.geometryToLayer({geometry:h.geometries[a],type:"Feature",properties:t.properties},e,n,i));return new s.FeatureGroup(u);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new s.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,n){var i,o,s,r=[];for(o=0,s=t.length;o<s;o++)i=e?this.coordsToLatLngs(t[o],e-1,n):(n||this.coordsToLatLng)(t[o]),r.push(i);return r},latLngToCoords:function(t){var e=[t.lng,t.lat];return t.alt!==i&&e.push(t.alt),e},latLngsToCoords:function(t){for(var e=[],n=0,i=t.length;n<i;n++)e.push(s.GeoJSON.latLngToCoords(t[n]));return e},getFeature:function(t,e){return t.feature?s.extend({},t.feature,{geometry:e}):s.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var a={toGeoJSON:function(){return s.GeoJSON.getFeature(this,{type:"Point",coordinates:s.GeoJSON.latLngToCoords(this.getLatLng())})}};s.Marker.include(a),s.Circle.include(a),s.CircleMarker.include(a),s.Polyline.include({toGeoJSON:function(){return s.GeoJSON.getFeature(this,{type:"LineString",coordinates:s.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),s.Polygon.include({toGeoJSON:function(){var t,e,n,i=[s.GeoJSON.latLngsToCoords(this.getLatLngs())];if(i[0].push(i[0][0]),this._holes)for(t=0,e=this._holes.length;t<e;t++)n=s.GeoJSON.latLngsToCoords(this._holes[t]),n.push(n[0]),i.push(n);return s.GeoJSON.getFeature(this,{type:"Polygon",coordinates:i})}}),function(){function t(t){return function(){var e=[];return this.eachLayer(function(t){e.push(t.toGeoJSON().geometry.coordinates)}),s.GeoJSON.getFeature(this,{type:t,coordinates:e})}}s.MultiPolyline.include({toGeoJSON:t("MultiLineString")}),s.MultiPolygon.include({toGeoJSON:t("MultiPolygon")}),s.LayerGroup.include({toGeoJSON:function(){var e,n=this.feature&&this.feature.geometry,i=[];if(n&&"MultiPoint"===n.type)return t("MultiPoint").call(this);var o=n&&"GeometryCollection"===n.type;return this.eachLayer(function(t){t.toGeoJSON&&(e=t.toGeoJSON(),i.push(o?e.geometry:s.GeoJSON.asFeature(e)))}),o?s.GeoJSON.getFeature(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}})}(),s.geoJson=function(t,e){return new s.GeoJSON(t,e)},s.DomEvent={addListener:function(t,e,n,i){var o,r,a,l=s.stamp(n),h="_leaflet_"+e+l;return t[h]?this:(o=function(e){return n.call(i||t,e||s.DomEvent._getEvent())},s.Browser.pointer&&0===e.indexOf("touch")?this.addPointerListener(t,e,o,l):(s.Browser.touch&&"dblclick"===e&&this.addDoubleTapListener&&this.addDoubleTapListener(t,o,l),"addEventListener"in t?"mousewheel"===e?(t.addEventListener("DOMMouseScroll",o,!1),t.addEventListener(e,o,!1)):"mouseenter"===e||"mouseleave"===e?(r=o,a="mouseenter"===e?"mouseover":"mouseout",o=function(e){if(s.DomEvent._checkMouse(t,e))return r(e)},t.addEventListener(a,o,!1)):"click"===e&&s.Browser.android?(r=o,o=function(t){return s.DomEvent._filterClick(t,r)},t.addEventListener(e,o,!1)):t.addEventListener(e,o,!1):"attachEvent"in t&&t.attachEvent("on"+e,o),t[h]=o,this))},removeListener:function(t,e,n){var i=s.stamp(n),o="_leaflet_"+e+i,r=t[o];return r?(s.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,i):s.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,i):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",r,!1),t.removeEventListener(e,r,!1)):"mouseenter"===e||"mouseleave"===e?t.removeEventListener("mouseenter"===e?"mouseover":"mouseout",r,!1):t.removeEventListener(e,r,!1):"detachEvent"in t&&t.detachEvent("on"+e,r),t[o]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,s.DomEvent._skipped(t),this},disableScrollPropagation:function(t){var e=s.DomEvent.stopPropagation;return s.DomEvent.on(t,"mousewheel",e).on(t,"MozMousePixelScroll",e)},disableClickPropagation:function(t){for(var e=s.DomEvent.stopPropagation,n=s.Draggable.START.length-1;n>=0;n--)s.DomEvent.on(t,s.Draggable.START[n],e);return s.DomEvent.on(t,"click",s.DomEvent._fakeStop).on(t,"dblclick",e)},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return s.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new s.Point(t.clientX,t.clientY);var n=e.getBoundingClientRect();return new s.Point(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e},_skipEvents:{},_fakeStop:function(t){s.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_checkMouse:function(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(i){return!1}return n!==t},_getEvent:function(){var e=t.event;if(!e)for(var n=arguments.callee.caller;n&&(e=n.arguments[0],!e||t.Event!==e.constructor);)n=n.caller;return e},_filterClick:function(t,e){var n=t.timeStamp||t.originalEvent.timeStamp,i=s.DomEvent._lastClick&&n-s.DomEvent._lastClick;return i&&i>100&&i<500||t.target._simulatedClick&&!t._simulated?void s.DomEvent.stop(t):(s.DomEvent._lastClick=n,e(t))}},s.DomEvent.on=s.DomEvent.addListener,s.DomEvent.off=s.DomEvent.removeListener,s.Draggable=s.Class.extend({includes:s.Mixin.Events,statics:{START:s.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e){this._element=t,this._dragStartTarget=e||t},enable:function(){if(!this._enabled){for(var t=s.Draggable.START.length-1;t>=0;t--)s.DomEvent.on(this._dragStartTarget,s.Draggable.START[t],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var t=s.Draggable.START.length-1;t>=0;t--)s.DomEvent.off(this._dragStartTarget,s.Draggable.START[t],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(t){if(this._moved=!1,!t.shiftKey&&(1===t.which||1===t.button||t.touches)&&(s.DomEvent.stopPropagation(t),!s.Draggable._disabled&&(s.DomUtil.disableImageDrag(),s.DomUtil.disableTextSelection(),!this._moving))){var e=t.touches?t.touches[0]:t;this._startPoint=new s.Point(e.clientX,e.clientY),this._startPos=this._newPos=s.DomUtil.getPosition(this._element),s.DomEvent.on(n,s.Draggable.MOVE[t.type],this._onMove,this).on(n,s.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(t.touches&&t.touches.length>1)return void(this._moved=!0);var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new s.Point(e.clientX,e.clientY),o=i.subtract(this._startPoint);(o.x||o.y)&&(s.Browser.touch&&Math.abs(o.x)+Math.abs(o.y)<3||(s.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=s.DomUtil.getPosition(this._element).subtract(o),s.DomUtil.addClass(n.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,s.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,s.Util.cancelAnimFrame(this._animRequest),this._animRequest=s.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))},_updatePosition:function(){this.fire("predrag"),s.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){s.DomUtil.removeClass(n.body,"leaflet-dragging"),this._lastTarget&&(s.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in s.Draggable.MOVE)s.DomEvent.off(n,s.Draggable.MOVE[t],this._onMove).off(n,s.Draggable.END[t],this._onUp);s.DomUtil.enableImageDrag(),s.DomUtil.enableTextSelection(),this._moved&&this._moving&&(s.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),s.Handler=s.Class.extend({initialize:function(t){this._map=t},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),s.Map.mergeOptions({dragging:!0,inertia:!s.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:s.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),s.Map.Drag=s.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new s.Draggable(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),t.on("viewreset",this._onViewReset,this),t.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var t=this._map;t._panAnim&&t._panAnim.stop(),t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var t=this._lastTime=+new Date,e=this._lastPos=this._draggable._newPos;this._positions.push(e),this._times.push(t),t-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var t=this._map.getSize()._divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,o=(i-e+n)%t+e-n,s=(i+e+n)%t-e-n,r=Math.abs(o+n)<Math.abs(s+n)?o:s;this._draggable._newPos.x=r},_onDragEnd:function(t){var e=this._map,n=e.options,i=+new Date-this._lastTime,o=!n.inertia||i>n.inertiaThreshold||!this._positions[0];if(e.fire("dragend",t),o)e.fire("moveend");else{var r=this._lastPos.subtract(this._positions[0]),a=(this._lastTime+i-this._times[0])/1e3,l=n.easeLinearity,h=r.multiplyBy(l/a),c=h.distanceTo([0,0]),u=Math.min(n.inertiaMaxSpeed,c),d=h.multiplyBy(u/c),p=u/(n.inertiaDeceleration*l),m=d.multiplyBy(-p/2).round();m.x&&m.y?(m=e._limitOffset(m,e.options.maxBounds),s.Util.requestAnimFrame(function(){e.panBy(m,{duration:p,easeLinearity:l,noMoveStart:!0})})):e.fire("moveend")}}}),s.Map.addInitHook("addHandler","dragging",s.Map.Drag),s.Map.mergeOptions({doubleClickZoom:!0}),s.Map.DoubleClickZoom=s.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom()+(t.originalEvent.shiftKey?-1:1);"center"===e.options.doubleClickZoom?e.setZoom(n):e.setZoomAround(t.containerPoint,n)}}),s.Map.addInitHook("addHandler","doubleClickZoom",s.Map.DoubleClickZoom),s.Map.mergeOptions({scrollWheelZoom:!0}),s.Map.ScrollWheelZoom=s.Handler.extend({addHooks:function(){s.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),s.DomEvent.on(this._map._container,"MozMousePixelScroll",s.DomEvent.preventDefault),this._delta=0},removeHooks:function(){s.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),s.DomEvent.off(this._map._container,"MozMousePixelScroll",s.DomEvent.preventDefault)},_onWheelScroll:function(t){var e=s.DomEvent.getWheelDelta(t);this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s.bind(this._performZoom,this),n),s.DomEvent.preventDefault(t),s.DomEvent.stopPropagation(t)},_performZoom:function(){var t=this._map,e=this._delta,n=t.getZoom();e=e>0?Math.ceil(e):Math.floor(e),e=Math.max(Math.min(e,4),-4),e=t._limitZoom(n+e)-n,this._delta=0,this._startTime=null,e&&("center"===t.options.scrollWheelZoom?t.setZoom(n+e):t.setZoomAround(this._lastMousePos,n+e))}}),s.Map.addInitHook("addHandler","scrollWheelZoom",s.Map.ScrollWheelZoom),s.extend(s.DomEvent,{_touchstart:s.Browser.msPointer?"MSPointerDown":s.Browser.pointer?"pointerdown":"touchstart",_touchend:s.Browser.msPointer?"MSPointerUp":s.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,e,i){function o(t){var e;if(s.Browser.pointer?(m.push(t.pointerId),e=m.length):e=t.touches.length,!(e>1)){var n=Date.now(),i=n-(a||n);l=t.touches?t.touches[0]:t,h=i>0&&i<=c,a=n}}function r(t){if(s.Browser.pointer){var n=m.indexOf(t.pointerId);if(n===-1)return;m.splice(n,1)}if(h){if(s.Browser.pointer){var i,o={};for(var r in l)i=l[r],"function"==typeof i?o[r]=i.bind(l):o[r]=i;l=o}l.type="dblclick",e(l),a=null}}var a,l,h=!1,c=250,u="_leaflet_",d=this._touchstart,p=this._touchend,m=[];t[u+d+i]=o,t[u+p+i]=r;var f=s.Browser.pointer?n.documentElement:t;return t.addEventListener(d,o,!1),f.addEventListener(p,r,!1),s.Browser.pointer&&f.addEventListener(s.DomEvent.POINTER_CANCEL,r,!1),this},removeDoubleTapListener:function(t,e){var i="_leaflet_";return t.removeEventListener(this._touchstart,t[i+this._touchstart+e],!1),(s.Browser.pointer?n.documentElement:t).removeEventListener(this._touchend,t[i+this._touchend+e],!1),s.Browser.pointer&&n.documentElement.removeEventListener(s.DomEvent.POINTER_CANCEL,t[i+this._touchend+e],!1),this}}),s.extend(s.DomEvent,{POINTER_DOWN:s.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:s.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:s.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:s.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(t,e,n,i){switch(e){case"touchstart":return this.addPointerListenerStart(t,e,n,i);case"touchend":return this.addPointerListenerEnd(t,e,n,i);case"touchmove":return this.addPointerListenerMove(t,e,n,i);default:throw"Unknown touch event type"}},addPointerListenerStart:function(t,e,i,o){var r="_leaflet_",a=this._pointers,l=function(t){"mouse"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&s.DomEvent.preventDefault(t);for(var e=!1,n=0;n<a.length;n++)if(a[n].pointerId===t.pointerId){e=!0;break}e||a.push(t),t.touches=a.slice(),t.changedTouches=[t],i(t)};if(t[r+"touchstart"+o]=l,t.addEventListener(this.POINTER_DOWN,l,!1),!this._pointerDocumentListener){var h=function(t){for(var e=0;e<a.length;e++)if(a[e].pointerId===t.pointerId){a.splice(e,1);break}};n.documentElement.addEventListener(this.POINTER_UP,h,!1),n.documentElement.addEventListener(this.POINTER_CANCEL,h,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(t,e,n,i){function o(t){if(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons){for(var e=0;e<r.length;e++)if(r[e].pointerId===t.pointerId){r[e]=t;break}t.touches=r.slice(),t.changedTouches=[t],n(t)}}var s="_leaflet_",r=this._pointers;return t[s+"touchmove"+i]=o,t.addEventListener(this.POINTER_MOVE,o,!1),this},addPointerListenerEnd:function(t,e,n,i){var o="_leaflet_",s=this._pointers,r=function(t){for(var e=0;e<s.length;e++)if(s[e].pointerId===t.pointerId){s.splice(e,1);break}t.touches=s.slice(),t.changedTouches=[t],n(t)};return t[o+"touchend"+i]=r,t.addEventListener(this.POINTER_UP,r,!1),t.addEventListener(this.POINTER_CANCEL,r,!1),this},removePointerListener:function(t,e,n){var i="_leaflet_",o=t[i+e+n];switch(e){case"touchstart":t.removeEventListener(this.POINTER_DOWN,o,!1);break;case"touchmove":t.removeEventListener(this.POINTER_MOVE,o,!1);break;case"touchend":t.removeEventListener(this.POINTER_UP,o,!1),t.removeEventListener(this.POINTER_CANCEL,o,!1)}return this}}),s.Map.mergeOptions({touchZoom:s.Browser.touch&&!s.Browser.android23,bounceAtZoomLimits:!0}),s.Map.TouchZoom=s.Handler.extend({addHooks:function(){s.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){s.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var i=e.mouseEventToLayerPoint(t.touches[0]),o=e.mouseEventToLayerPoint(t.touches[1]),r=e._getCenterLayerPoint();this._startCenter=i.add(o)._divideBy(2),this._startDist=i.distanceTo(o),this._moved=!1,this._zooming=!0,this._centerOffset=r.subtract(this._startCenter),e._panAnim&&e._panAnim.stop(),s.DomEvent.on(n,"touchmove",this._onTouchMove,this).on(n,"touchend",this._onTouchEnd,this),s.DomEvent.preventDefault(t)}},_onTouchMove:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&this._zooming){var n=e.mouseEventToLayerPoint(t.touches[0]),i=e.mouseEventToLayerPoint(t.touches[1]);this._scale=n.distanceTo(i)/this._startDist,this._delta=n._add(i)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(!e.options.bounceAtZoomLimits&&(e.getZoom()===e.getMinZoom()&&this._scale<1||e.getZoom()===e.getMaxZoom()&&this._scale>1)||(this._moved||(s.DomUtil.addClass(e._mapPane,"leaflet-touching"),e.fire("movestart").fire("zoomstart"),this._moved=!0),s.Util.cancelAnimFrame(this._animRequest),this._animRequest=s.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),s.DomEvent.preventDefault(t)))}},_updateOnMove:function(){var t=this._map,e=this._getScaleOrigin(),n=t.layerPointToLatLng(e),i=t.getScaleZoom(this._scale);t._animateZoom(n,i,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var t=this._map;this._zooming=!1,s.DomUtil.removeClass(t._mapPane,"leaflet-touching"),s.Util.cancelAnimFrame(this._animRequest),s.DomEvent.off(n,"touchmove",this._onTouchMove).off(n,"touchend",this._onTouchEnd);var e=this._getScaleOrigin(),i=t.layerPointToLatLng(e),o=t.getZoom(),r=t.getScaleZoom(this._scale)-o,a=r>0?Math.ceil(r):Math.floor(r),l=t._limitZoom(o+a),h=t.getZoomScale(l)/this._scale;t._animateZoom(i,l,e,h)},_getScaleOrigin:function(){var t=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(t)}}),s.Map.addInitHook("addHandler","touchZoom",s.Map.TouchZoom),s.Map.mergeOptions({tap:!0,tapTolerance:15}),s.Map.Tap=s.Handler.extend({addHooks:function(){s.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){s.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(s.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],i=e.target;this._startPos=this._newPos=new s.Point(e.clientX,e.clientY),i.tagName&&"a"===i.tagName.toLowerCase()&&s.DomUtil.addClass(i,"leaflet-active"),this._holdTimeout=setTimeout(s.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),s.DomEvent.on(n,"touchmove",this._onMove,this).on(n,"touchend",this._onUp,this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),s.DomEvent.off(n,"touchmove",this._onMove,this).off(n,"touchend",this._onUp,this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],i=e.target;i&&i.tagName&&"a"===i.tagName.toLowerCase()&&s.DomUtil.removeClass(i,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new s.Point(e.clientX,e.clientY)},_simulateEvent:function(e,i){var o=n.createEvent("MouseEvents");o._simulated=!0,i.target._simulatedClick=!0,o.initMouseEvent(e,!0,!0,t,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),i.target.dispatchEvent(o)}}),s.Browser.touch&&!s.Browser.pointer&&s.Map.addInitHook("addHandler","tap",s.Map.Tap),s.Map.mergeOptions({boxZoom:!0}),s.Map.BoxZoom=s.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._moved=!1},addHooks:function(){s.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){s.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(t){return this._moved=!1,!(!t.shiftKey||1!==t.which&&1!==t.button)&&(s.DomUtil.disableTextSelection(),s.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(t),void s.DomEvent.on(n,"mousemove",this._onMouseMove,this).on(n,"mouseup",this._onMouseUp,this).on(n,"keydown",this._onKeyDown,this))},_onMouseMove:function(t){this._moved||(this._box=s.DomUtil.create("div","leaflet-zoom-box",this._pane),s.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var e=this._startLayerPoint,n=this._box,i=this._map.mouseEventToLayerPoint(t),o=i.subtract(e),r=new s.Point(Math.min(i.x,e.x),Math.min(i.y,e.y));s.DomUtil.setPosition(n,r),this._moved=!0,n.style.width=Math.max(0,Math.abs(o.x)-4)+"px",n.style.height=Math.max(0,Math.abs(o.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),s.DomUtil.enableTextSelection(),s.DomUtil.enableImageDrag(),s.DomEvent.off(n,"mousemove",this._onMouseMove).off(n,"mouseup",this._onMouseUp).off(n,"keydown",this._onKeyDown)},_onMouseUp:function(t){this._finish();var e=this._map,n=e.mouseEventToLayerPoint(t);if(!this._startLayerPoint.equals(n)){var i=new s.LatLngBounds(e.layerPointToLatLng(this._startLayerPoint),e.layerPointToLatLng(n));e.fitBounds(i),e.fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),s.Map.addInitHook("addHandler","boxZoom",s.Map.BoxZoom),s.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),s.Map.Keyboard=s.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(t){this._map=t,this._setPanOffset(t.options.keyboardPanOffset),this._setZoomOffset(t.options.keyboardZoomOffset)},addHooks:function(){var t=this._map._container;t.tabIndex===-1&&(t.tabIndex="0"),s.DomEvent.on(t,"focus",this._onFocus,this).on(t,"blur",this._onBlur,this).on(t,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var t=this._map._container;s.DomEvent.off(t,"focus",this._onFocus,this).off(t,"blur",this._onBlur,this).off(t,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var e=n.body,i=n.documentElement,o=e.scrollTop||i.scrollTop,s=e.scrollLeft||i.scrollLeft;this._map._container.focus(),t.scrollTo(s,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(t){var e,n,i=this._panKeys={},o=this.keyCodes;for(e=0,n=o.left.length;e<n;e++)i[o.left[e]]=[-1*t,0];for(e=0,n=o.right.length;e<n;e++)i[o.right[e]]=[t,0];for(e=0,n=o.down.length;e<n;e++)i[o.down[e]]=[0,t];for(e=0,n=o.up.length;e<n;e++)i[o.up[e]]=[0,-1*t]},_setZoomOffset:function(t){var e,n,i=this._zoomKeys={},o=this.keyCodes;for(e=0,n=o.zoomIn.length;e<n;e++)i[o.zoomIn[e]]=t;for(e=0,n=o.zoomOut.length;e<n;e++)i[o.zoomOut[e]]=-t},_addHooks:function(){s.DomEvent.on(n,"keydown",this._onKeyDown,this)},_removeHooks:function(){s.DomEvent.off(n,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){var e=t.keyCode,n=this._map;if(e in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;n.panBy(this._panKeys[e]),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else{if(!(e in this._zoomKeys))return;n.setZoom(n.getZoom()+this._zoomKeys[e])}s.DomEvent.stop(t)}}),s.Map.addInitHook("addHandler","keyboard",s.Map.Keyboard),s.Handler.MarkerDrag=s.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new s.Draggable(t,t)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),s.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),s.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var t=this._marker,e=t._shadow,n=s.DomUtil.getPosition(t._icon),i=t._map.layerPointToLatLng(n);e&&s.DomUtil.setPosition(e,n),t._latlng=i,t.fire("move",{latlng:i}).fire("drag")},_onDragEnd:function(t){this._marker.fire("moveend").fire("dragend",t)}}),s.Control=s.Class.extend({options:{position:"topright"},initialize:function(t){s.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return s.DomUtil.addClass(e,"leaflet-control"),n.indexOf("bottom")!==-1?i.insertBefore(e,i.firstChild):i.appendChild(e),this},removeFrom:function(t){var e=this.getPosition(),n=t._controlCorners[e];return n.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(t),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),s.control=function(t){return new s.Control(t)},s.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.removeFrom(this),this},_initControlPos:function(){function t(t,o){var r=n+t+" "+n+o;e[t+o]=s.DomUtil.create("div",r,i)}var e=this._controlCorners={},n="leaflet-",i=this._controlContainer=s.DomUtil.create("div",n+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),s.Control.Zoom=s.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=s.DomUtil.create("div",e+" leaflet-bar");return this._map=t,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,e+"-in",n,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,e+"-out",n,this._zoomOut,this),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_createButton:function(t,e,n,i,o,r){var a=s.DomUtil.create("a",n,i);a.innerHTML=t,a.href="#",a.title=e;var l=s.DomEvent.stopPropagation;return s.DomEvent.on(a,"click",l).on(a,"mousedown",l).on(a,"dblclick",l).on(a,"click",s.DomEvent.preventDefault).on(a,"click",o,r).on(a,"click",this._refocusOnMap,r),a},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";s.DomUtil.removeClass(this._zoomInButton,e),s.DomUtil.removeClass(this._zoomOutButton,e),t._zoom===t.getMinZoom()&&s.DomUtil.addClass(this._zoomOutButton,e),t._zoom===t.getMaxZoom()&&s.DomUtil.addClass(this._zoomInButton,e)}}),s.Map.mergeOptions({zoomControl:!0}),s.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new s.Control.Zoom,this.addControl(this.zoomControl))}),s.control.zoom=function(t){return new s.Control.Zoom(t)},s.Control.Attribution=s.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){s.setOptions(this,t),this._attributions={}},onAdd:function(t){this._container=s.DomUtil.create("div","leaflet-control-attribution"),s.DomEvent.disableClickPropagation(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return t.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(t){t.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){if(t)return this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this},removeAttribution:function(t){if(t)return this._attributions[t]&&(this._attributions[t]--,this._update()),this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}},_onLayerAdd:function(t){t.layer.getAttribution&&this.addAttribution(t.layer.getAttribution())},_onLayerRemove:function(t){t.layer.getAttribution&&this.removeAttribution(t.layer.getAttribution())}}),s.Map.mergeOptions({attributionControl:!0}),s.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new s.Control.Attribution).addTo(this))}),s.control.attribution=function(t){return new s.Control.Attribution(t)},s.Control.Scale=s.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(t){this._map=t;var e="leaflet-control-scale",n=s.DomUtil.create("div",e),i=this.options;return this._addScales(i,e,n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=s.DomUtil.create("div",e+"-line",n)),t.imperial&&(this._iScale=s.DomUtil.create("div",e+"-line",n))},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,n=6378137*Math.PI*Math.cos(e*Math.PI/180),i=n*(t.getNorthEast().lng-t.getSouthWest().lng)/180,o=this._map.getSize(),s=this.options,r=0;o.x>0&&(r=i*(s.maxWidth/o.x)),this._updateScales(s,r)},_updateScales:function(t,e){t.metric&&e&&this._updateMetric(e),t.imperial&&e&&this._updateImperial(e)},_updateMetric:function(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(e/t)+"px",this._mScale.innerHTML=e<1e3?e+" m":e/1e3+" km"},_updateImperial:function(t){var e,n,i,o=3.2808399*t,s=this._iScale;o>5280?(e=o/5280,n=this._getRoundNum(e),s.style.width=this._getScaleWidth(n/e)+"px",s.innerHTML=n+" mi"):(i=this._getRoundNum(o),s.style.width=this._getScaleWidth(i/o)+"px",s.innerHTML=i+" ft")},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}}),s.control.scale=function(t){return new s.Control.Scale(t)},s.Control.Layers=s.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(t,e,n){s.setOptions(this,n),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var i in t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0);
},onAdd:function(t){return this._initLayout(),this._update(),t.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(t){t.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._update(),this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._update(),this},removeLayer:function(t){var e=s.stamp(t);return delete this._layers[e],this._update(),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=s.DomUtil.create("div",t);e.setAttribute("aria-haspopup",!0),s.Browser.touch?s.DomEvent.on(e,"click",s.DomEvent.stopPropagation):s.DomEvent.disableClickPropagation(e).disableScrollPropagation(e);var n=this._form=s.DomUtil.create("form",t+"-list");if(this.options.collapsed){s.Browser.android||s.DomEvent.on(e,"mouseover",this._expand,this).on(e,"mouseout",this._collapse,this);var i=this._layersLink=s.DomUtil.create("a",t+"-toggle",e);i.href="#",i.title="Layers",s.Browser.touch?s.DomEvent.on(i,"click",s.DomEvent.stop).on(i,"click",this._expand,this):s.DomEvent.on(i,"focus",this._expand,this),s.DomEvent.on(n,"click",function(){setTimeout(s.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=s.DomUtil.create("div",t+"-base",n),this._separator=s.DomUtil.create("div",t+"-separator",n),this._overlaysList=s.DomUtil.create("div",t+"-overlays",n),e.appendChild(n)},_addLayer:function(t,e,n){var i=s.stamp(t);this._layers[i]={layer:t,name:e,overlay:n},this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var t,e,n=!1,i=!1;for(t in this._layers)e=this._layers[t],this._addItem(e),i=i||e.overlay,n=n||!e.overlay;this._separator.style.display=i&&n?"":"none"}},_onLayerChange:function(t){var e=this._layers[s.stamp(t.layer)];if(e){this._handlingClick||this._update();var n=e.overlay?"layeradd"===t.type?"overlayadd":"overlayremove":"layeradd"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)}},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"';e&&(i+=' checked="checked"'),i+="/>";var o=n.createElement("div");return o.innerHTML=i,o.firstChild},_addItem:function(t){var e,i=n.createElement("label"),o=this._map.hasLayer(t.layer);t.overlay?(e=n.createElement("input"),e.type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=o):e=this._createRadioElement("leaflet-base-layers",o),e.layerId=s.stamp(t.layer),s.DomEvent.on(e,"click",this._onInputClick,this);var r=n.createElement("span");r.innerHTML=" "+t.name,i.appendChild(e),i.appendChild(r);var a=t.overlay?this._overlaysList:this._baseLayersList;return a.appendChild(i),i},_onInputClick:function(){var t,e,n,i=this._form.getElementsByTagName("input"),o=i.length;for(this._handlingClick=!0,t=0;t<o;t++)e=i[t],n=this._layers[e.layerId],e.checked&&!this._map.hasLayer(n.layer)?this._map.addLayer(n.layer):!e.checked&&this._map.hasLayer(n.layer)&&this._map.removeLayer(n.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){s.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),s.control.layers=function(t,e,n){return new s.Control.Layers(t,e,n)},s.PosAnimation=s.Class.extend({includes:s.Mixin.Events,run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._newPos=e,this.fire("start"),t.style[s.DomUtil.TRANSITION]="all "+(n||.25)+"s cubic-bezier(0,0,"+(i||.5)+",1)",s.DomEvent.on(t,s.DomUtil.TRANSITION_END,this._onTransitionEnd,this),s.DomUtil.setPosition(t,e),s.Util.falseFn(t.offsetWidth),this._stepTimer=setInterval(s.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(s.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),s.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var t=this._getPos();return t?(this._el._leaflet_pos=t,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var e,n,i,o=this._el,r=t.getComputedStyle(o);if(s.Browser.any3d){if(i=r[s.DomUtil.TRANSFORM].match(this._transformRe),!i)return;e=parseFloat(i[1]),n=parseFloat(i[2])}else e=parseFloat(r.left),n=parseFloat(r.top);return new s.Point(e,n,(!0))},_onTransitionEnd:function(){s.DomEvent.off(this._el,s.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[s.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),s.Map.include({setView:function(t,e,n){if(e=e===i?this._zoom:this._limitZoom(e),t=this._limitCenter(s.latLng(t),e,this.options.maxBounds),n=n||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==i&&(n.zoom=s.extend({animate:n.animate},n.zoom),n.pan=s.extend({animate:n.animate},n.pan));var o=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan);if(o)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},panBy:function(t,e){if(t=s.point(t).round(),e=e||{},!t.x&&!t.y)return this;if(this._panAnim||(this._panAnim=new s.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){s.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t);this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){s.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._floor();return!((e&&e.animate)!==!0&&!this.getSize().contains(n))&&(this.panBy(n,e),!0)}}),s.PosAnimation=s.DomUtil.TRANSITION?s.PosAnimation:s.PosAnimation.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=s.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=s.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var t=+new Date-this._startTime,e=1e3*this._duration;t<e?this._runFrame(this._easeOut(t/e)):(this._runFrame(1),this._complete())},_runFrame:function(t){var e=this._startPos.add(this._offset.multiplyBy(t));s.DomUtil.setPosition(this._el,e),this.fire("step")},_complete:function(){s.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),s.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),s.DomUtil.TRANSITION&&s.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&s.DomUtil.TRANSITION&&s.Browser.any3d&&!s.Browser.android23&&!s.Browser.mobileOpera,this._zoomAnimated&&s.DomEvent.on(this._mapPane,s.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),s.Map.include(s.DomUtil.TRANSITION?{_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/i),s=this._getCenterLayerPoint()._add(o);return!(n.animate!==!0&&!this.getSize().contains(o))&&(this.fire("movestart").fire("zoomstart"),this._animateZoom(t,e,s,i,null,!0),!0)},_animateZoom:function(t,e,n,i,o,r,a){a||(this._animatingZoom=!0),s.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=t,this._animateToZoom=e,s.Draggable&&(s.Draggable._disabled=!0),s.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:t,zoom:e,origin:n,scale:i,delta:o,backwards:r}),setTimeout(s.bind(this._onZoomTransitionEnd,this),250)},this)},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._animatingZoom=!1,s.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),s.Util.requestAnimFrame(function(){this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),s.Draggable&&(s.Draggable._disabled=!1)},this))}}:{}),s.TileLayer.include({_animateZoom:function(t){this._animating||(this._animating=!0,this._prepareBgBuffer());var e=this._bgBuffer,n=s.DomUtil.TRANSFORM,i=t.delta?s.DomUtil.getTranslateString(t.delta):e.style[n],o=s.DomUtil.getScaleString(t.scale,t.origin);e.style[n]=t.backwards?o+" "+i:i+" "+o},_endZoomAnim:function(){var t=this._tileContainer,e=this._bgBuffer;t.style.visibility="",t.parentNode.appendChild(t),s.Util.falseFn(e.offsetWidth);var n=this._map.getZoom();(n>this.options.maxZoom||n<this.options.minZoom)&&this._clearBgBuffer(),this._animating=!1},_clearBgBuffer:function(){var t=this._map;!t||t._animatingZoom||t.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[s.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var t=this._tileContainer,e=this._bgBuffer,n=this._getLoadedTilesPercentage(e),i=this._getLoadedTilesPercentage(t);return e&&n>.5&&i<.5?(t.style.visibility="hidden",void this._stopLoadingImages(t)):(e.style.visibility="hidden",e.style[s.DomUtil.TRANSFORM]="",this._tileContainer=e,e=this._bgBuffer=t,this._stopLoadingImages(e),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(t){var e,n,i=t.getElementsByTagName("img"),o=0;for(e=0,n=i.length;e<n;e++)i[e].complete&&o++;return o/n},_stopLoadingImages:function(t){var e,n,i,o=Array.prototype.slice.call(t.getElementsByTagName("img"));for(e=0,n=o.length;e<n;e++)i=o[e],i.complete||(i.onload=s.Util.falseFn,i.onerror=s.Util.falseFn,i.src=s.Util.emptyImageUrl,i.parentNode.removeChild(i))}}),s.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(t){if(t=this._locateOptions=s.extend(this._defaultLocateOptions,t),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=s.bind(this._handleGeolocationResponse,this),n=s.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,n=t.coords.longitude,i=new s.LatLng(e,n),o=180*t.coords.accuracy/40075017,r=o/Math.cos(s.LatLng.DEG_TO_RAD*e),a=s.latLngBounds([e-o,n-r],[e+o,n+r]),l=this._locateOptions;if(l.setView){var h=Math.min(this.getBoundsZoom(a),l.maxZoom);this.setView(i,h)}var c={latlng:i,bounds:a,timestamp:t.timestamp};for(var u in t.coords)"number"==typeof t.coords[u]&&(c[u]=t.coords[u]);this.fire("locationfound",c)}})}(window,document)},{}],300:[function(t,e,n){function i(t){return t*(Math.PI/180)}function o(t){return 180*(t/Math.PI)}function s(t){var e,n,o,s,r,l,h,c,u,d=t.lat,p=t.lon,m=6378137,f=.00669438,_=.9996,g=i(d),v=i(p);u=Math.floor((p+180)/6)+1,180===p&&(u=60),d>=56&&d<64&&p>=3&&p<12&&(u=32),d>=72&&d<84&&(p>=0&&p<9?u=31:p>=9&&p<21?u=33:p>=21&&p<33?u=35:p>=33&&p<42&&(u=37)),e=6*(u-1)-180+3,c=i(e),n=f/(1-f),o=m/Math.sqrt(1-f*Math.sin(g)*Math.sin(g)),s=Math.tan(g)*Math.tan(g),r=n*Math.cos(g)*Math.cos(g),l=Math.cos(g)*(v-c),h=m*((1-f/4-3*f*f/64-5*f*f*f/256)*g-(3*f/8+3*f*f/32+45*f*f*f/1024)*Math.sin(2*g)+(15*f*f/256+45*f*f*f/1024)*Math.sin(4*g)-35*f*f*f/3072*Math.sin(6*g));var y=_*o*(l+(1-s+r)*l*l*l/6+(5-18*s+s*s+72*r-58*n)*l*l*l*l*l/120)+5e5,b=_*(h+o*Math.tan(g)*(l*l/2+(5-s+9*r+4*r*r)*l*l*l*l/24+(61-58*s+s*s+600*r-330*n)*l*l*l*l*l*l/720));return d<0&&(b+=1e7),{northing:Math.round(b),easting:Math.round(y),zoneNumber:u,zoneLetter:a(d)}}function r(t){var e=t.northing,n=t.easting,i=t.zoneLetter,s=t.zoneNumber;if(s<0||s>60)return null;var a,l,h,c,u,d,p,m,f,_,g=.9996,v=6378137,y=.00669438,b=(1-Math.sqrt(1-y))/(1+Math.sqrt(1-y)),x=n-5e5,L=e;i<"N"&&(L-=1e7),m=6*(s-1)-180+3,a=y/(1-y),p=L/g,f=p/(v*(1-y/4-3*y*y/64-5*y*y*y/256)),_=f+(3*b/2-27*b*b*b/32)*Math.sin(2*f)+(21*b*b/16-55*b*b*b*b/32)*Math.sin(4*f)+151*b*b*b/96*Math.sin(6*f),l=v/Math.sqrt(1-y*Math.sin(_)*Math.sin(_)),h=Math.tan(_)*Math.tan(_),c=a*Math.cos(_)*Math.cos(_),u=v*(1-y)/Math.pow(1-y*Math.sin(_)*Math.sin(_),1.5),d=x/(l*g);var w=_-l*Math.tan(_)/u*(d*d/2-(5+3*h+10*c-4*c*c-9*a)*d*d*d*d/24+(61+90*h+298*c+45*h*h-252*a-3*c*c)*d*d*d*d*d*d/720);w=o(w);var M=(d-(1+2*h+c)*d*d*d/6+(5-2*c+28*h-3*c*c+8*a+24*h*h)*d*d*d*d*d/120)/Math.cos(_);M=m+o(M);var k;if(t.accuracy){var P=r({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});k={top:P.lat,right:P.lon,bottom:w,left:M}}else k={lat:w,lon:M};return k}function a(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function l(t,e){var n=""+t.easting,i=""+t.northing;return t.zoneNumber+t.zoneLetter+h(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+i.substr(i.length-5,e)}function h(t,e,n){var i=c(n),o=Math.floor(t/1e5),s=Math.floor(e/1e5)%20;return u(o,s,i)}function c(t){var e=t%_;return 0===e&&(e=_),e}function u(t,e,n){var i=n-1,o=g.charCodeAt(i),s=v.charCodeAt(i),r=o+t-1,a=s+e,l=!1;r>w&&(r=r-w+y-1,l=!0),(r===b||o<b&&r>b||(r>b||o<b)&&l)&&r++,(r===x||o<x&&r>x||(r>x||o<x)&&l)&&(r++,r===b&&r++),r>w&&(r=r-w+y-1),a>L?(a=a-L+y-1,l=!0):l=!1,(a===b||s<b&&a>b||(a>b||s<b)&&l)&&a++,(a===x||s<x&&a>x||(a>x||s<x)&&l)&&(a++,a===b&&a++),a>L&&(a=a-L+y-1);var h=String.fromCharCode(r)+String.fromCharCode(a);return h}function d(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,i=null,o="",s=0;!/[A-Z]/.test(e=t.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+t;o+=e,s++}var r=parseInt(o,10);if(0===s||s+3>n)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(s++);if(a<="A"||"B"===a||"Y"===a||a>="Z"||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+t;i=t.substring(s,s+=2);for(var l=c(r),h=p(i.charAt(0),l),u=m(i.charAt(1),l);u<f(a);)u+=2e6;var d=n-s;if(d%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var _,g,v,y,b,x=d/2,L=0,w=0;return x>0&&(_=1e5/Math.pow(10,x),g=t.substring(s,s+x),L=parseFloat(g)*_,v=t.substring(s+x),w=parseFloat(v)*_),y=L+h,b=w+u,{easting:y,northing:b,zoneLetter:a,zoneNumber:r,accuracy:_}}function p(t,e){for(var n=g.charCodeAt(e-1),i=1e5,o=!1;n!==t.charCodeAt(0);){if(n++,n===b&&n++,n===x&&n++,n>w){if(o)throw"Bad character: "+t;n=y,o=!0}i+=1e5}return i}function m(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=v.charCodeAt(e-1),i=0,o=!1;n!==t.charCodeAt(0);){if(n++,n===b&&n++,n===x&&n++,n>L){if(o)throw"Bad character: "+t;n=y,o=!0}i+=1e5}return i}function f(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}var _=6,g="AJSAJS",v="AFAFAF",y=65,b=73,x=79,L=86,w=90;n.forward=function(t,e){return e=e||5,l(s({lat:t[1],lon:t[0]}),e)},n.inverse=function(t){var e=r(d(t.toUpperCase()));return[e.left,e.bottom,e.right,e.top]},n.toPoint=function(t){var e=n.inverse(t);return[(e[2]+e[0])/2,(e[3]+e[1])/2]}},{}],301:[function(t,e,n){"use strict";var i=t("angular"),o=t("leaflet"),s=t("esri-leaflet"),r=t("proj4leaflet");o.esri=s,o.Proj=r,t("leaflet-draw"),t("leaflet-fullscreen"),i.module("leaflet",[]).directive("leaflet",["$compile","$timeout",function(t,e){"ngInject";function n(t){var e=!1;return t.bbox&&t.bbox[1]>74&&t.bbox[0]>0&&t.bbox[2]<60&&(e=!0),e}function i(){return new o.Proj.CRS("EPSG:25833","+proj=utm +zone=33 +ellps=GRS80 +units=m +no_defs",{transformation:new o.Transformation(1,5120900,(-1),9998100),resolutions:[21674.7100160867,10837.35500804335,5418.677504021675,2709.3387520108377,1354.6693760054188,677.3346880027094,338.6673440013547,169.33367200067735,84.66683600033868,42.33341800016934,21.16670900008467,10.583354500042335,5.291677250021167,2.6458386250105836,1.3229193125052918,.6614596562526459,.33072982812632296,.16536491406316148]})}function s(t){if(n(t)){var e=r+"/Basisdata/NP_Basiskart_Svalbard_WMTS_25833/MapServer";return new o.esri.tiledMapLayer({url:e,continuousWorld:!0,attribution:'<a href="http://npolar.no">Norsk Polarinstitutt</a>'})}return o.tileLayer("//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}/",{attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community"})}var r="//geodata.npolar.no/arcgis/rest/services";return o.Icon.Default.imagePath="/assets/images",{scope:{options:"="},template:'<div class="leaflet-map"></div>',link:function(r,a){function l(t){m?(m.getLayers().length>0&&m.clearLayers(),t.on("click",function(t){t.target.editing._fireEdit()}),t.addTo(m)):t.addTo(p)}function h(t,e){var n=r.options.coverage[0];o.imageOverlay(t,n).addTo(p)}var c=Object.assign({minZoom:2,maxBounds:[[-90,180],[90,-180]],fullscreenControl:!0}),u=r.options.coverage,d=s(r.options);n(r.options)&&(c.crs=i());var p=o.map(a.find("div")[0],c).setView([69.68,18.94],4);d.addTo(p);var m=void 0;if(p.on("moveend",function(t){r.$emit("map:move",p.getBounds())}),r.options.draw){m=new o.FeatureGroup;var f=!1;r.options.edit&&(f=Object.assign({featureGroup:m},{edit:r.options.edit},{remove:r.options.remove}));var _=new o.Control.Draw({edit:f,draw:Object.assign({polyline:!1,polygon:!1,rectangle:!1,circle:!1,marker:!1},r.options.draw)});p.addControl(_),p.addLayer(m),p.on("draw:created",function(t){l(t.layer),r.$emit("mapSelect",t.layer)}),p.on("draw:edited",function(t){t.layers.eachLayer(function(t){r.$emit("mapSelect",t)})})}if(u){var g=void 0,v=void 0,y=void 0,b=void 0;g=v=u[0][1][1],b=y=u[0][1][0];var x=10,L="#0011ff";r.options.weight&&(x=r.options.weight),r.options.color&&(L=r.options.color),u.forEach(function(t){var e=t[0][0],n=t[0][1],i=t[1][0],s=t[1][1];g=Math.max(g,s),b=Math.max(b,i),v=Math.min(v,n),y=Math.min(y,e);var r=[[e,n],[i,s]],a=o.rectangle(r,{color:L,weight:x});l(a)}),p.fitBounds([[y,v],[b,g]],{padding:[20,20],maxZoom:5})}var w=void 0;r.$watchCollection("options.points",function(e){e&&(w&&(w.clearLayers(),p.removeLayer(w)),w=o.layerGroup(),w.addTo(p),e.forEach(function(e){var n=document.createElement("div");n.innerHTML=e.popup;var i=o.marker(e.point,{riseOnHover:!0}).bindPopup(t(n)(e.scope||{})[0],{autoPan:!1}).on("mouseover",function(t){t.target.openPopup()});w.addLayer(i)}))}),r.options.images&&h(r.options.images[0]),e(function(){p.invalidateSize()},10),r.$on("activate:fieldset",function(t){p.invalidateSize()}),r.$emit("map:move",p.getBounds())}}}])},{angular:"angular","esri-leaflet":296,leaflet:299,"leaflet-draw":297,"leaflet-fullscreen":298,proj4leaflet:367}],302:[function(t,e,n){function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(u===setTimeout)return setTimeout(t,0);if((u===i||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function r(t){if(d===clearTimeout)return clearTimeout(t);if((d===o||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(t);try{return d(t)}catch(e){try{return d.call(null,t)}catch(e){return d.call(this,t)}}}function a(){_&&m&&(_=!1,m.length?f=m.concat(f):g=-1,f.length&&l())}function l(){if(!_){var t=s(a);_=!0;for(var e=f.length;e;){for(m=f,f=[];++g<e;)m&&m[g].run();g=-1,e=f.length}m=null,_=!1,r(t)}}function h(t,e){this.fun=t,this.array=e}function c(){}var u,d,p=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:i}catch(t){u=i}try{d="function"==typeof clearTimeout?clearTimeout:o}catch(t){d=o}}();var m,f=[],_=!1,g=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];f.push(new h(t,e)),1!==f.length||_||s(l)},h.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],303:[function(t,e,n){function i(t,e,n){if(!(this instanceof i))return new i(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&"undefined"==typeof e){var o=t.split(",");this.x=parseFloat(o[0],10),this.y=parseFloat(o[1],10),this.z=parseFloat(o[2],10)||0}else this.x=t,this.y=e,this.z=n||0;this.clone=function(){return new i(this.x,this.y,this.z)},this.toArray=function(){return this.z?[this.x,this.y,this.z]:[this.x,this.y]},this.toString=function(){return this.z?"x="+this.x+",y="+this.y+",z="+this.z:"x="+this.x+",y="+this.y},this.toShortString=function(){return this.z?this.x+","+this.y+","+this.z:this.x+","+this.y}}var o=t("mgrs");i.fromMGRS=function(t){return new i(o.toPoint(t))},i.prototype.toMGRS=function(t){return o.forward([this.x,this.y],t)},e.exports=i},{mgrs:300}],304:[function(t,e,n){function i(t){if(!(this instanceof i))return new i(t);this.srsCodeInput=t,this.x0=0,this.y0=0;var e;"string"==typeof t?t in s?(this.deriveConstants(s[t]),o(this,s[t])):t.indexOf("GEOGCS")>=0||t.indexOf("GEOCCS")>=0||t.indexOf("PROJCS")>=0||t.indexOf("LOCAL_CS")>=0?(e=h(t),this.deriveConstants(e),o(this,e)):"+"===t[0]&&(e=c(t),this.deriveConstants(e),o(this,e)):(this.deriveConstants(t),o(this,t)),this.initTransforms(this.projName)}var o=t("./extend"),s=t("./defs"),r={};r.grids=t("./constants/grids"),r.Datum=t("./constants/Datum"),r.Ellipsoid=t("./constants/Ellipsoid");var a=t("./datum"),l=t("./projections/index"),h=t("./wkt"),c=t("./projString"),u=1e-10,d=.16666666666666666,p=.04722222222222222,m=.022156084656084655;i.projections=l,i.projections.start(),i.prototype={initTransforms:function(t){var e=i.projections.get(t);if(!e)throw"unknown projection "+t;o(this,e),this.init()},deriveConstants:function(t){if(t.nadgrids&&0===t.nadgrids.length&&(t.nadgrids=null),t.nadgrids){t.grids=t.nadgrids.split(",");var e=null,n=t.grids.length;if(n>0)for(var i=0;i<n;i++){e=t.grids[i];var s=e.split("@");""!==s[s.length-1]&&(t.grids[i]={mandatory:1===s.length,name:s[s.length-1],grid:r.grids[s[s.length-1]]},t.grids[i].mandatory&&!t.grids[i].grid)}}if(t.datumCode&&"none"!==t.datumCode){var l=r.Datum[t.datumCode];l&&(t.datum_params=l.towgs84?l.towgs84.split(","):null,t.ellps=l.ellipse,t.datumName=l.datumName?l.datumName:t.datumCode)}if(!t.a){var h=r.Ellipsoid[t.ellps]?r.Ellipsoid[t.ellps]:r.Ellipsoid.WGS84;o(t,h)}t.rf&&!t.b&&(t.b=(1-1/t.rf)*t.a),(0===t.rf||Math.abs(t.a-t.b)<u)&&(t.sphere=!0,t.b=t.a),t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=(t.a2-t.b2)/t.a2,t.e=Math.sqrt(t.es),t.R_A&&(t.a*=1-t.es*(d+t.es*(p+t.es*m)),t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=0),t.ep2=(t.a2-t.b2)/t.b2,t.k0||(t.k0=1),t.axis||(t.axis="enu"),t.datum=a(t)}},e.exports=i},{"./constants/Datum":326,"./constants/Ellipsoid":327,"./constants/grids":329,"./datum":331,"./defs":333,"./extend":334,"./projString":337,"./projections/index":346,"./wkt":366}],305:[function(t,e,n){e.exports=function(t,e,n){var i,o,s,r=n.x,a=n.y,l=n.z||0;for(s=0;s<3;s++)if(!e||2!==s||void 0!==n.z)switch(0===s?(i=r,o="x"):1===s?(i=a,o="y"):(i=l,o="z"),t.axis[s]){case"e":n[o]=i;break;case"w":n[o]=-i;break;case"n":n[o]=i;break;case"s":n[o]=-i;break;case"u":void 0!==n[o]&&(n.z=i);break;case"d":void 0!==n[o]&&(n.z=-i);break;default:return null}return n}},{}],306:[function(t,e,n){var i=Math.PI/2,o=t("./sign");e.exports=function(t){return Math.abs(t)<i?t:t-o(t)*Math.PI}},{"./sign":323}],307:[function(t,e,n){var i=2*Math.PI,o=t("./sign");e.exports=function(t){return Math.abs(t)<Math.PI?t:t-o(t)*i}},{"./sign":323}],308:[function(t,e,n){e.exports=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}},{}],309:[function(t,e,n){e.exports=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))}},{}],310:[function(t,e,n){e.exports=function(t){return.375*t*(1+.25*t*(1+.46875*t))}},{}],311:[function(t,e,n){e.exports=function(t){return.05859375*t*t*(1+.75*t)}},{}],312:[function(t,e,n){e.exports=function(t){return t*t*t*(35/3072)}},{}],313:[function(t,e,n){e.exports=function(t,e,n){var i=e*n;return t/Math.sqrt(1-i*i)}},{}],314:[function(t,e,n){e.exports=function(t,e,n,i,o){var s,r;s=t/e;for(var a=0;a<15;a++)if(r=(t-(e*s-n*Math.sin(2*s)+i*Math.sin(4*s)-o*Math.sin(6*s)))/(e-2*n*Math.cos(2*s)+4*i*Math.cos(4*s)-6*o*Math.cos(6*s)),s+=r,Math.abs(r)<=1e-10)return s;return NaN}},{}],315:[function(t,e,n){var i=Math.PI/2;e.exports=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*i:i;for(var o,s,r,a,l=Math.asin(.5*e),h=0;h<30;h++)if(s=Math.sin(l),r=Math.cos(l),a=t*s,o=Math.pow(1-a*a,2)/(2*r)*(e/(1-t*t)-s/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),l+=o,Math.abs(o)<=1e-10)return l;return NaN}},{}],316:[function(t,e,n){e.exports=function(t,e,n,i,o){return t*o-e*Math.sin(2*o)+n*Math.sin(4*o)-i*Math.sin(6*o)}},{}],317:[function(t,e,n){e.exports=function(t,e,n){var i=t*e;return n/Math.sqrt(1-i*i)}},{}],318:[function(t,e,n){var i=Math.PI/2;e.exports=function(t,e){for(var n,o,s=.5*t,r=i-2*Math.atan(e),a=0;a<=15;a++)if(n=t*Math.sin(r),o=i-2*Math.atan(e*Math.pow((1-n)/(1+n),s))-r,r+=o,Math.abs(o)<=1e-10)return r;return-9999}},{}],319:[function(t,e,n){var i=1,o=.25,s=.046875,r=.01953125,a=.01068115234375,l=.75,h=.46875,c=.013020833333333334,u=.007120768229166667,d=.3645833333333333,p=.005696614583333333,m=.3076171875;e.exports=function(t){var e=[];e[0]=i-t*(o+t*(s+t*(r+t*a))),e[1]=t*(l-t*(s+t*(r+t*a)));var n=t*t;return e[2]=n*(h-t*(c+t*u)),n*=t,e[3]=n*(d-t*p),e[4]=n*t*m,e}},{}],320:[function(t,e,n){var i=t("./pj_mlfn"),o=1e-10,s=20;e.exports=function(t,e,n){for(var r=1/(1-e),a=t,l=s;l;--l){var h=Math.sin(a),c=1-e*h*h;if(c=(i(a,h,Math.cos(a),n)-t)*(c*Math.sqrt(c))*r,a-=c,Math.abs(c)<o)return a}return a}},{"./pj_mlfn":321}],321:[function(t,e,n){e.exports=function(t,e,n,i){return n*=e,e*=e,i[0]*t-n*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}},{}],322:[function(t,e,n){e.exports=function(t,e){var n;return t>1e-7?(n=t*e,(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*e}},{}],323:[function(t,e,n){e.exports=function(t){return t<0?-1:1}},{}],324:[function(t,e,n){e.exports=function(t,e){return Math.pow((1-t)/(1+t),e)}},{}],325:[function(t,e,n){var i=Math.PI/2;e.exports=function(t,e,n){var o=t*n,s=.5*t;return o=Math.pow((1-o)/(1+o),s),Math.tan(.5*(i-e))/o}},{}],326:[function(t,e,n){n.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},n.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},n.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},n.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},n.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},n.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},n.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},n.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},n.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},n.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},n.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},n.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},n.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},n.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},n.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"}},{}],327:[function(t,e,n){n.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},n.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},n.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},n.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},n.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},n.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},n.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},n.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},n.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},n.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},n.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},n.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},n.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},n.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},n.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},n.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},n.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},n.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},n.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},n.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},n.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},n.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},n.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},n.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},n.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},n.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},n.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},n.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},n.hough={a:6378270,rf:297,ellipseName:"Hough"},n.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},n.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},n.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},n.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},n.new_intl={a:6378157.5,b:6356772.2,
ellipseName:"New International 1967"},n.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},n.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},n.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},n.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},n.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},n.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},n.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"},n.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"},n.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},{}],328:[function(t,e,n){n.greenwich=0,n.lisbon=-9.131906111111,n.paris=2.337229166667,n.bogota=-74.080916666667,n.madrid=-3.687938888889,n.rome=12.452333333333,n.bern=7.439583333333,n.jakarta=106.807719444444,n.ferro=-17.666666666667,n.brussels=4.367975,n.stockholm=18.058277777778,n.athens=23.7163375,n.oslo=10.722916666667},{}],329:[function(t,e,n){n["null"]={ll:[-3.14159265,-1.57079633],del:[3.14159265,1.57079633],lim:[3,3],count:9,cvs:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]]}},{}],330:[function(t,e,n){function i(t,e,n){var i;return Array.isArray(n)?(i=l(t,e,r(n)),3===n.length?[i.x,i.y,i.z]:[i.x,i.y]):l(t,e,n)}function o(t){return t instanceof a?t:t.oProj?t.oProj:a(t)}function s(t,e,n){t=o(t);var s,r=!1;return"undefined"==typeof e?(e=t,t=h,r=!0):("undefined"!=typeof e.x||Array.isArray(e))&&(n=e,e=t,t=h,r=!0),e=o(e),n?i(t,e,n):(s={forward:function(n){return i(t,e,n)},inverse:function(n){return i(e,t,n)}},r&&(s.oProj=e),s)}var r=t("./Point"),a=t("./Proj"),l=t("./transform"),h=a("WGS84");e.exports=s},{"./Point":303,"./Proj":304,"./transform":364}],331:[function(t,e,n){var i=Math.PI/2,o=1,s=2,r=3,a=4,l=5,h=484813681109536e-20,c=1.0026,u=.3826834323650898,d=function(t){if(!(this instanceof d))return new d(t);if(this.datum_type=a,t){if(t.datumCode&&"none"===t.datumCode&&(this.datum_type=l),t.datum_params){for(var e=0;e<t.datum_params.length;e++)t.datum_params[e]=parseFloat(t.datum_params[e]);0===t.datum_params[0]&&0===t.datum_params[1]&&0===t.datum_params[2]||(this.datum_type=o),t.datum_params.length>3&&(0===t.datum_params[3]&&0===t.datum_params[4]&&0===t.datum_params[5]&&0===t.datum_params[6]||(this.datum_type=s,t.datum_params[3]*=h,t.datum_params[4]*=h,t.datum_params[5]*=h,t.datum_params[6]=t.datum_params[6]/1e6+1))}this.datum_type=t.grids?r:this.datum_type,this.a=t.a,this.b=t.b,this.es=t.es,this.ep2=t.ep2,this.datum_params=t.datum_params,this.datum_type===r&&(this.grids=t.grids)}};d.prototype={compare_datums:function(t){return this.datum_type===t.datum_type&&(!(this.a!==t.a||Math.abs(this.es-t.es)>5e-11)&&(this.datum_type===o?this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]:this.datum_type===s?this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]&&this.datum_params[3]===t.datum_params[3]&&this.datum_params[4]===t.datum_params[4]&&this.datum_params[5]===t.datum_params[5]&&this.datum_params[6]===t.datum_params[6]:this.datum_type!==r&&t.datum_type!==r||this.nadgrids===t.nadgrids))},geodetic_to_geocentric:function(t){var e,n,o,s,r,a,l,h=t.x,c=t.y,u=t.z?t.z:0,d=0;if(c<-i&&c>-1.001*i)c=-i;else if(c>i&&c<1.001*i)c=i;else if(c<-i||c>i)return null;return h>Math.PI&&(h-=2*Math.PI),r=Math.sin(c),l=Math.cos(c),a=r*r,s=this.a/Math.sqrt(1-this.es*a),e=(s+u)*l*Math.cos(h),n=(s+u)*l*Math.sin(h),o=(s*(1-this.es)+u)*r,t.x=e,t.y=n,t.z=o,d},geocentric_to_geodetic:function(t){var e,n,o,s,r,a,l,h,c,u,d,p,m,f,_,g,v,y=1e-12,b=y*y,x=30,L=t.x,w=t.y,M=t.z?t.z:0;if(m=!1,e=Math.sqrt(L*L+w*w),n=Math.sqrt(L*L+w*w+M*M),e/this.a<y){if(m=!0,_=0,n/this.a<y)return g=i,void(v=-this.b)}else _=Math.atan2(w,L);o=M/n,s=e/n,r=1/Math.sqrt(1-this.es*(2-this.es)*s*s),h=s*(1-this.es)*r,c=o*r,f=0;do f++,l=this.a/Math.sqrt(1-this.es*c*c),v=e*h+M*c-l*(1-this.es*c*c),a=this.es*l/(l+v),r=1/Math.sqrt(1-a*(2-a)*s*s),u=s*(1-a)*r,d=o*r,p=d*h-u*c,h=u,c=d;while(p*p>b&&f<x);return g=Math.atan(d/Math.abs(u)),t.x=_,t.y=g,t.z=v,t},geocentric_to_geodetic_noniter:function(t){var e,n,o,s,r,a,l,h,d,p,m,f,_,g,v,y,b,x=t.x,L=t.y,w=t.z?t.z:0;if(x=parseFloat(x),L=parseFloat(L),w=parseFloat(w),b=!1,0!==x)e=Math.atan2(L,x);else if(L>0)e=i;else if(L<0)e=-i;else if(b=!0,e=0,w>0)n=i;else{if(!(w<0))return n=i,void(o=-this.b);n=-i}return r=x*x+L*L,s=Math.sqrt(r),a=w*c,h=Math.sqrt(a*a+r),p=a/h,f=s/h,m=p*p*p,l=w+this.b*this.ep2*m,y=s-this.a*this.es*f*f*f,d=Math.sqrt(l*l+y*y),_=l/d,g=y/d,v=this.a/Math.sqrt(1-this.es*_*_),o=g>=u?s/g-v:g<=-u?s/-g-v:w/_+v*(this.es-1),b===!1&&(n=Math.atan(_/g)),t.x=e,t.y=n,t.z=o,t},geocentric_to_wgs84:function(t){if(this.datum_type===o)t.x+=this.datum_params[0],t.y+=this.datum_params[1],t.z+=this.datum_params[2];else if(this.datum_type===s){var e=this.datum_params[0],n=this.datum_params[1],i=this.datum_params[2],r=this.datum_params[3],a=this.datum_params[4],l=this.datum_params[5],h=this.datum_params[6],c=h*(t.x-l*t.y+a*t.z)+e,u=h*(l*t.x+t.y-r*t.z)+n,d=h*(-a*t.x+r*t.y+t.z)+i;t.x=c,t.y=u,t.z=d}},geocentric_from_wgs84:function(t){if(this.datum_type===o)t.x-=this.datum_params[0],t.y-=this.datum_params[1],t.z-=this.datum_params[2];else if(this.datum_type===s){var e=this.datum_params[0],n=this.datum_params[1],i=this.datum_params[2],r=this.datum_params[3],a=this.datum_params[4],l=this.datum_params[5],h=this.datum_params[6],c=(t.x-e)/h,u=(t.y-n)/h,d=(t.z-i)/h;t.x=c+l*u-a*d,t.y=-l*c+u+r*d,t.z=a*c-r*u+d}}},e.exports=d},{}],332:[function(t,e,n){var i=1,o=2,s=3,r=5,a=6378137,l=.006694379990141316;e.exports=function(t,e,n){function h(t){return t===i||t===o}var c,u,d;if(t.compare_datums(e))return n;if(t.datum_type===r||e.datum_type===r)return n;var p=t.a,m=t.es,f=e.a,_=e.es,g=t.datum_type;if(g===s)if(0===this.apply_gridshift(t,0,n))t.a=a,t.es=l;else{if(!t.datum_params)return t.a=p,t.es=t.es,n;for(c=1,u=0,d=t.datum_params.length;u<d;u++)c*=t.datum_params[u];if(0===c)return t.a=p,t.es=t.es,n;g=t.datum_params.length>3?o:i}return e.datum_type===s&&(e.a=a,e.es=l),(t.es!==e.es||t.a!==e.a||h(g)||h(e.datum_type))&&(t.geodetic_to_geocentric(n),h(t.datum_type)&&t.geocentric_to_wgs84(n),h(e.datum_type)&&e.geocentric_from_wgs84(n),e.geocentric_to_geodetic(n)),e.datum_type===s&&this.apply_gridshift(e,1,n),t.a=p,t.es=m,e.a=f,e.es=_,n}},{}],333:[function(t,e,n){function i(t){var e=this;if(2===arguments.length)"+"===arguments[1][0]?i[t]=s(arguments[1]):i[t]=r(arguments[1]);else if(1===arguments.length)return Array.isArray(t)?t.map(function(t){Array.isArray(t)?i.apply(e,t):i(t)}):void("string"==typeof t||("EPSG"in t?i["EPSG:"+t.EPSG]=t:"ESRI"in t?i["ESRI:"+t.ESRI]=t:"IAU2000"in t&&(i["IAU2000:"+t.IAU2000]=t)))}var o=t("./global"),s=t("./projString"),r=t("./wkt");o(i),e.exports=i},{"./global":335,"./projString":337,"./wkt":366}],334:[function(t,e,n){e.exports=function(t,e){t=t||{};var n,i;if(!e)return t;for(i in e)n=e[i],void 0!==n&&(t[i]=n);return t}},{}],335:[function(t,e,n){e.exports=function(t){t("WGS84","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}},{}],336:[function(t,e,n){var i=t("./core");i.defaultDatum="WGS84",i.Proj=t("./Proj"),i.WGS84=new i.Proj("WGS84"),i.Point=t("./Point"),i.defs=t("./defs"),i.transform=t("./transform"),i.mgrs=t("mgrs"),i.version=t("./version"),e.exports=i},{"./Point":303,"./Proj":304,"./core":330,"./defs":333,"./transform":364,"./version":365,mgrs:300}],337:[function(t,e,n){var i=.017453292519943295,o=t("./constants/PrimeMeridian");e.exports=function(t){var e={},n={};t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).forEach(function(t){var e=t.split("=");e.push(!0),n[e[0].toLowerCase()]=e[1]});var s,r,a,l={proj:"projName",datum:"datumCode",rf:function(t){e.rf=parseFloat(t,10)},lat_0:function(t){e.lat0=t*i},lat_1:function(t){e.lat1=t*i},lat_2:function(t){e.lat2=t*i},lat_ts:function(t){e.lat_ts=t*i},lon_0:function(t){e.long0=t*i},lon_1:function(t){e.long1=t*i},lon_2:function(t){e.long2=t*i},alpha:function(t){e.alpha=parseFloat(t)*i},lonc:function(t){e.longc=t*i},x_0:function(t){e.x0=parseFloat(t,10)},y_0:function(t){e.y0=parseFloat(t,10)},k_0:function(t){e.k0=parseFloat(t,10)},k:function(t){e.k0=parseFloat(t,10)},r_a:function(){e.R_A=!0},zone:function(t){e.zone=parseInt(t,10)},south:function(){e.utmSouth=!0},towgs84:function(t){e.datum_params=t.split(",").map(function(t){return parseFloat(t,10)})},to_meter:function(t){e.to_meter=parseFloat(t,10)},from_greenwich:function(t){e.from_greenwich=t*i},pm:function(t){e.from_greenwich=(o[t]?o[t]:parseFloat(t,10))*i},nadgrids:function(t){"@null"===t?e.datumCode="none":e.nadgrids=t},axis:function(t){var n="ewnsud";3===t.length&&n.indexOf(t.substr(0,1))!==-1&&n.indexOf(t.substr(1,1))!==-1&&n.indexOf(t.substr(2,1))!==-1&&(e.axis=t)}};for(s in n)r=n[s],s in l?(a=l[s],"function"==typeof a?a(r):e[a]=r):e[s]=r;return e}},{"./constants/PrimeMeridian":328}],338:[function(t,e,n){var i=1e-10,o=t("../common/msfnz"),s=t("../common/qsfnz"),r=t("../common/adjust_lon"),a=t("../common/asinz");n.init=function(){Math.abs(this.lat1+this.lat2)<i||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=o(this.e3,this.sin_po,this.cos_po),this.qs1=s(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=o(this.e3,this.sin_po,this.cos_po),this.qs2=s(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=s(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>i?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},n.forward=function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var i=s(this.e3,this.sin_phi,this.cos_phi),o=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,a=this.ns0*r(e-this.long0),l=o*Math.sin(a)+this.x0,h=this.rh-o*Math.cos(a)+this.y0;return t.x=l,t.y=h,t},n.inverse=function(t){var e,n,i,o,s,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),o=0,0!==e&&(o=Math.atan2(i*t.x,i*t.y)),i=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-i*i)/(2*this.ns0)):(n=(this.c-i*i)/this.ns0,a=this.phi1z(this.e3,n)),s=r(o/this.ns0+this.long0),t.x=s,t.y=a,t},n.phi1z=function(t,e){var n,o,s,r,l,h=a(.5*e);if(t<i)return h;for(var c=t*t,u=1;u<=25;u++)if(n=Math.sin(h),o=Math.cos(h),s=t*n,r=1-s*s,l=.5*r*r/o*(e/(1-c)-n/r+.5/t*Math.log((1-s)/(1+s))),h+=l,Math.abs(l)<=1e-7)return h;return null},n.names=["Albers_Conic_Equal_Area","Albers","aea"]},{"../common/adjust_lon":307,"../common/asinz":308,"../common/msfnz":317,"../common/qsfnz":322}],339:[function(t,e,n){var i=t("../common/adjust_lon"),o=Math.PI/2,s=1e-10,r=t("../common/mlfn"),a=t("../common/e0fn"),l=t("../common/e1fn"),h=t("../common/e2fn"),c=t("../common/e3fn"),u=t("../common/gN"),d=t("../common/asinz"),p=t("../common/imlfn");n.init=function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},n.forward=function(t){var e,n,d,p,m,f,_,g,v,y,b,x,L,w,M,k,P,S,E,T,C,D,j,O=t.x,I=t.y,A=Math.sin(t.y),z=Math.cos(t.y),N=i(O-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=s?(t.x=this.x0+this.a*(o-I)*Math.sin(N),t.y=this.y0-this.a*(o-I)*Math.cos(N),t):Math.abs(this.sin_p12+1)<=s?(t.x=this.x0+this.a*(o+I)*Math.sin(N),t.y=this.y0+this.a*(o+I)*Math.cos(N),t):(S=this.sin_p12*A+this.cos_p12*z*Math.cos(N),k=Math.acos(S),P=k/Math.sin(k),t.x=this.x0+this.a*P*z*Math.sin(N),t.y=this.y0+this.a*P*(this.cos_p12*A-this.sin_p12*z*Math.cos(N)),t):(e=a(this.es),n=l(this.es),d=h(this.es),p=c(this.es),Math.abs(this.sin_p12-1)<=s?(m=this.a*r(e,n,d,p,o),f=this.a*r(e,n,d,p,I),t.x=this.x0+(m-f)*Math.sin(N),t.y=this.y0-(m-f)*Math.cos(N),t):Math.abs(this.sin_p12+1)<=s?(m=this.a*r(e,n,d,p,o),f=this.a*r(e,n,d,p,I),t.x=this.x0+(m+f)*Math.sin(N),t.y=this.y0+(m+f)*Math.cos(N),t):(_=A/z,g=u(this.a,this.e,this.sin_p12),v=u(this.a,this.e,A),y=Math.atan((1-this.es)*_+this.es*g*this.sin_p12/(v*z)),b=Math.atan2(Math.sin(N),this.cos_p12*Math.tan(y)-this.sin_p12*Math.cos(N)),E=0===b?Math.asin(this.cos_p12*Math.sin(y)-this.sin_p12*Math.cos(y)):Math.abs(Math.abs(b)-Math.PI)<=s?-Math.asin(this.cos_p12*Math.sin(y)-this.sin_p12*Math.cos(y)):Math.asin(Math.sin(N)*Math.cos(y)/Math.sin(b)),x=this.e*this.sin_p12/Math.sqrt(1-this.es),L=this.e*this.cos_p12*Math.cos(b)/Math.sqrt(1-this.es),w=x*L,M=L*L,T=E*E,C=T*E,D=C*E,j=D*E,k=g*E*(1-T*M*(1-M)/6+C/8*w*(1-2*M)+D/120*(M*(4-7*M)-3*x*x*(1-7*M))-j/48*w),t.x=this.x0+k*Math.sin(b),t.y=this.y0+k*Math.cos(b),t))},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n,m,f,_,g,v,y,b,x,L,w,M,k,P,S,E,T,C,D,j,O,I;if(this.sphere){if(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*o*this.a)return;return n=e/this.a,m=Math.sin(n),f=Math.cos(n),_=this.long0,Math.abs(e)<=s?g=this.lat0:(g=d(f*this.sin_p12+t.y*m*this.cos_p12/e),v=Math.abs(this.lat0)-o,_=i(Math.abs(v)<=s?this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y):this.long0+Math.atan2(t.x*m,e*this.cos_p12*f-t.y*this.sin_p12*m))),t.x=_,t.y=g,t}return y=a(this.es),b=l(this.es),x=h(this.es),L=c(this.es),Math.abs(this.sin_p12-1)<=s?(w=this.a*r(y,b,x,L,o),e=Math.sqrt(t.x*t.x+t.y*t.y),M=w-e,g=p(M/this.a,y,b,x,L),_=i(this.long0+Math.atan2(t.x,-1*t.y)),t.x=_,t.y=g,t):Math.abs(this.sin_p12+1)<=s?(w=this.a*r(y,b,x,L,o),e=Math.sqrt(t.x*t.x+t.y*t.y),M=e-w,g=p(M/this.a,y,b,x,L),_=i(this.long0+Math.atan2(t.x,t.y)),t.x=_,t.y=g,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),S=Math.atan2(t.x,t.y),k=u(this.a,this.e,this.sin_p12),E=Math.cos(S),T=this.e*this.cos_p12*E,C=-T*T/(1-this.es),D=3*this.es*(1-C)*this.sin_p12*this.cos_p12*E/(1-this.es),j=e/k,O=j-C*(1+C)*Math.pow(j,3)/6-D*(1+3*C)*Math.pow(j,4)/24,I=1-C*O*O/2-j*O*O*O/6,P=Math.asin(this.sin_p12*Math.cos(O)+this.cos_p12*Math.sin(O)*E),_=i(this.long0+Math.asin(Math.sin(S)*Math.sin(O)/Math.cos(P))),g=Math.atan((1-this.es*I*this.sin_p12/Math.sin(P))*Math.tan(P)/(1-this.es)),t.x=_,t.y=g,t)},n.names=["Azimuthal_Equidistant","aeqd"]},{"../common/adjust_lon":307,"../common/asinz":308,"../common/e0fn":309,"../common/e1fn":310,"../common/e2fn":311,"../common/e3fn":312,"../common/gN":313,"../common/imlfn":314,"../common/mlfn":316}],340:[function(t,e,n){var i=t("../common/mlfn"),o=t("../common/e0fn"),s=t("../common/e1fn"),r=t("../common/e2fn"),a=t("../common/e3fn"),l=t("../common/gN"),h=t("../common/adjust_lon"),c=t("../common/adjust_lat"),u=t("../common/imlfn"),d=Math.PI/2,p=1e-10;n.init=function(){this.sphere||(this.e0=o(this.es),this.e1=s(this.es),this.e2=r(this.es),this.e3=a(this.es),this.ml0=this.a*i(this.e0,this.e1,this.e2,this.e3,this.lat0))},n.forward=function(t){var e,n,o=t.x,s=t.y;if(o=h(o-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(s)*Math.sin(o)),n=this.a*(Math.atan2(Math.tan(s),Math.cos(o))-this.lat0);else{var r=Math.sin(s),a=Math.cos(s),c=l(this.a,this.e,r),u=Math.tan(s)*Math.tan(s),d=o*Math.cos(s),p=d*d,m=this.es*a*a/(1-this.es),f=this.a*i(this.e0,this.e1,this.e2,this.e3,s);e=c*d*(1-p*u*(1/6-(8-u+8*m)*p/120)),n=f-this.ml0+c*r/a*p*(.5+(5-u+6*m)*p/24)}return t.x=e+this.x0,t.y=n+this.y0,t},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i=t.x/this.a,o=t.y/this.a;if(this.sphere){var s=o+this.lat0;e=Math.asin(Math.sin(s)*Math.cos(i)),n=Math.atan2(Math.tan(i),Math.cos(s))}else{var r=this.ml0/this.a+o,a=u(r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-d)<=p)return t.x=this.long0,t.y=d,o<0&&(t.y*=-1),t;var m=l(this.a,this.e,Math.sin(a)),f=m*m*m/this.a/this.a*(1-this.es),_=Math.pow(Math.tan(a),2),g=i*this.a/m,v=g*g;e=a-m*Math.tan(a)/f*g*g*(.5-(1+3*_)*g*g/24),n=g*(1-v*(_/3+(1+3*_)*_*v/15))/Math.cos(a)}return t.x=h(n+this.long0),t.y=c(e),t},n.names=["Cassini","Cassini_Soldner","cass"]},{"../common/adjust_lat":306,"../common/adjust_lon":307,"../common/e0fn":309,"../common/e1fn":310,"../common/e2fn":311,"../common/e3fn":312,"../common/gN":313,"../common/imlfn":314,"../common/mlfn":316}],341:[function(t,e,n){var i=t("../common/adjust_lon"),o=t("../common/qsfnz"),s=t("../common/msfnz"),r=t("../common/iqsfnz");n.init=function(){this.sphere||(this.k0=s(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},n.forward=function(t){var e,n,s=t.x,r=t.y,a=i(s-this.long0);if(this.sphere)e=this.x0+this.a*a*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var l=o(this.e,Math.sin(r));e=this.x0+this.a*this.k0*a,n=this.y0+this.a*l*.5/this.k0}return t.x=e,t.y=n,t},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n;return this.sphere?(e=i(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=r(this.e,2*t.y*this.k0/this.a),e=i(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},n.names=["cea"]},{"../common/adjust_lon":307,"../common/iqsfnz":315,"../common/msfnz":317,"../common/qsfnz":322}],342:[function(t,e,n){var i=t("../common/adjust_lon"),o=t("../common/adjust_lat");n.init=function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},n.forward=function(t){var e=t.x,n=t.y,s=i(e-this.long0),r=o(n-this.lat0);return t.x=this.x0+this.a*s*this.rc,t.y=this.y0+this.a*r,t},n.inverse=function(t){var e=t.x,n=t.y;return t.x=i(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=o(this.lat0+(n-this.y0)/this.a),t},n.names=["Equirectangular","Equidistant_Cylindrical","eqc"]},{"../common/adjust_lat":306,"../common/adjust_lon":307}],343:[function(t,e,n){var i=t("../common/e0fn"),o=t("../common/e1fn"),s=t("../common/e2fn"),r=t("../common/e3fn"),a=t("../common/msfnz"),l=t("../common/mlfn"),h=t("../common/adjust_lon"),c=t("../common/adjust_lat"),u=t("../common/imlfn"),d=1e-10;n.init=function(){Math.abs(this.lat1+this.lat2)<d||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=i(this.es),this.e1=o(this.es),this.e2=s(this.es),this.e3=r(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=a(this.e,this.sinphi,this.cosphi),this.ml1=l(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<d?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=a(this.e,this.sinphi,this.cosphi),this.ml2=l(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=l(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},n.forward=function(t){var e,n=t.x,i=t.y;if(this.sphere)e=this.a*(this.g-i);else{var o=l(this.e0,this.e1,this.e2,this.e3,i);e=this.a*(this.g-o)}var s=this.ns*h(n-this.long0),r=this.x0+e*Math.sin(s),a=this.y0+this.rh-e*Math.cos(s);return t.x=r,t.y=a,t},n.inverse=function(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,n,i,o;this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var s=0;if(0!==n&&(s=Math.atan2(e*t.x,e*t.y)),this.sphere)return o=h(this.long0+s/this.ns),i=c(this.g-n/this.a),t.x=o,t.y=i,t;var r=this.g-n/this.a;return i=u(r,this.e0,this.e1,this.e2,this.e3),o=h(this.long0+s/this.ns),t.x=o,t.y=i,t},n.names=["Equidistant_Conic","eqdc"]},{"../common/adjust_lat":306,"../common/adjust_lon":307,"../common/e0fn":309,"../common/e1fn":310,"../common/e2fn":311,"../common/e3fn":312,"../common/imlfn":314,"../common/mlfn":316,"../common/msfnz":317}],344:[function(t,e,n){var i=Math.PI/4,o=t("../common/srat"),s=Math.PI/2,r=20;n.init=function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+i)/(Math.pow(Math.tan(.5*this.lat0+i),this.C)*o(this.e*t,this.ratexp))},n.forward=function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+i),this.C)*o(this.e*Math.sin(n),this.ratexp))-s,t.x=this.C*e,t},n.inverse=function(t){for(var e=1e-14,n=t.x/this.C,a=t.y,l=Math.pow(Math.tan(.5*a+i)/this.K,1/this.C),h=r;h>0&&(a=2*Math.atan(l*o(this.e*Math.sin(t.y),-.5*this.e))-s,!(Math.abs(a-t.y)<e));--h)t.y=a;return h?(t.x=n,t.y=a,t):null},n.names=["gauss"]},{"../common/srat":324}],345:[function(t,e,n){var i=t("../common/adjust_lon"),o=1e-10,s=t("../common/asinz");n.init=function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},n.forward=function(t){var e,n,s,r,a,l,h,c,u=t.x,d=t.y;return s=i(u-this.long0),e=Math.sin(d),n=Math.cos(d),r=Math.cos(s),l=this.sin_p14*e+this.cos_p14*n*r,a=1,l>0||Math.abs(l)<=o?(h=this.x0+this.a*a*n*Math.sin(s)/l,c=this.y0+this.a*a*(this.cos_p14*e-this.sin_p14*n*r)/l):(h=this.x0+this.infinity_dist*n*Math.sin(s),c=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*r)),t.x=h,t.y=c,t},n.inverse=function(t){var e,n,o,r,a,l;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(r=Math.atan2(e,this.rc),n=Math.sin(r),o=Math.cos(r),l=s(o*this.sin_p14+t.y*n*this.cos_p14/e),a=Math.atan2(t.x*n,e*this.cos_p14*o-t.y*this.sin_p14*n),a=i(this.long0+a)):(l=this.phic0,a=0),t.x=a,t.y=l,t},n.names=["gnom"]},{"../common/adjust_lon":307,"../common/asinz":308}],346:[function(t,e,n){function i(t,e){var n=r.length;return!t.names||(r[n]=t,t.names.forEach(function(t){s[t.toLowerCase()]=n}),this)}var o=[t("./tmerc"),t("./utm"),t("./sterea"),t("./stere"),t("./somerc"),t("./omerc"),t("./lcc"),t("./krovak"),t("./cass"),t("./laea"),t("./merc"),t("./aea"),t("./gnom"),t("./cea"),t("./eqc"),t("./poly"),t("./nzmg"),t("./mill"),t("./sinu"),t("./moll"),t("./eqdc"),t("./vandg"),t("./aeqd"),t("./longlat")],s={},r=[];n.add=i,n.get=function(t){if(!t)return!1;var e=t.toLowerCase();return"undefined"!=typeof s[e]&&r[s[e]]?r[s[e]]:void 0},n.start=function(){o.forEach(i)}},{"./aea":338,"./aeqd":339,"./cass":340,"./cea":341,"./eqc":342,"./eqdc":343,"./gnom":345,"./krovak":347,"./laea":348,"./lcc":349,"./longlat":350,"./merc":351,"./mill":352,"./moll":353,"./nzmg":354,"./omerc":355,"./poly":356,"./sinu":357,"./somerc":358,"./stere":359,"./sterea":360,"./tmerc":361,"./utm":362,"./vandg":363}],347:[function(t,e,n){var i=t("../common/adjust_lon");n.init=function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},n.forward=function(t){var e,n,o,s,r,a,l,h=t.x,c=t.y,u=i(h-this.long0);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),o=-u*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(o)),r=Math.asin(Math.cos(n)*Math.sin(o)/Math.cos(s)),a=this.n*r,l=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),t.y=l*Math.cos(a)/1,t.x=l*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},n.inverse=function(t){var e,n,i,o,s,r,a,l,h=t.x;t.x=t.y,t.y=h,this.czech||(t.y*=-1,t.x*=-1),r=Math.sqrt(t.x*t.x+t.y*t.y),s=Math.atan2(t.y,t.x),o=s/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/r,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(o)),n=Math.asin(Math.cos(i)*Math.sin(o)/Math.cos(e)),t.x=this.long0-n/this.alfa,a=e,l=0;var c=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(l=1),a=t.y,c+=1;while(0===l&&c<15);return c>=15?null:t},n.names=["Krovak","krovak"]},{"../common/adjust_lon":307}],348:[function(t,e,n){var i=Math.PI/2,o=Math.PI/4,s=1e-10,r=t("../common/qsfnz"),a=t("../common/adjust_lon");n.S_POLE=1,n.N_POLE=2,n.EQUIT=3,n.OBLIQ=4,n.init=function(){var t=Math.abs(this.lat0);if(Math.abs(t-i)<s?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<s?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=r(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=r(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},n.forward=function(t){var e,n,l,h,c,u,d,p,m,f,_=t.x,g=t.y;if(_=a(_-this.long0),this.sphere){if(c=Math.sin(g),f=Math.cos(g),l=Math.cos(_),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+f*l:1+this.sinph0*c+this.cosph0*f*l,n<=s)return null;n=Math.sqrt(2/n),e=n*f*Math.sin(_),n*=this.mode===this.EQUIT?c:this.cosph0*c-this.sinph0*f*l}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(l=-l),Math.abs(g+this.phi0)<s)return null;n=o-.5*g,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),e=n*Math.sin(_),n*=l}}else{switch(d=0,p=0,m=0,l=Math.cos(_),h=Math.sin(_),c=Math.sin(g),u=r(this.e,c),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(d=u/this.qp,p=Math.sqrt(1-d*d)),this.mode){case this.OBLIQ:m=1+this.sinb1*d+this.cosb1*p*l;break;case this.EQUIT:m=1+p*l;break;case this.N_POLE:m=i+g,u=this.qp-u;break;case this.S_POLE:m=g-i,u=this.qp+u}if(Math.abs(m)<s)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:m=Math.sqrt(2/m),n=this.mode===this.OBLIQ?this.ymf*m*(this.cosb1*d-this.sinb1*p*l):(m=Math.sqrt(2/(1+p*l)))*d*this.ymf,e=this.xmf*m*p*h;break;case this.N_POLE:case this.S_POLE:u>=0?(e=(m=Math.sqrt(u))*h,n=l*(this.mode===this.S_POLE?m:-m)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n,o,r,l,h,c,u=t.x/this.a,d=t.y/this.a;if(this.sphere){var p,m=0,f=0;if(p=Math.sqrt(u*u+d*d),n=.5*p,n>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(f=Math.sin(n),m=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(p)<=s?0:Math.asin(d*f/p),u*=f,d=m*p;break;case this.OBLIQ:n=Math.abs(p)<=s?this.phi0:Math.asin(m*this.sinph0+d*f*this.cosph0/p),u*=f*this.cosph0,d=(m-Math.sin(n)*this.sinph0)*p;break;case this.N_POLE:d=-d,n=i-n;break;case this.S_POLE:n-=i}e=0!==d||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(u,d):0}else{if(c=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(u/=this.dd,d*=this.dd,h=Math.sqrt(u*u+d*d),h<s)return t.x=0,t.y=this.phi0,t;r=2*Math.asin(.5*h/this.rq),o=Math.cos(r),u*=r=Math.sin(r),this.mode===this.OBLIQ?(c=o*this.sinb1+d*r*this.cosb1/h,l=this.qp*c,d=h*this.cosb1*o-d*this.sinb1*r):(c=d*r/h,l=this.qp*c,d=h*o)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(d=-d),l=u*u+d*d,!l)return t.x=0,t.y=this.phi0,t;c=1-l/this.qp,this.mode===this.S_POLE&&(c=-c)}e=Math.atan2(u,d),n=this.authlat(Math.asin(c),this.apa)}return t.x=a(this.long0+e),t.y=n,t},n.P00=.3333333333333333,n.P01=.17222222222222222,n.P02=.10257936507936508,n.P10=.06388888888888888,n.P11=.0664021164021164,n.P20=.016415012942191543,n.authset=function(t){var e,n=[];return n[0]=t*this.P00,e=t*t,n[0]+=e*this.P01,n[1]=e*this.P10,e*=t,n[0]+=e*this.P02,n[1]+=e*this.P11,n[2]=e*this.P20,n},n.authlat=function(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)},n.names=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"]},{"../common/adjust_lon":307,"../common/qsfnz":322}],349:[function(t,e,n){var i=1e-10,o=t("../common/msfnz"),s=t("../common/tsfnz"),r=Math.PI/2,a=t("../common/sign"),l=t("../common/adjust_lon"),h=t("../common/phi2z");n.init=function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),!(Math.abs(this.lat1+this.lat2)<i)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=o(this.e,e,n),a=s(this.e,this.lat1,e),l=Math.sin(this.lat2),h=Math.cos(this.lat2),c=o(this.e,l,h),u=s(this.e,this.lat2,l),d=s(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>i?this.ns=Math.log(r/c)/Math.log(a/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(a,this.ns)),this.rh=this.a*this.f0*Math.pow(d,this.ns),this.title||(this.title="Lambert Conformal Conic")}},n.forward=function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=i&&(n=a(n)*(r-2*i));var o,h,c=Math.abs(Math.abs(n)-r);if(c>i)o=s(this.e,n,Math.sin(n)),h=this.a*this.f0*Math.pow(o,this.ns);else{if(c=n*this.ns,c<=0)return null;h=0}var u=this.ns*l(e-this.long0);return t.x=this.k0*(h*Math.sin(u))+this.x0,t.y=this.k0*(this.rh-h*Math.cos(u))+this.y0,t},n.inverse=function(t){var e,n,i,o,s,a=(t.x-this.x0)/this.k0,c=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+c*c),n=1):(e=-Math.sqrt(a*a+c*c),n=-1);var u=0;if(0!==e&&(u=Math.atan2(n*a,n*c)),0!==e||this.ns>0){if(n=1/this.ns,i=Math.pow(e/(this.a*this.f0),n),o=h(this.e,i),o===-9999)return null}else o=-r;return s=l(u/this.ns+this.long0),t.x=s,t.y=o,t},n.names=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},{"../common/adjust_lon":307,"../common/msfnz":317,"../common/phi2z":318,"../common/sign":323,"../common/tsfnz":325}],350:[function(t,e,n){function i(t){return t}n.init=function(){},n.forward=i,n.inverse=i,n.names=["longlat","identity"]},{}],351:[function(t,e,n){var i=t("../common/msfnz"),o=Math.PI/2,s=1e-10,r=57.29577951308232,a=t("../common/adjust_lon"),l=Math.PI/4,h=t("../common/tsfnz"),c=t("../common/phi2z");n.init=function(){var t=this.b/this.a;this.es=1-t*t,this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=i(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},n.forward=function(t){var e=t.x,n=t.y;if(n*r>90&&n*r<-90&&e*r>180&&e*r<-180)return null;var i,c;if(Math.abs(Math.abs(n)-o)<=s)return null;if(this.sphere)i=this.x0+this.a*this.k0*a(e-this.long0),c=this.y0+this.a*this.k0*Math.log(Math.tan(l+.5*n));else{var u=Math.sin(n),d=h(this.e,n,u);i=this.x0+this.a*this.k0*a(e-this.long0),c=this.y0-this.a*this.k0*Math.log(d)}return t.x=i,t.y=c,t},n.inverse=function(t){var e,n,i=t.x-this.x0,s=t.y-this.y0;if(this.sphere)n=o-2*Math.atan(Math.exp(-s/(this.a*this.k0)));else{var r=Math.exp(-s/(this.a*this.k0));if(n=c(this.e,r),n===-9999)return null}return e=a(this.long0+i/(this.a*this.k0)),t.x=e,t.y=n,t},n.names=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];
},{"../common/adjust_lon":307,"../common/msfnz":317,"../common/phi2z":318,"../common/tsfnz":325}],352:[function(t,e,n){var i=t("../common/adjust_lon");n.init=function(){},n.forward=function(t){var e=t.x,n=t.y,o=i(e-this.long0),s=this.x0+this.a*o,r=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=s,t.y=r,t},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e=i(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},n.names=["Miller_Cylindrical","mill"]},{"../common/adjust_lon":307}],353:[function(t,e,n){var i=t("../common/adjust_lon"),o=1e-10;n.init=function(){},n.forward=function(t){for(var e=t.x,n=t.y,s=i(e-this.long0),r=n,a=Math.PI*Math.sin(n),l=0;!0;l++){var h=-(r+Math.sin(r)-a)/(1+Math.cos(r));if(r+=h,Math.abs(h)<o)break}r/=2,Math.PI/2-Math.abs(n)<o&&(s=0);var c=.900316316158*this.a*s*Math.cos(r)+this.x0,u=1.4142135623731*this.a*Math.sin(r)+this.y0;return t.x=c,t.y=u,t},n.inverse=function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var o=i(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));o<-Math.PI&&(o=-Math.PI),o>Math.PI&&(o=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var s=Math.asin(n);return t.x=o,t.y=s,t},n.names=["Mollweide","moll"]},{"../common/adjust_lon":307}],354:[function(t,e,n){var i=484813681109536e-20;n.iterations=1,n.init=function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},n.forward=function(t){var e,n=t.x,o=t.y,s=o-this.lat0,r=n-this.long0,a=s/i*1e-5,l=r,h=1,c=0;for(e=1;e<=10;e++)h*=a,c+=this.A[e]*h;var u,d,p=c,m=l,f=1,_=0,g=0,v=0;for(e=1;e<=6;e++)u=f*p-_*m,d=_*p+f*m,f=u,_=d,g=g+this.B_re[e]*f-this.B_im[e]*_,v=v+this.B_im[e]*f+this.B_re[e]*_;return t.x=v*this.a+this.x0,t.y=g*this.a+this.y0,t},n.inverse=function(t){var e,n,o,s=t.x,r=t.y,a=s-this.x0,l=r-this.y0,h=l/this.a,c=a/this.a,u=1,d=0,p=0,m=0;for(e=1;e<=6;e++)n=u*h-d*c,o=d*h+u*c,u=n,d=o,p=p+this.C_re[e]*u-this.C_im[e]*d,m=m+this.C_im[e]*u+this.C_re[e]*d;for(var f=0;f<this.iterations;f++){var _,g,v=p,y=m,b=h,x=c;for(e=2;e<=6;e++)_=v*p-y*m,g=y*p+v*m,v=_,y=g,b+=(e-1)*(this.B_re[e]*v-this.B_im[e]*y),x+=(e-1)*(this.B_im[e]*v+this.B_re[e]*y);v=1,y=0;var L=this.B_re[1],w=this.B_im[1];for(e=2;e<=6;e++)_=v*p-y*m,g=y*p+v*m,v=_,y=g,L+=e*(this.B_re[e]*v-this.B_im[e]*y),w+=e*(this.B_im[e]*v+this.B_re[e]*y);var M=L*L+w*w;p=(b*L+x*w)/M,m=(x*L-b*w)/M}var k=p,P=m,S=1,E=0;for(e=1;e<=9;e++)S*=k,E+=this.D[e]*S;var T=this.lat0+E*i*1e5,C=this.long0+P;return t.x=C,t.y=T,t},n.names=["New_Zealand_Map_Grid","nzmg"]},{}],355:[function(t,e,n){var i=t("../common/tsfnz"),o=t("../common/adjust_lon"),s=t("../common/phi2z"),r=Math.PI/2,a=Math.PI/4,l=1e-10;n.init=function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),n=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var s=i(this.e,this.lat0,t),r=this.bl/e*Math.sqrt((1-this.es)/(1-n*n));r*r<1&&(r=1);var a,l;if(isNaN(this.longc)){var h=i(this.e,this.lat1,Math.sin(this.lat1)),c=i(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(r+Math.sqrt(r*r-1))*Math.pow(s,this.bl):this.el=(r-Math.sqrt(r*r-1))*Math.pow(s,this.bl);var u=Math.pow(h,this.bl),d=Math.pow(c,this.bl);a=this.el/u,l=.5*(a-1/a);var p=(this.el*this.el-d*u)/(this.el*this.el+d*u),m=(d-u)/(d+u),f=o(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(p*Math.tan(.5*this.bl*f)/m)/this.bl,this.long0=o(this.long0);var _=o(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*_)/l),this.alpha=Math.asin(r*Math.sin(this.gamma0))}else a=this.lat0>=0?r+Math.sqrt(r*r-1):r-Math.sqrt(r*r-1),this.el=a*Math.pow(s,this.bl),l=.5*(a-1/a),this.gamma0=Math.asin(Math.sin(this.alpha)/r),this.long0=this.longc-Math.asin(l*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(r*r-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(r*r-1),Math.cos(this.alpha))},n.forward=function(t){var e,n,s,h=t.x,c=t.y,u=o(h-this.long0);if(Math.abs(Math.abs(c)-r)<=l)s=c>0?-1:1,n=this.al/this.bl*Math.log(Math.tan(a+s*this.gamma0*.5)),e=-1*s*r*this.al/this.bl;else{var d=i(this.e,c,Math.sin(c)),p=this.el/Math.pow(d,this.bl),m=.5*(p-1/p),f=.5*(p+1/p),_=Math.sin(this.bl*u),g=(m*Math.sin(this.gamma0)-_*Math.cos(this.gamma0))/f;n=Math.abs(Math.abs(g)-1)<=l?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-g)/(1+g))/this.bl,e=Math.abs(Math.cos(this.bl*u))<=l?this.al*this.bl*u:this.al*Math.atan2(m*Math.cos(this.gamma0)+_*Math.sin(this.gamma0),Math.cos(this.bl*u))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+n):(e-=this.uc,t.x=this.x0+n*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-n*Math.sin(this.alpha)),t},n.inverse=function(t){var e,n;this.no_rot?(n=t.y-this.y0,e=t.x-this.x0):(n=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var i=Math.exp(-1*this.bl*n/this.al),a=.5*(i-1/i),h=.5*(i+1/i),c=Math.sin(this.bl*e/this.al),u=(c*Math.cos(this.gamma0)+a*Math.sin(this.gamma0))/h,d=Math.pow(this.el/Math.sqrt((1+u)/(1-u)),1/this.bl);return Math.abs(u-1)<l?(t.x=this.long0,t.y=r):Math.abs(u+1)<l?(t.x=this.long0,t.y=-1*r):(t.y=s(this.e,d),t.x=o(this.long0-Math.atan2(a*Math.cos(this.gamma0)-c*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},n.names=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},{"../common/adjust_lon":307,"../common/phi2z":318,"../common/tsfnz":325}],356:[function(t,e,n){var i=t("../common/e0fn"),o=t("../common/e1fn"),s=t("../common/e2fn"),r=t("../common/e3fn"),a=t("../common/adjust_lon"),l=t("../common/adjust_lat"),h=t("../common/mlfn"),c=1e-10,u=t("../common/gN"),d=20;n.init=function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=i(this.es),this.e1=o(this.es),this.e2=s(this.es),this.e3=r(this.es),this.ml0=this.a*h(this.e0,this.e1,this.e2,this.e3,this.lat0)},n.forward=function(t){var e,n,i,o=t.x,s=t.y,r=a(o-this.long0);if(i=r*Math.sin(s),this.sphere)Math.abs(s)<=c?(e=this.a*r,n=-1*this.a*this.lat0):(e=this.a*Math.sin(i)/Math.tan(s),n=this.a*(l(s-this.lat0)+(1-Math.cos(i))/Math.tan(s)));else if(Math.abs(s)<=c)e=this.a*r,n=-1*this.ml0;else{var d=u(this.a,this.e,Math.sin(s))/Math.tan(s);e=d*Math.sin(i),n=this.a*h(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+d*(1-Math.cos(i))}return t.x=e+this.x0,t.y=n+this.y0,t},n.inverse=function(t){var e,n,i,o,s,r,l,u,p;if(i=t.x-this.x0,o=t.y-this.y0,this.sphere)if(Math.abs(o+this.a*this.lat0)<=c)e=a(i/this.a+this.long0),n=0;else{r=this.lat0+o/this.a,l=i*i/this.a/this.a+r*r,u=r;var m;for(s=d;s;--s)if(m=Math.tan(u),p=-1*(r*(u*m+1)-u-.5*(u*u+l)*m)/((u-r)/m-1),u+=p,Math.abs(p)<=c){n=u;break}e=a(this.long0+Math.asin(i*Math.tan(u)/this.a)/Math.sin(n))}else if(Math.abs(o+this.ml0)<=c)n=0,e=a(this.long0+i/this.a);else{r=(this.ml0+o)/this.a,l=i*i/this.a/this.a+r*r,u=r;var f,_,g,v,y;for(s=d;s;--s)if(y=this.e*Math.sin(u),f=Math.sqrt(1-y*y)*Math.tan(u),_=this.a*h(this.e0,this.e1,this.e2,this.e3,u),g=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),v=_/this.a,p=(r*(f*v+1)-v-.5*f*(v*v+l))/(this.es*Math.sin(2*u)*(v*v+l-2*r*v)/(4*f)+(r-v)*(f*g-2/Math.sin(2*u))-g),u-=p,Math.abs(p)<=c){n=u;break}f=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=a(this.long0+Math.asin(i*f/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},n.names=["Polyconic","poly"]},{"../common/adjust_lat":306,"../common/adjust_lon":307,"../common/e0fn":309,"../common/e1fn":310,"../common/e2fn":311,"../common/e3fn":312,"../common/gN":313,"../common/mlfn":316}],357:[function(t,e,n){var i=t("../common/adjust_lon"),o=t("../common/adjust_lat"),s=t("../common/pj_enfn"),r=20,a=t("../common/pj_mlfn"),l=t("../common/pj_inv_mlfn"),h=Math.PI/2,c=1e-10,u=t("../common/asinz");n.init=function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=s(this.es)},n.forward=function(t){var e,n,o=t.x,s=t.y;if(o=i(o-this.long0),this.sphere){if(this.m)for(var l=this.n*Math.sin(s),h=r;h;--h){var u=(this.m*s+Math.sin(s)-l)/(this.m+Math.cos(s));if(s-=u,Math.abs(u)<c)break}else s=1!==this.n?Math.asin(this.n*Math.sin(s)):s;e=this.a*this.C_x*o*(this.m+Math.cos(s)),n=this.a*this.C_y*s}else{var d=Math.sin(s),p=Math.cos(s);n=this.a*a(s,d,p,this.en),e=this.a*o*p/Math.sqrt(1-this.es*d*d)}return t.x=e,t.y=n,t},n.inverse=function(t){var e,n,s,r;return t.x-=this.x0,s=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,s/=this.C_x*(this.m+Math.cos(e)),this.m?e=u((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=u(Math.sin(e)/this.n)),s=i(s+this.long0),e=o(e)):(e=l(t.y/this.a,this.es,this.en),r=Math.abs(e),r<h?(r=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)),s=i(n)):r-c<h&&(s=this.long0)),t.x=s,t.y=e,t},n.names=["Sinusoidal","sinu"]},{"../common/adjust_lat":306,"../common/adjust_lon":307,"../common/asinz":308,"../common/pj_enfn":319,"../common/pj_inv_mlfn":320,"../common/pj_mlfn":321}],358:[function(t,e,n){n.init=function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,i=this.rf,o=1/i,s=2*o-Math.pow(o,2),r=this.e=Math.sqrt(s);this.R=this.k0*n*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+t/2)),h=Math.log((1+r*e)/(1-r*e));this.K=a-this.alpha*l+this.alpha*r/2*h},n.forward=function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),i=-this.alpha*(e+n)+this.K,o=2*(Math.atan(Math.exp(i))-Math.PI/4),s=this.alpha*(t.x-this.lambda0),r=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(o)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(o)-Math.sin(this.b0)*Math.cos(o)*Math.cos(s));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*r+this.x0,t},n.inverse=function(t){for(var e=t.x-this.x0,n=t.y-this.y0,i=e/this.R,o=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(o)+Math.sin(this.b0)*Math.cos(o)*Math.cos(i)),r=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(o))),a=this.lambda0+r/this.alpha,l=0,h=s,c=-1e3,u=0;Math.abs(h-c)>1e-7;){if(++u>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),c=h,h=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=a,t.y=h,t},n.names=["somerc"]},{}],359:[function(t,e,n){var i=Math.PI/2,o=1e-10,s=t("../common/sign"),r=t("../common/msfnz"),a=t("../common/tsfnz"),l=t("../common/phi2z"),h=t("../common/adjust_lon");n.ssfn_=function(t,e,n){return e*=n,Math.tan(.5*(i+t))*Math.pow((1-e)/(1+e),.5*n)},n.init=function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=o&&(this.k0=.5*(1+s(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=o&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=o&&(this.k0=.5*this.cons*r(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/a(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=r(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-i,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},n.forward=function(t){var e,n,s,r,l,c,u=t.x,d=t.y,p=Math.sin(d),m=Math.cos(d),f=h(u-this.long0);return Math.abs(Math.abs(u-this.long0)-Math.PI)<=o&&Math.abs(d+this.lat0)<=o?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*p+this.coslat0*m*Math.cos(f)),t.x=this.a*e*m*Math.sin(f)+this.x0,t.y=this.a*e*(this.coslat0*p-this.sinlat0*m*Math.cos(f))+this.y0,t):(n=2*Math.atan(this.ssfn_(d,p,this.e))-i,r=Math.cos(n),s=Math.sin(n),Math.abs(this.coslat0)<=o?(l=a(this.e,d*this.con,this.con*p),c=2*this.a*this.k0*l/this.cons,t.x=this.x0+c*Math.sin(u-this.long0),t.y=this.y0-this.con*c*Math.cos(u-this.long0),t):(Math.abs(this.sinlat0)<o?(e=2*this.a*this.k0/(1+r*Math.cos(f)),t.y=e*s):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*s+this.cosX0*r*Math.cos(f))),t.y=e*(this.cosX0*s-this.sinX0*r*Math.cos(f))+this.y0),t.x=e*r*Math.sin(f)+this.x0,t))},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n,s,r,a,c=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var u=2*Math.atan(c/(.5*this.a*this.k0));return e=this.long0,n=this.lat0,c<=o?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(u)*this.sinlat0+t.y*Math.sin(u)*this.coslat0/c),e=h(Math.abs(this.coslat0)<o?this.lat0>0?this.long0+Math.atan2(t.x,-1*t.y):this.long0+Math.atan2(t.x,t.y):this.long0+Math.atan2(t.x*Math.sin(u),c*this.coslat0*Math.cos(u)-t.y*this.sinlat0*Math.sin(u))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=o){if(c<=o)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,s=c*this.cons/(2*this.a*this.k0),n=this.con*l(this.e,s),e=this.con*h(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else r=2*Math.atan(c*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,c<=o?a=this.X0:(a=Math.asin(Math.cos(r)*this.sinX0+t.y*Math.sin(r)*this.cosX0/c),e=h(this.long0+Math.atan2(t.x*Math.sin(r),c*this.cosX0*Math.cos(r)-t.y*this.sinX0*Math.sin(r)))),n=-1*l(this.e,Math.tan(.5*(i+a)));return t.x=e,t.y=n,t},n.names=["stere"]},{"../common/adjust_lon":307,"../common/msfnz":317,"../common/phi2z":318,"../common/sign":323,"../common/tsfnz":325}],360:[function(t,e,n){var i=t("./gauss"),o=t("../common/adjust_lon");n.init=function(){i.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},n.forward=function(t){var e,n,s,r;return t.x=o(t.x-this.long0),i.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),s=Math.cos(t.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*s),t.x=r*n*Math.sin(t.x),t.y=r*(this.cosc0*e-this.sinc0*n*s),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},n.inverse=function(t){var e,n,s,r,a;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,a=Math.sqrt(t.x*t.x+t.y*t.y)){var l=2*Math.atan2(a,this.R2);e=Math.sin(l),n=Math.cos(l),r=Math.asin(n*this.sinc0+t.y*e*this.cosc0/a),s=Math.atan2(t.x*e,a*this.cosc0*n-t.y*this.sinc0*e)}else r=this.phic0,s=0;return t.x=s,t.y=r,i.inverse.apply(this,[t]),t.x=o(t.x+this.long0),t},n.names=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]},{"../common/adjust_lon":307,"./gauss":344}],361:[function(t,e,n){var i=t("../common/e0fn"),o=t("../common/e1fn"),s=t("../common/e2fn"),r=t("../common/e3fn"),a=t("../common/mlfn"),l=t("../common/adjust_lon"),h=Math.PI/2,c=1e-10,u=t("../common/sign"),d=t("../common/asinz");n.init=function(){this.e0=i(this.es),this.e1=o(this.es),this.e2=s(this.es),this.e3=r(this.es),this.ml0=this.a*a(this.e0,this.e1,this.e2,this.e3,this.lat0)},n.forward=function(t){var e,n,i,o=t.x,s=t.y,r=l(o-this.long0),h=Math.sin(s),c=Math.cos(s);if(this.sphere){var u=c*Math.sin(r);if(Math.abs(Math.abs(u)-1)<1e-10)return 93;n=.5*this.a*this.k0*Math.log((1+u)/(1-u)),e=Math.acos(c*Math.cos(r)/Math.sqrt(1-u*u)),s<0&&(e=-e),i=this.a*this.k0*(e-this.lat0)}else{var d=c*r,p=Math.pow(d,2),m=this.ep2*Math.pow(c,2),f=Math.tan(s),_=Math.pow(f,2);e=1-this.es*Math.pow(h,2);var g=this.a/Math.sqrt(e),v=this.a*a(this.e0,this.e1,this.e2,this.e3,s);n=this.k0*g*d*(1+p/6*(1-_+m+p/20*(5-18*_+Math.pow(_,2)+72*m-58*this.ep2)))+this.x0,i=this.k0*(v-this.ml0+g*f*(p*(.5+p/24*(5-_+9*m+4*Math.pow(m,2)+p/30*(61-58*_+Math.pow(_,2)+600*m-330*this.ep2)))))+this.y0}return t.x=n,t.y=i,t},n.inverse=function(t){var e,n,i,o,s,r,a=6;if(this.sphere){var p=Math.exp(t.x/(this.a*this.k0)),m=.5*(p-1/p),f=this.lat0+t.y/(this.a*this.k0),_=Math.cos(f);e=Math.sqrt((1-_*_)/(1+m*m)),s=d(e),f<0&&(s=-s),r=0===m&&0===_?this.long0:l(Math.atan2(m,_)+this.long0)}else{var g=t.x-this.x0,v=t.y-this.y0;for(e=(this.ml0+v/this.k0)/this.a,n=e,o=0;!0&&(i=(e+this.e1*Math.sin(2*n)-this.e2*Math.sin(4*n)+this.e3*Math.sin(6*n))/this.e0-n,n+=i,!(Math.abs(i)<=c));o++)if(o>=a)return 95;if(Math.abs(n)<h){var y=Math.sin(n),b=Math.cos(n),x=Math.tan(n),L=this.ep2*Math.pow(b,2),w=Math.pow(L,2),M=Math.pow(x,2),k=Math.pow(M,2);e=1-this.es*Math.pow(y,2);var P=this.a/Math.sqrt(e),S=P*(1-this.es)/e,E=g/(P*this.k0),T=Math.pow(E,2);s=n-P*x*T/S*(.5-T/24*(5+3*M+10*L-4*w-9*this.ep2-T/30*(61+90*M+298*L+45*k-252*this.ep2-3*w))),r=l(this.long0+E*(1-T/6*(1+2*M+L-T/20*(5-2*L+28*M-3*w+8*this.ep2+24*k)))/b)}else s=h*u(v),r=this.long0}return t.x=r,t.y=s,t},n.names=["Transverse_Mercator","Transverse Mercator","tmerc"]},{"../common/adjust_lon":307,"../common/asinz":308,"../common/e0fn":309,"../common/e1fn":310,"../common/e2fn":311,"../common/e3fn":312,"../common/mlfn":316,"../common/sign":323}],362:[function(t,e,n){var i=.017453292519943295,o=t("./tmerc");n.dependsOn="tmerc",n.init=function(){this.zone&&(this.lat0=0,this.long0=(6*Math.abs(this.zone)-183)*i,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,o.init.apply(this),this.forward=o.forward,this.inverse=o.inverse)},n.names=["Universal Transverse Mercator System","utm"]},{"./tmerc":361}],363:[function(t,e,n){var i=t("../common/adjust_lon"),o=Math.PI/2,s=1e-10,r=t("../common/asinz");n.init=function(){this.R=this.a},n.forward=function(t){var e,n,a=t.x,l=t.y,h=i(a-this.long0);Math.abs(l)<=s&&(e=this.x0+this.R*h,n=this.y0);var c=r(2*Math.abs(l/Math.PI));(Math.abs(h)<=s||Math.abs(Math.abs(l)-o)<=s)&&(e=this.x0,n=l>=0?this.y0+Math.PI*this.R*Math.tan(.5*c):this.y0+Math.PI*this.R*-Math.tan(.5*c));var u=.5*Math.abs(Math.PI/h-h/Math.PI),d=u*u,p=Math.sin(c),m=Math.cos(c),f=m/(p+m-1),_=f*f,g=f*(2/p-1),v=g*g,y=Math.PI*this.R*(u*(f-v)+Math.sqrt(d*(f-v)*(f-v)-(v+d)*(_-v)))/(v+d);h<0&&(y=-y),e=this.x0+y;var b=d+f;return y=Math.PI*this.R*(g*b-u*Math.sqrt((v+d)*(d+1)-b*b))/(v+d),n=l>=0?this.y0+y:this.y0-y,t.x=e,t.y=n,t},n.inverse=function(t){var e,n,o,r,a,l,h,c,u,d,p,m,f;return t.x-=this.x0,t.y-=this.y0,p=Math.PI*this.R,o=t.x/p,r=t.y/p,a=o*o+r*r,l=-Math.abs(r)*(1+a),h=l-2*r*r+o*o,c=-2*l+1+2*r*r+a*a,f=r*r/c+(2*h*h*h/c/c/c-9*l*h/c/c)/27,u=(l-h*h/3/c)/c,d=2*Math.sqrt(-u/3),p=3*f/u/d,Math.abs(p)>1&&(p=p>=0?1:-1),m=Math.acos(p)/3,n=t.y>=0?(-d*Math.cos(m+Math.PI/3)-h/3/c)*Math.PI:-(-d*Math.cos(m+Math.PI/3)-h/3/c)*Math.PI,e=Math.abs(o)<s?this.long0:i(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(o*o-r*r)+a*a))/2/o),t.x=e,t.y=n,t},n.names=["Van_der_Grinten_I","VanDerGrinten","vandg"]},{"../common/adjust_lon":307,"../common/asinz":308}],364:[function(t,e,n){var i=.017453292519943295,o=57.29577951308232,s=1,r=2,a=t("./datum_transform"),l=t("./adjust_axis"),h=t("./Proj");e.exports=function c(t,e,n){function u(t,e){return(t.datum.datum_type===s||t.datum.datum_type===r)&&"WGS84"!==e.datumCode}var d;return t.datum&&e.datum&&(u(t,e)||u(e,t))&&(d=new h("WGS84"),c(t,d,n),t=d),"enu"!==t.axis&&l(t,!1,n),"longlat"===t.projName?(n.x*=i,n.y*=i):(t.to_meter&&(n.x*=t.to_meter,n.y*=t.to_meter),t.inverse(n)),t.from_greenwich&&(n.x+=t.from_greenwich),n=a(t.datum,e.datum,n),e.from_greenwich&&(n.x-=e.from_greenwich),"longlat"===e.projName?(n.x*=o,n.y*=o):(e.forward(n),e.to_meter&&(n.x/=e.to_meter,n.y/=e.to_meter)),"enu"!==e.axis&&l(e,!0,n),n}},{"./Proj":304,"./adjust_axis":305,"./datum_transform":332}],365:[function(t,e,n){e.exports="2.0.3"},{}],366:[function(t,e,n){function i(t,e,n){t[e]=n.map(function(t){var e={};return o(t,e),e}).reduce(function(t,e){return h(t,e)},{})}function o(t,e){var n;return Array.isArray(t)?(n=t.shift(),"PARAMETER"===n&&(n=t.shift()),1===t.length?Array.isArray(t[0])?(e[n]={},o(t[0],e[n])):e[n]=t[0]:t.length?"TOWGS84"===n?e[n]=t:(e[n]={},["UNIT","PRIMEM","VERT_DATUM"].indexOf(n)>-1?(e[n]={name:t[0].toLowerCase(),convert:t[1]},3===t.length&&(e[n].auth=t[2])):"SPHEROID"===n?(e[n]={name:t[0],a:t[1],rf:t[2]},4===t.length&&(e[n].auth=t[3])):["GEOGCS","GEOCCS","DATUM","VERT_CS","COMPD_CS","LOCAL_CS","FITTED_CS","LOCAL_DATUM"].indexOf(n)>-1?(t[0]=["name",t[0]],i(e,n,t)):t.every(function(t){return Array.isArray(t)})?i(e,n,t):o(t,e[n])):e[n]=!0,void 0):void(e[t]=!0)}function s(t,e){var n=e[0],i=e[1];!(n in t)&&i in t&&(t[n]=t[i],3===e.length&&(t[n]=e[2](t[n])))}function r(t){return t*l}function a(t){function e(e){var n=t.to_meter||1;return parseFloat(e,10)*n}"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&(t.to_meter=parseFloat(t.UNIT.convert,10))),t.GEOGCS&&(t.GEOGCS.DATUM?t.datumCode=t.GEOGCS.DATUM.name.toLowerCase():t.datumCode=t.GEOGCS.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),t.GEOGCS.DATUM&&t.GEOGCS.DATUM.SPHEROID&&(t.ellps=t.GEOGCS.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=t.GEOGCS.DATUM.SPHEROID.a,t.rf=parseFloat(t.GEOGCS.DATUM.SPHEROID.rf,10))),t.b&&!isFinite(t.b)&&(t.b=t.a);var n=function(e){return s(t,e)},i=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",r],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",r],["x0","false_easting",e],["y0","false_northing",e],["long0","central_meridian",r],["lat0","latitude_of_origin",r],["lat0","standard_parallel_1",r],["lat1","standard_parallel_1",r],["lat2","standard_parallel_2",r],["alpha","azimuth",r],["srsCode","name"]];i.forEach(n),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.PROJECTION&&"Lambert_Azimuthal_Equal_Area"!==t.PROJECTION||(t.long0=t.longc)}var l=.017453292519943295,h=t("./extend");e.exports=function(t,e){var n=JSON.parse((","+t).replace(/\s*\,\s*([A-Z_0-9]+?)(\[)/g,',["$1",').slice(1).replace(/\s*\,\s*([A-Z_0-9]+?)\]/g,',"$1"]')),i=n.shift(),s=n.shift();n.unshift(["name",s]),n.unshift(["type",i]),n.unshift("output");var r={};return o(n,r),a(r.output),h(e,r.output)}},{"./extend":334}],367:[function(t,e,n){!function(n){var i,o;if("function"==typeof define&&define.amd)define(["leaflet","proj4"],n);else if("object"==typeof e&&"object"==typeof e.exports)i=t("leaflet"),o=t("proj4"),e.exports=n(i,o);else{if("undefined"==typeof window.L||"undefined"==typeof window.proj4)throw"Leaflet and proj4 must be loaded first";n(window.L,window.proj4)}}(function(t,e){return t.Proj={},t.Proj._isProj4Obj=function(t){return"undefined"!=typeof t.inverse&&"undefined"!=typeof t.forward},t.Proj.ScaleDependantTransformation=function(t){this.scaleTransforms=t},t.Proj.ScaleDependantTransformation.prototype.transform=function(t,e){return this.scaleTransforms[e].transform(t,e)},t.Proj.ScaleDependantTransformation.prototype.untransform=function(t,e){return this.scaleTransforms[e].untransform(t,e)},t.Proj.Projection=t.Class.extend({initialize:function(n,i){if(t.Proj._isProj4Obj(n))this._proj=n;else{var o=n;if(i)e.defs(o,i);else if(void 0===e.defs[o]){var s=o.split(":");if(s.length>3&&(o=s[s.length-3]+":"+s[s.length-1]),void 0===e.defs[o])throw"No projection definition for code "+o}this._proj=e(o)}},project:function(e){var n=this._proj.forward([e.lng,e.lat]);return new t.Point(n[0],n[1])},unproject:function(e,n){var i=this._proj.inverse([e.x,e.y]);return new t.LatLng(i[1],i[0],n)}}),t.Proj.CRS=t.Class.extend({includes:t.CRS,options:{transformation:new t.Transformation(1,0,(-1),0)},initialize:function(e,n,i){var o,s,r,a;if(t.Proj._isProj4Obj(e)?(s=e,o=s.srsCode,a=n||{},this.projection=new t.Proj.Projection(s)):(o=e,r=n,a=i||{},this.projection=new t.Proj.Projection(o,r)),t.Util.setOptions(this,a),this.code=o,this.transformation=this.options.transformation,this.options.origin&&(this.transformation=new t.Transformation(1,(-this.options.origin[0]),(-1),this.options.origin[1])),this.options.scales)this._scales=this.options.scales;else if(this.options.resolutions){this._scales=[];for(var l=this.options.resolutions.length-1;l>=0;l--)this.options.resolutions[l]&&(this._scales[l]=1/this.options.resolutions[l])}},scale:function(t){var e,n,i,o,s=Math.floor(t);return t===s?this._scales[t]:(e=this._scales[s],n=this._scales[s+1],i=n-e,o=t-s,e+i*o)},getSize:function(e){var n,i,o,s=this.options.bounds;return s?(n=this.scale(e),i=this.transformation.transform(s.min,n),o=this.transformation.transform(s.max,n),t.point(Math.abs(o.x-i.x),Math.abs(o.y-i.y))):(n=256*Math.pow(2,e),t.point(n,n))}}),t.Proj.CRS.TMS=t.Proj.CRS.extend({options:{tileSize:256},initialize:function(e,n,i,o){var s,r,a,l,h;t.Proj._isProj4Obj(e)?(a=e,l=n,h=i||{},h.origin=[l[0],l[3]],t.Proj.CRS.prototype.initialize.call(this,a,h)):(s=e,r=n,l=i,h=o||{},h.origin=[l[0],l[3]],t.Proj.CRS.prototype.initialize.call(this,s,r,h)),this.projectedBounds=l,this._sizes=this._calculateSizes()},_calculateSizes:function(){var e,n,i,o,s=[],r=this.projectedBounds;for(n=this._scales.length-1;n>=0;n--)this._scales[n]&&(e=this.options.tileSize/this._scales[n],i=Math.ceil(parseFloat((r[2]-r[0])/e).toPrecision(3))*e*this._scales[n],o=Math.ceil(parseFloat((r[3]-r[1])/e).toPrecision(3))*e*this._scales[n],s[n]=t.point(i,o));return s},getSize:function(t){return this._sizes[t]}}),t.Proj.TileLayer={},t.Proj.TileLayer.TMS=t.TileLayer.extend({options:{continuousWorld:!0},initialize:function(e,n,i){var o,s,r,a,l=!0;if(!(n instanceof t.Proj.CRS.TMS))throw"CRS is not L.Proj.CRS.TMS.";for(t.TileLayer.prototype.initialize.call(this,e,i),this.options.tms=!1,this.crs=n,r=this.crs.projectedBounds,a=this.options.minZoom;a<this.options.maxZoom&&l;a++){var h=(r[3]-r[1])/this._projectedTileSize(a);l=Math.abs(h-Math.round(h))>.001}if(!l){for(o={},a=this.options.minZoom;a<this.options.maxZoom;a++)s=r[1]+Math.ceil((r[3]-r[1])/this._projectedTileSize(a))*this._projectedTileSize(a),o[this.crs.scale(a)]=new t.Transformation(1,(-r[0]),(-1),s);this.crs=new t.Proj.CRS.TMS(this.crs.projection._proj,r,this.crs.options),this.crs.transformation=new t.Proj.ScaleDependantTransformation(o)}},getTileUrl:function(e){var n=this._map.getZoom(),i=Math.ceil((this.crs.projectedBounds[3]-this.crs.projectedBounds[1])/this._projectedTileSize(n));return t.Util.template(this._url,t.Util.extend({s:this._getSubdomain(e),z:this._getZoomForUrl(),x:e.x,y:i-e.y-1},this.options))},_projectedTileSize:function(t){return this.options.tileSize/this.crs.scale(t)}}),t.Proj.GeoJSON=t.GeoJSON.extend({initialize:function(e,n){this._callLevel=0,t.GeoJSON.prototype.initialize.call(this,null,n),e&&this.addData(e)},addData:function(e){var n;e&&(e.crs&&"name"===e.crs.type?n=new t.Proj.CRS(e.crs.properties.name):e.crs&&e.crs.type&&(n=new t.Proj.CRS(e.crs.type+":"+e.crs.properties.code)),void 0!==n&&(this.options.coordsToLatLng=function(e){var i=t.point(e[0],e[1]);return n.projection.unproject(i)})),this._callLevel++;try{t.GeoJSON.prototype.addData.call(this,e)}finally{this._callLevel--,0===this._callLevel&&delete this.options.coordsToLatLng}}}),t.Proj.geoJson=function(e,n){return new t.Proj.GeoJSON(e,n)},t.Proj.ImageOverlay=t.ImageOverlay.extend({initialize:function(e,n,i){t.ImageOverlay.prototype.initialize.call(this,e,null,i),this._projBounds=n},_animateZoom:function(e){var n=t.point(this._projBounds.min.x,this._projBounds.max.y),i=t.point(this._projBounds.max.x,this._projBounds.min.y),o=this._projectedToNewLayerPoint(n,e.zoom,e.center),s=this._projectedToNewLayerPoint(i,e.zoom,e.center).subtract(o),r=o.add(s._multiplyBy((1-1/e.scale)/2));this._image.style[t.DomUtil.TRANSFORM]=t.DomUtil.getTranslateString(r)+" scale("+this._map.getZoomScale(e.zoom)+") "},_reset:function(){var e=this._map.getZoom(),n=this._map.getPixelOrigin(),i=t.bounds(this._transform(this._projBounds.min,e)._subtract(n),this._transform(this._projBounds.max,e)._subtract(n)),o=i.getSize(),s=this._image;t.DomUtil.setPosition(s,i.min),s.style.width=o.x+"px",s.style.height=o.y+"px"},_projectedToNewLayerPoint:function(t,e,n){var i=this._map._getNewTopLeftPoint(n,e).add(this._map._getMapPanePos());return this._transform(t,e)._subtract(i)},_transform:function(t,e){var n=this._map.options.crs,i=n.transformation,o=n.scale(e);return i.transform(t,o)}}),t.Proj.imageOverlay=function(e,n,i){return new t.Proj.ImageOverlay(e,n,i)},"undefined"!=typeof t.CRS&&(t.CRS.proj4js=function(){return function(e,n,i,o){return o=o||{},i&&(o.transformation=i),new t.Proj.CRS(e,n,o)}}()),t.Proj})},{leaflet:299,proj4:336}],368:[function(t,e,n){(function(t,n){!function(n){"use strict";function i(t,e,n,i){var o=e&&e.prototype instanceof s?e:s,r=Object.create(o.prototype),a=new m(i||[]);return r._invoke=c(t,n,a),r}function o(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(i){return{type:"throw",arg:i}}}function s(){}function r(){}function a(){}function l(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function h(e){function n(t,i,s,r){var a=o(e[t],e,i);if("throw"!==a.type){var l=a.arg,h=l.value;return h&&"object"==typeof h&&y.call(h,"__await")?Promise.resolve(h.__await).then(function(t){n("next",t,s,r)},function(t){n("throw",t,s,r)}):Promise.resolve(h).then(function(t){l.value=t,s(l)},r)}r(a.arg)}function i(t,e){function i(){return new Promise(function(i,o){n(t,e,i,o)})}return s=s?s.then(i,i):i()}"object"==typeof t&&t.domain&&(n=t.domain.bind(n));var s;this._invoke=i}function c(t,e,n){var i=k;return function(s,r){if(i===S)throw new Error("Generator is already running");if(i===E){if("throw"===s)throw r;return _()}for(n.method=s,n.arg=r;;){var a=n.delegate;if(a){var l=u(a,n);if(l){if(l===T)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===k)throw i=E,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=S;var h=o(t,e,n);if("normal"===h.type){if(i=n.done?E:P,h.arg===T)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(i=E,n.method="throw",n.arg=h.arg)}}}function u(t,e){var n=t.iterator[e.method];if(n===g){if(e.delegate=null,"throw"===e.method){if(t.iterator["return"]&&(e.method="return",e.arg=g,u(t,e),"throw"===e.method))return T;e.method="throw",
e.arg=new TypeError("The iterator does not provide a 'throw' method")}return T}var i=o(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,T;var s=i.arg;return s?s.done?(e[t.resultName]=s.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=g),e.delegate=null,T):s:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,T)}function d(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function p(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function m(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(d,this),this.reset(!0)}function f(t){if(t){var e=t[x];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function o(){for(;++n<t.length;)if(y.call(t,n))return o.value=t[n],o.done=!1,o;return o.value=g,o.done=!0,o};return i.next=i}}return{next:_}}function _(){return{value:g,done:!0}}var g,v=Object.prototype,y=v.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},x=b.iterator||"@@iterator",L=b.toStringTag||"@@toStringTag",w="object"==typeof e,M=n.regeneratorRuntime;if(M)return void(w&&(e.exports=M));M=n.regeneratorRuntime=w?e.exports:{},M.wrap=i;var k="suspendedStart",P="suspendedYield",S="executing",E="completed",T={},C={};C[x]=function(){return this};var D=Object.getPrototypeOf,j=D&&D(D(f([])));j&&j!==v&&y.call(j,x)&&(C=j);var O=a.prototype=s.prototype=Object.create(C);r.prototype=O.constructor=a,a.constructor=r,a[L]=r.displayName="GeneratorFunction",M.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===r||"GeneratorFunction"===(e.displayName||e.name))},M.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,L in t||(t[L]="GeneratorFunction")),t.prototype=Object.create(O),t},M.awrap=function(t){return{__await:t}},l(h.prototype),M.AsyncIterator=h,M.async=function(t,e,n,o){var s=new h(i(t,e,n,o));return M.isGeneratorFunction(e)?s:s.next().then(function(t){return t.done?t.value:s.next()})},l(O),O[L]="Generator",O.toString=function(){return"[object Generator]"},M.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},M.values=f,m.prototype={constructor:m,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(p),!t)for(var e in this)"t"===e.charAt(0)&&y.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,i){return s.type="throw",s.arg=t,n.next=e,i&&(n.method="next",n.arg=g),!!i}if(this.done)throw t;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var r=y.call(o,"catchLoc"),a=y.call(o,"finallyLoc");if(r&&a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(r){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&y.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,T):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),T},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),p(n),T}},"catch":function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var o=i.arg;p(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:f(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=g),T}}}("object"==typeof n?n:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:302}],369:[function(t,e,n){"use strict";function i(t,e){"ngInject";return e.create=function(){var t="en",e="geology",n="http://api.npolar.no/schema/geology-sample",i={lang:t,collection:e,schema:n};return i},e.hashiObject=function(t){return{url:t.uri,filename:t.filename,length:t.file_size,md5sum:(t.hash||"md5:").split("md5:")[1],content_type:t.type}},e.fileObject=function(t){return{uri:t.url,filename:t.filename,length:t.file_size,hash:"md5:"+t.md5sum,type:t.content_type}},e}i.$inject=["$q","GeologySampleResource"],e.exports=i},{}],370:[function(t,e,n){"use strict";var i=t("npdc-common"),o=i.AutoConfig,s=t("angular");t("npdc-common/src/wrappers/leaflet");var r=s.module("npdcGeologySampleApp",["npdcCommon","leaflet"]);r.controller("GeologySampleShowController",t("./show/GeologySampleShowController")),r.controller("GeologySampleSearchController",t("./search/GeologySampleSearchController")),r.controller("GeologySampleEditController",t("./edit/GeologySampleEditController")),r.directive("geologySampleCoverage",t("./edit/coverage/coverageDirective")),r.factory("GeologySample",t("./GeologySample.js"));var a=[{path:"/",resource:"NpolarApi"},{path:"/user",resource:"User"},{path:"/dataset",resource:"Dataset"},{path:"/project",resource:"Project"},{path:"/expedition",resource:"Expedition"},{path:"/publication",resource:"Publication"},{path:"/geology/sample",resource:"GeologySampleResource"}];a.forEach(function(t){r.factory(t.resource,["NpolarApiResource",function(e){return e.resource(t)}])}),r.config(t("./router")),r.config(["$httpProvider","npolarApiConfig",function(t,e){var n=new o("production");s.extend(e,n,{resources:a}),t.interceptors.push("npolarApiInterceptor")}]),r.run(["$http","npdcAppConfig","NpolarTranslate","NpolarLang",function(t,e,n,i){n.loadBundles("npdc-geology"),e.toolbarTitle="Geological samples archive from the Norwegian polar areas"}])},{"./GeologySample.js":369,"./edit/GeologySampleEditController":371,"./edit/coverage/coverageDirective":373,"./router":375,"./search/GeologySampleSearchController":376,"./show/GeologySampleShowController":377,angular:"angular","npdc-common":"npdc-common","npdc-common/src/wrappers/leaflet":301}],371:[function(t,e,n){"use strict";var i=function(e,n,i,o,s,r,a,l,h,c,u,d,p,m){"ngInject";function f(){n("NpolarEditController",{$scope:e}),e.resource=o;var i=[],h=[{map:t("./no.json"),code:"nb_NO"}];e.formula=s.getInstance({schema:"//api.npolar.no/schema/geology-sample",form:"edit/formula.json",language:c.getLang(),templates:a.formula.templates.concat(i),languages:a.formula.languages.concat(h)}),_(e.formula);var u=["first_name","last_name","organisation"];r.autocompleteFacets(u,o,e.formula),l.defineOptions({match:function(t){return t.path.match(/_date$/)},format:"{date}"})}function _(t){var n=d.canonicalUri(e.resource.path)+"/:id/_file";h.fileUploader({match:function(t){return"files"===t.id},server:n,multiple:!0,restricted:function(){return t.getModel().restricted},fileToValueMapper:o.fileObject,valueToFileMapper:o.hashiObject,fields:["filename"]},t)}try{f(),e.edit()}catch(g){m.error(g)}};i.$inject=["$scope","$controller","$routeParams","GeologySample","formula","formulaAutoCompleteService","npdcAppConfig","chronopicService","fileFunnelService","NpolarLang","npolarApiConfig","NpolarApiSecurity","npolarCountryService","NpolarMessage"],e.exports=i},{"./no.json":374}],372:[function(t,e,n){e.exports='<div ng-if="field.visible">\n   <leaflet options="mapOptions" flex="100" class="coverage-map"></leaflet>\n    <div layout="row" layout-wrap>\n    <div flex="25" flex-sm="50">\n      <formula:field field="field.fields[0]"></formula:field>\n    </div>\n    <div flex="25" flex-sm="50">\n      <formula:field field="field.fields[1]"></formula:field>\n    </div>\n    <div flex="25" flex-sm="50">\n      <formula:field field="field.fields[2]"></formula:field>\n    </div>\n  </div>\n</div>'},{}],373:[function(t,e,n){"use strict";var i=function(){"ngInject";return{template:t("./coverage.html"),controller:["$scope","$timeout",function(t,e){var n=void 0,i=0,o=function(e){e.step=.01,t.$watch(e.id+".value",function(e){if(!i&&n){var o=[[t.south.value,t.west.value],[t.north.value,t.east.value]];n.setBounds(o)}i>0&&i--}),t[e.id]=e};t.field.fields.forEach(o);var s=void 0;t.field.value&&t.field.value.north&&(s=[[[t.south.value,t.west.value],[t.north.value,t.east.value]]]),t.mapOptions={draw:{rectangle:!0},edit:{edit:!0,remove:!0},coverage:s,initcoord:[-72.011389,2.535]},t.$on("mapSelect",function(o,s){i=4,t.north.value=Math.round(100*s._latlngs[2].lat)/100,t.east.value=Math.round(100*s._latlngs[2].lng)/100,t.south.value=Math.round(100*s._latlngs[0].lat)/100,t.west.value=Math.round(100*s._latlngs[0].lng)/100,n=s,e()})}]}};e.exports=i},{"./coverage.html":372}],374:[function(t,e,n){e.exports={fieldsets:["Kjernedata","Personer","Grupper","Lenker","Endringer"],fields:{research_station:{title:"forskningsstasjon",values:["Troll","Sverdrup"]},research_type:{title:"arbeidsoppgaver",values:["forskning","monitorering","kartlegging","informasjonsvirksomhet/VIP","undervisning","logistikkoperasjoner","annet"]},summary:{title:"beskrivelse"},title:{title:"tittel forskningsprosjekt eller annen tittel"},topics:{title:"emner",values:["passer ikke","forsuring","atmosfære","biologi","biokjemi","biodiversitet","kjemi","klima","konservering","økologi","økotoksikologi","miljø","geologi","geofysikk","glasiologi","historie","menneskelige perspektiver","ledelse","marine","marine økosystemer","kart","oseanografi","annet","paleoklima","fjernmåling","havis","snø","terrestrisk","topografi","vegetasjon"]},stay_dates:{title:"gruppe oppholdsdatoer (påkrevd)",items:{fields:{start_date:{title:"ankomst dato (påkrevd)"},end_date:{title:"avreise dato (påkrevd)"}}}},released:{title:"utgivelsesdato"},links:{title:"lenker",items:{fields:{href:{title:"weblenke inkludert protokoll (f.eks. http:// som i lenken http://www.npolar.no)(påkrevd)"},rel:{title:"lenke type (forbindelse mellom denne registreringen og lenke)(påkrevd)",values:["","program","datasett","ekspedisjon","prosjekt"]},title:{title:"tittel på lenke (påkrevd)"}}}},people:{title:"personer",items:{fields:{first_name:{title:"fornavn (påkrevd)"},last_name:{title:"etternavn (påkrevd)"},roles:{title:"roller (velg alle aktuelle)(påkrevd)",values:["snekker","kokk","elektriker","ekspedisjonsleder","feltassistent","gjest","forsker","IT","KSAT","mekaniker","mekaniker TAF","annet","lege","pilot","forskningstekniker","sikkerhet","servicetekniker","transport","VIP"]},station_dates:{title:"døgn på forskningstasjonen (påkrevd)",items:{fields:{accomodation:{title:"overnatting inkludert (påkrevd)"},start_date:{title:"ankomst dato (påkrevd)"},end_date:{title:"avreise dato (påkrevd)"}}}},organisation:{title:"organisasjon (påkrevd)"},"@country":{title:"land (påkrevd)"}}}},groups:{title:"grupper",items:{fields:{number_of_persons:{title:"antall personer (påkrevd)"},roles:{title:"roller (velg alle aktuelle)(påkrevd)",values:["snekker","kokk","elektriker","ekspedisjonsleder","feltassistent","felt ansvarlig","forsker","IT","KSAT","mekaniker","mekaniker TAF","annet","lege","pilot","forskningstekniker","sikkerhetsansvarlig","servicetekniker","transport","VIP"]},station_dates:{title:"døgn på forskningstasjonen (påkrevd)",items:{fields:{accomodation:{title:"overnatting inkludert (påkrevd)"},start_date:{title:"ankomst dato (påkrevd)"},end_date:{title:"avreise dato (påkrevd)"}}}},organisation:{title:"organisasjon (påkrevd)"},"@country":{title:"land (påkrevd)"}}}},draft:{title:"kladd (er ikke del av statistikk)",values:["ja","nei"]},created:{title:"opprettet"},created_by:{title:"opprettet av"},updated:{title:"oppdatert"},updated_by:{title:"oppdatert av"},comment:{title:"kommentar til større endringer i registreringen"}}}},{}],375:[function(t,e,n){"use strict";var i=function(t,e){"ngInject";e.html5Mode(!0).hashPrefix("!"),t.when("/sample/:id",{templateUrl:"show/show-geology-sample.html",controller:"GeologySampleShowController"}).when("/sample/:id/edit",{template:"<npdc:formula></npdc:formula>",controller:"GeologySampleEditController"}).when("/sample",{templateUrl:"search/search.html",controller:"GeologySampleSearchController",reloadOnSearch:!1}).when("/",{redirectTo:"/sample"})};i.$inject=["$routeProvider","$locationProvider"],e.exports=i},{}],376:[function(t,e,n){"use strict";var i=function(t,e,n,i,o,s,r,a){"ngInject";n("NpolarBaseController",{$scope:t}),t.resource=o,s.search.local.results.detail=function(t){var e=t.title+" - "+t.placename+", "+t.collected_year;return e},s.cardTitle="Geological samples archive from the Norwegian polar areas",s.search.local.results.subtitle="type";var l=function(){var e={limit:"50",sort:"-updated",fields:"lithology,title,id,collected_year,collection,@placename,files",facets:"lithology,title,collected_year"},n=t.security.isAuthenticated()?{}:{};return Object.assign({},e,n)};t.search(l()),t.$on("$locationChangeSuccess",function(e,n){t.search(l())})};i.$inject=["$scope","$location","$controller","$filter","GeologySample","npdcAppConfig","NpdcSearchService","NpolarTranslate"],e.exports=i},{}],377:[function(t,e,n){"use strict";function i(t){for(var e="",n=0;n<t.length;n++)null!==t[n].match(/[A-Z]/)?(e+=" ",e+=t[n].toLowerCase()):e+=t[n];return e}var o=function(t,e,n,o,s,r,a,l,h){"ngInject";t("NpolarBaseController",{$scope:n}),n.resource=s,n.mapOptions={},n.mapOptions.color="#FF0000";var c=function(){n.show().$promise.then(function(t){n.mapOptions.coverage=[[[t.latitude,t.longitude],[t.latitude,t.longitude]]],n.mapOptions.geojson="geojson",n.document.lithology=i(n.document.lithology)})};c()};o.$inject=["$controller","$routeParams","$scope","$q","GeologySample","npdcAppConfig","Dataset","Publication","Project"],e.exports=o},{}],378:[function(t,e,n){"use strict";e.exports=angular.module("templates",[]).run(["$templateCache",function(t){t.put("search/search.html",'<!DOCTYPE html>\n<npdc:search-input feed="feed"></npdc:search-input>\n<!-- <npdc:search feed="feed"></npdc:search>  -->\n\n\n  <!-- <npdc:search feed="feed"></npdc:search>  -->\n<div class="np-primary-control">\n<md-button  class="md-fab" ng-if="security.isAuthorized(\'create\', resource.path)" ng-href="{{ resource.newHref() }}">\n  <md-tooltip md-direction="top">New</md-tooltip>\n  <md-icon>add</md-icon>\n</md-button>\n</div>\n\n\n<div class="npdc-search">\n  <md-content>\n\n    <section>\n      <npdc:loader ng-if="!feed.entries"></npdc:loader>\n\n       <div class="np-layout-list">\n        <md-list>\n        <!-- added ned link -->\n          <md-list-item class="md-2-line" ng-repeat="e in feed.entries" ng-href="sample/{{ e.id }}">\n               <img class="md-avatar" src="{{e.files[0].uri}}" alt="{{ e.files[0].filename }}"  title="ID: {{ e.id }}" >\n\n            <div class="md-list-item-text">\n              <h3 class="md-headline">\n             <!--   <span md-highlight-text="q()" md-highlight-flags="ig">{{e.title}}</span> -->\n             <h3 ng-if="e.title"> {{ e.lithology | t }}<em ng-if="e.title">「{{ e.title | t }}」</em></h3>\n              <h4 ng-if="e[\'@placename\']">{{ e[\'@placename\'] | t }}, {{ (e.collected_year).substring(0,10) }}</h4>\n            </div>\n\n          </md-list-item>\n        </md-list>\n        <md-divider></md-divider>\n      </div>\n\n      <div layout-padding>\n        <div ng-if="feed.opensearch.totalResults > 0" layout layout-align="space-between center">\n          <div style="line-height: 48px;">{{feed.opensearch.totalResults}}\n            results, displaying\n            {{ feed.entries.length}}</div>\n          <div>\n            <md-button class="md-raised md-primary" ng-if="showNext()" ng-click="next()">More ...</md-button>\n          </div>\n        </div>\n        <div ng-if="feed.opensearch.totalResults == 0">{{ \'search.no_results\' | t}} "{{q()}}"</div>\n      </div>\n    </section>\n  </md-content>\n</div>\n\n</div>\n\n\n\n'),t.put("angular-npolar/src/ui/auth/_user.html",'<div class="login-logout">\n  <div ng-show="security.isAuthenticated()" ng-init="user = security.getUser()">\n    \n    <button ng-click="logout()">Logout</button> <b>{{ user.name }}</b> (<a title="View profile for user {{user.username}}" ng-href="/user/{{user.username}}">{{ user.email }} </a>)\n    \n    <p>Login session expires {{ 1000*user.exp | date:\'HH:mm\' }}</p>\n    \n    <!--<section>\n    <h2>Recent edits</h2>\n    <dl ng-repeat="edit in edits">\n      <dt>{{ edit.request.time }}</dt>\n      <dd><a href="{{ edit.response.header.Location }}">{{ edit.response.header.Location }}</a></dd>\n    </dl>\n    </section>-->\n    \n    <section>\n      <h2>Permissions</h2>\n      <dl ng-repeat="system in user.systems">\n        <dt>{{ system.uri }}</dt>\n        <dd>{{ system.rights }}</dd>\n      </dl>\n    </section>\n  </div>\n  \n  <div ng-show="security.notAuthenticated()">\n    <h1>Login</h1>\n    <form role="form">\n      <section ng-show="true" ng-init="loginClicked = false;">\n      <div>\n        <label for="username">Username</label>\n        <input type="text" ng-model="email" id="email" placeholder="Username (email)">\n      </div>\n      <div>\n        <label for="password">Password</label>\n        <input type="password" id="password" ng-model="password" placeholder="Password">\n      </div>\n      <button id="login2" type="submit" ng-click="login(email,password)">Login</button> \n      </section>\n      <a ng-href="/user/reset?username={{user.username}}">Forgot password?</a> <a href="/user/register">Sign up</a></section>\n    </form>\n  </div>\n</div>'),t.put("show/show-geology-sample.html",'<!DOCTYPE html>\n<npdc:edit-button class="np-primary-control"></npdc:edit-button>\n<npdc:loader ng-if="!document"></npdc:loader>\n<leaflet ng-if="document && mapOptions.coverage" options="mapOptions" class="coverage-map"></leaflet>\n<div class="np-padding">\n  <div ng-if="document" class="np-doc">\n\n\n    <h1>\n          <a ng-repeat="file in document.files" ng-href="{{file.uri}}"><img src="{{file.uri}}" alt="{{ file.filename }}" style="width:152px;height:114px;"></a>\n  <span class="md-display-2">{{ document.lithology }} </span><span style={font-size:15%}>\n[{{document.title}}]</span></h1>\n\n  <section>\n     <p ng-if="document[\'@placename\'] || document[\'latitude\']" >\n     <md-icon>place</md-icon>{{document[\'@placename\']}} &nbsp; [{{document.latitude}}, {{document.longitude}}]</p>\n    <p ng-if="document.position_accuracy">\n          Position accuracy: {{document.position_accuracy}}</p>\n    <p ng-if="document.original_sample_name">\n          Field sample name: {{document.original_sample_name}}</p>\n\n    <p ng-if="document.thin_section">\n          Sample description: {{document.sample_description}}</p>\n    <p ng-if="document.collected_year">\n          Collected year: {{document.collected_year}} [{{document.expedition}}]</p>\n    <p ng-if="document.thin_section">Thin section number: {{document.thin_section}}</p>\n      <p ng-if="document.analysis">Analysis:\n      <span ng-repeat="item in document.analysis" class="nowrap">\n            {{ item }} &nbsp;&nbsp;\n     </span> </p>\n     <p ng-if="document.sample_comment">\n          Comment: {{document.sample_comment}}</p>\n  </section>\n\n <!--  <section>\n  <div ng-if="document.files.length > 0">\n    <h3>{{ \'Pictures\' | t }}</h3>\n    <md-divider></md-divider>\n    <md-list>\n      <md-list-item class="md-2-line" ng-repeat="file in document.files">\n        <div class="md-list-item-text">\n          <a ng-href="{{file.uri}}"><img src="{{file.uri}}" alt="{{ file.filename }}" style="width:152px;height:114px;"></a>\n        </div>\n      </md-list-item>\n    </md-list>\n  </div>\n  </section> -->\n\n\n<section ng-if="document.last_name && document.last_name.length > 0">\n  <h3>{{ \'Person\' | t }}</h3>\n <md-divider></md-divider>\n  <md-list>\n      <p> <md-icon class="md-avatar-icon">person</md-icon>\n          {{ document.first_name }} {{ document.last_name }}, {{ document.organisation }} </p>\n    </md-list>\n</section>\n\n\n <section>\n  <div ng-if="document.links.length > 0">\n    <h3>{{ \'Links\' | t }}</h3>\n    <md-divider></md-divider>\n    <md-list>\n      <md-list-item class="md-2-line" ng-repeat="link in document.links">\n        <div class="md-list-item-text">\n          <a ng-href="{{link.href}}">{{ link.title || link.href }}</a>\n          <p>{{ link.rel }}</p>\n        </div>\n      </md-list-item>\n    </md-list>\n  </div>\n  </section>\n\n\n\n      <section ng-if="alternate">\n        <md-divider></md-divider>\n        <h3>{{ \'Machine-readable metadata\' | t }}</h3>\n        <!-- @todo CC0 for metadata? <p></p> -->\n        <p>\n          <div ng-repeat="link in alternate">\n            <a ng-href="{{link.href}}" title="{{link.type}}">{{ link.title || link.href }}</a>\n            </div>\n        </p>\n      </section>\n\n<!-- created updated -->\n      <section>\n        <npdc:document-meta></npdc:document-meta>\n      </section>\n\n    </div>\n</div>\n\n'),t.put("angular-npolar/src/ui/i18n/lang-menu.html",'  <md-menu>\n      <md-button class="md-icon-button" ng-click="$mdOpenMenu($event)">\n        <md-icon md-menu-origin>language</md-icon>\n        <md-tooltip>{{ lang.getNativeName(lang.getLang()) }}</md-tooltip>\n      </md-button>\n      <md-menu-content width="6">\n         <div>\n          <md-icon>language</md-icon>\n          \n          {{ \'npdc.menu.Select_language\' | t }} ({{ \'npdc.currently\' | t }} {{ lang.getNativeName(lang.getLang()) }})\n         </div>\n         <div>\n          \n         \n         </div>\n        <md-menu-item ng-repeat="subtag in lang.getLanguages()">\n          <md-button ng-click="lang.setLang(subtag, lang.getLang())">{{ lang.getNativeName(subtag) }}</md-button>\n        </md-menu-item>\n\n      </md-menu-content>\n    </md-menu>'),t.put("edit/coverage/coverage.html",'<div ng-if="field.visible">\n   <leaflet options="mapOptions" flex="100" class="coverage-map"></leaflet>\n    <div layout="row" layout-wrap>\n    <div flex="25" flex-sm="50">\n      <formula:field field="field.fields[0]"></formula:field>\n    </div>\n    <div flex="25" flex-sm="50">\n      <formula:field field="field.fields[1]"></formula:field>\n    </div>\n    <div flex="25" flex-sm="50">\n      <formula:field field="field.fields[2]"></formula:field>\n    </div>\n  </div>\n</div>'),t.put("angular-npolar/src/ui/message/_message.html",'<div ng-if="info" class="info">[info]{{ info | json }}</div>\n<div ng-if="error" class="error">[error] {{ error | json }}</div>'),t.put("angular-npolar/src/ui/message/_message_toast.html",'<md-toast class="{{msgType}}">\n  <span flex> <b>{{explanation}}</b></span>\n  <md-button class="md-action" ng-click="closeToast();">OK</md-button>\n</md-toast>\n'),t.put("angular-npolar/src/ui/template/_delete.html",'<div class="npolar-confirm-delete">\n  <h3>Really DELETE?</h3>\n\n  <button type="button" ng-click="deleteClicked=false && back()" class="btn btn-default">no</button>\n  <button type="button" ng-click="delete()" class="btn btn-danger">yes</button>\n</div>\n'),t.put("angular-npolar/src/ui/template/_error.html",'<h2 ng-if="error" class="alert alert-danger" role="alert"><strong>{{error.status}} ERROR {{error.statusText}}</strong> {{error.data}}</h2>'),t.put("angular-npolar/src/ui/template/_foot.html",""),t.put("angular-npolar/src/ui/template/_head.html",'<div ng-if="error" ng-include="\'angular-npolar/src/ui/template/_error.html\'"></div>\n<div ng-if="info" ng-include="\'angular-npolar/src/ui/template/_info.html\'"></div>\n'),t.put("angular-npolar/src/ui/template/_info.html",'<h2 ng-if="info" class="alert alert-success"><strong>{{info.header}}</strong> {{info.message }}</h2>'),t.put("angular-npolar/src/ui/template/_search.html",'<div>\n  <span ng-if="!feed.entries">Fetching data from {{base}}</span>\n  <span ng-if="feed.opensearch.totalResults > 0">{{feed.opensearch.totalResults}} results from {{ base }}</span>\n  <span ng-if="feed.opensearch.totalResults == 0">No results</span>\n</div>\n\n<h3><span ng-if="filters.length">Filters: {{filters | json}}</span><span ng-if="filters.length"><a ng-href="/vessel">Remove filters</a></span></h3>\n\n<h2><a ng-if="user.name" href="__new/edit"><button type="button" class="pure-button">New</button></a></h2>\n\n<p>Filter: <input ng-model="entryfilter"></p>\n\n<div ng-repeat="e in feed.entries | filter:entryfilter">\n  <h4 class=""><a ng-href="{{e.id}}">{{ e.title || e.name || e.id }}</a> {{e.updated }}</h4>\n</div>\n'),t.put("npdc-common/src/components/document/authors/authorstemplate.html",'<!DOCTYPE html>\n<section ng-controller="NpdcAuthorsController as ctrl">\n  <md-menu>\n\n    <md-button class="md-fab md-primary md-hue-2" aria-label="Open people interactions menu" ng-click="$mdOpenMenu($event)">\n       <md-icon md-menu-origin>{{ctrl.icon()}}</md-icon>\n       <md-tooltip md-direction="top">{{ authors.length }} {{ (authors.length > 1) ? (\'authors\'|t) : (\'author\'|t) }}\n        <span ng-if="ctrl.contributors.length > 0">{{ contributors.length}}</span>\n       </md-tooltip>\n    </md-button>\n\n    <md-menu-content width="6">\n\n        <md-menu-item ng-if="ctrl.contributors.length > 0">\n          <md-button ng-click="ctrl.flip(\'contributor\')">\n            Show {{ ctrl.show(\'contributor\') ? \'only authors\' : \'contributors\' }}\n          </md-button>\n        </md-menu-item>\n\n        <md-menu-divider ng-if="ctrl.contributors.length > 0"></md-menu-divider>\n\n        <md-menu-item>\n          <md-button md-autofocus ng-click="ctrl.flip(\'affiliations\')">\n            Show {{ ctrl.show(\'affiliations\') ? \'names\' : \'affiliations\' }}\n          </md-button>\n        </md-menu-item>\n\n    </md-menu-content>\n  </md-menu>\n\n  <span ng-show="true" class="np-authors">\n    <span ng-repeat="p in ctrl.authors" class="author" ng-click="ctrl.gotoPerson(p)">\n      <span>{{ p.name }}<md-tooltip md-direction="top" md-delay="250">{{ p.roles }}</md-tooltip></span><a ng-if="p.email && isContact(p)" ng-href="mailto:{{p.email}}"><md-icon>email</md-icon><md-tooltip md-direction="bottom" md-delay="250">{{ p.email }}</md-tooltip></a><span class="md-caption" ng-show="ctrl.show(\'affiliations\')"><span ng-if="ctrl.isNpolar(p.organisation)"><img height="20" ng-src="{{ctrl.tinyLogo(\'npolar.no\')}}" alt="npolar.no"><md-tooltip md-direction="top" md-delay="250">{{ \'npolar.no\'|t }}</md-tooltip></img></span><span ng-if="!ctrl.isNpolar(p.organisation)">&#160;({{ p.organisation }})<md-tooltip md-direction="top" md-delay="250">{{ p.organisation|t }}</md-tooltip></span></span><span ng-if="!$last">,</span>\n    </span>\n    <p ng-show="ctrl.show(\'contributor\')">\n      <span ng-repeat="p in ctrl.contributors" ng-click="ctrl.gotoPerson(p)">\n        {{ p.name  }} {{ p.roles|json}}<a ng-if="p.email && isContact(p)" ng-href="mailto:{{p.email}}"><md-icon>email</md-icon></a>\n        <md-tooltip md-direction="top" md-delay="150">{{ p.name  }} ({{ (p.organisation||\'\') | t}})</md-tooltip>\n        <span ng-if="!$last">, </span>\n      </span>\n    </p>\n  </span>\n\n\n</section>'),t.put("npdc-common/src/components/document/badges/badges.html",'<!DOCTYPE html>\n<div class="npdc-badges">\n  <a ng-if="openAccess" ng-href="//en.wikipedia.org/wiki/Open_access">\n    <img src="/assets/img/oa.png" height="31px" title="Open access">\n  </a>\n\n  <a ng-if="license" ng-href="{{ licenseHref }}">\n    <img ng-src="/assets/img/{{ licenseImg }}.png" height="31px" title="{{ licenseTitle }}">\n  </a>\n\n  <a ng-if="doi" ng-href="//doi.org/{{ doi }}">\n    <img src="/assets/img/doi.png" height="31px" title="Digital Object Identifier">\n  </a>\n  <a ng-if="doi" ng-href="//doi.org/{{ doi }}" style="padding-bottom: 0.5em;">{{ doi }}</a>\n</div>\n'),t.put("npdc-common/src/components/document/citation/citation.html",'<span><md-icon>format_quote</md-icon>{{ \'Citation\'|t }}</span>\n<span ng-repeat="link in citations">\n  <a ng-click="citationClicked(link)" href="" title="{{link.type}}"><span ng-show="link.title != citation.title" >{{ link.title || link.href }}</span></a>\n  <b ng-show="link.title == citation.title" >{{ link.title || link.href }}</b>\n  <span ng-if="!$last">|</span>\n</span>\n<br ng-if="!isPreformatted(citation)"></br>\n<code ng-show="!error && !isPreformatted(citation)" class="np-citation">{{ citation.text }}</code>\n<pre ng-show="!error && isPreformatted(citation)" class="np-citation">{{ citation.text }}</pre>\n<pre>{{ error | t }}</pre>'),t.put("npdc-common/src/components/document/citation/citationtemplate.html",'<!DOCTYPE html>\n<md-card>\n  <md-card-header>\n    <md-card-avatar>\n      <md-icon>“”</md-icon>\n    </md-card-avatar>\n    <md-card-header-text>\n      <span class="md-headline">{{ \'Citation\'|t }}</span>\n      <span class="md-subhead">{{ \'Citation-subhead\'|t }}</span>\n    </md-card-header-text>\n  </md-card-header>\n  <md-card-content md-whiteframe-1dp>\n    <p>{{ \'Formats\'|t }}: <span ng-repeat="link in citations">\n          <a ng-click="citationClicked(link)" href="" title="{{link.type}}"><span ng-show="link.title != citation.title" >{{ link.title || link.href }}</span></a>\n          <b ng-show="link.title == citation.title" >{{ link.title || link.href }}</b>\n          <span ng-if="!$last">|</span>\n        </span>\n    </p>\n    <code ng-show="!error && !isPreformatted(citation)" class="np-citation">{{ citation.text }}</code>\n    <pre ng-show="!error && isPreformatted(citation)" class="np-citation">{{ citation.text }}</pre>\n    <pre>{{ error | t }}</pre>\n  </md-card-content>\n</md-card>'),t.put("npdc-common/src/components/document/collection/collection.html",'<!DOCTYPE html>\n<div class="np-collection md-default-theme md-chips">\n  <div class="md-chip">\n    <div class="md-chip-content" tabindex="-1" aria-hidden="true">\n      <md-icon>label_outline</md-icon><strong>{{ collection | t }}</strong>\n    </div>\n  </div>\n</div>\n'),t.put("npdc-common/src/components/document/licences/licences.html",'<!DOCTYPE html>\n<div class="np-licences">\n  <a ng-repeat="l in licences" class="{{l.class}}" ng-href="{{l.href}}">{{l.text}}</a>\n</div>\n'),t.put("npdc-common/src/components/document/links/datatemplate.html",'<!DOCTYPE html>\n<section ng-if="data.length > 0">\n  <md-divider></md-divider>\n  <h3>Data</h3>\n  \n  <md-list>\n    <md-list-item class="md-2-line" ng-repeat="d in data">\n        <md-icon>file_download</md-icon>\n        <!--div class="md-list-item-text">-->\n          <p><a ng-href="{{d.href}}"> {{ d.title || d.href }} {{d.type ? \'(\'+d.type+\')\':\'\'}}</a></p>\n          <!--<p>\n            <span ng-repeat="licence in licenses">\n              <a ng-href="{{licence}}">{{ licenceText(licence); }}</a>{{ $last ? \'\':\', \'}}\n            </span>\n          </p>-->\n        <!--/div>-->\n    </md-list-item>\n    <div marked="rights"></div>\n  </md-list>\n</section>\n'),t.put("npdc-common/src/components/document/links/linkstemplate.html",'<!DOCTYPE html>\n<section>\n\n   <md-card ng-if="links.length > 0">\n    <md-card-header>\n      <md-card-avatar>\n        <md-icon>subdirectory_arrow_right</md-icon>\n      </md-card-avatar>\n      <md-card-header-text>\n        <span class="md-headline">{{ \'Links\' | t }}</span>\n        <span class="md-subhead">\n        </span>\n      </md-card-header-text>\n    </md-card-header>\n    <md-card-content>\n      <span ng-repeat="link in links">\n        <span ng-if="link.rel != \'related\'">{{ link.rel | t  }}: </span><a ng-href="{{link.href}}" title="{{link.title}}">{{ link.title }}</a>\n        <span ng-if="!$last">|</span>\n      </span>\n    </md-card-content>\n  </md-card>\n\n\n  <div ng-if="!isEmpty(related)">\n    <md-list>\n      <md-subheader class="md-no-sticky" ng-repeat-start="collection in related" ng-if="collection[0]">{{ collection | t }}</md-subheader>\n      <md-list-item ng-repeat="rel in collection" ng-if="rel._score > 0.45" ng-repeat-end>\n        <div class="md-list-item-text">\n          <a ng-href="{{\'/\' + rel.collection + \'/\' + rel.id}}">{{ rel.title }}</a>\n          <span ng-show="true">[{{ rel._score }}]</span>\n        </div>\n      </md-list-item>\n    </md-list>\n  </div>\n\n</section>\n'),
t.put("npdc-common/src/components/document/meta/metatemplate.html",'<!DOCTYPE html>\n<div layout="row" layout-align="start start" class="np-document-meta">\n  <div class="document-meta">\n    <h4><md-icon>access_time</md-icon><span> {{\'Created\' | t}}: </span></h4><span>{{document.created.substr(0,10)}}</span>\n  </div>\n  <div class="document-meta">\n    <h4><md-icon>sync</md-icon><span> {{\'Updated\' | t}}: </span></h4><span>{{document.updated.substr(0,10)}}</span>\n  </div>\n  <div class="document-meta" ng-if="document.draft === \'yes\'">\n    <code>DRAFT</code>\n  </div>\n</div>\n'),t.put("npdc-common/src/components/document/organisations/organisations.html",'<!DOCTYPE html>\n<!-- <section ng-if="document.organisations">\n  <h3 class="headline">{{\'Organisations\' | t}}</h3>\n  <md-divider></md-divider>\n  <md-list>\n    <md-list-item class="md-2-line" ng-repeat="o in document.organisations">\n      <md-icon>business</md-icon>\n      <div class="md-list-item-text">\n        <h3><a ng-href="{{resource.uiBase}}?q={{ (o.id || o.name|t) }}">{{ (o.name || o.id) | t }}</a></h3>\n        <p ng-if="o.role">{{o.role | t }}</p>\n        <p><span ng-repeat="r in o.roles">{{ r }}<span ng-if="!$last">, </span></span></p>\n        <a ng-href="{{o.homepage}}">{{o.homepage}}</a>\n      </div>\n    </md-list-item>\n  </md-list>\n</section>\n-->\n<md-card>\n    <md-card-header>\n      <md-card-avatar>\n        <md-icon>business</md-icon>\n      </md-card-avatar>\n      <md-card-header-text>\n        <span class="md-headline">{{\'Organisations\' | t}}</span>\n        <span class="md-subhead"></span>\n      </md-card-header-text>\n    </md-card-header>\n    <md-card-content>\n      <span class="md-subhead">\n      <md-list>\n        <md-list-item class="md-1-line" ng-repeat="o in document.organisations">\n\n          <div class="md-list-item-text">\n            <span>{{ (o.name) | t }} ({{ o.id }})</span>\n\n            <i ng-repeat="r in o.roles">{{ r | t }}<span ng-if="!$last">, </span></i>\n\n            <a ng-if="o.homepage" ng-href="{{o.homepage}}"><md-icon>home</md-icon><md-tooltip>{{\'Homepage\'}}: {{o.homepage}}</md-tooltip></a>\n            <!-- @todo create nice menu --><!--<md-button ng-href="{{resource.uiBase}}?q={{ (o.id || o.name|t) }}">{{ \'Search\' }}</md-button>-->\n          </div>\n        </md-list-item>\n      </md-list>\n      </span>\n    </md-card-content>\n  </md-card>'),t.put("npdc-common/src/components/document/persons/persons.html",'<!DOCTYPE html>\n<md-card ng-if="document.people && document.people.length > 0">\n    <md-card-header>\n      <md-card-avatar>\n        <md-icon>person</md-icon>\n      </md-card-avatar>\n      <md-card-header-text>\n        <span class="md-headline">{{\'People\' | t}}</span>\n        <span class="md-subhead"></span>\n      </md-card-header-text>\n    </md-card-header>\n    <md-card-content>\n      <p ng-repeat="p in document.people">\n        <span id="{{ p.first_name | lowercase }}+{{ p.last_name | lowercase}}" class="anchor"></span>\n        <span>\n          {{ p.first_name}} {{ p.last_name}}\n        </span>\n\n        <span ng-if="p.organisation">({{ (p.organisation) }})</span>\n        <i ng-repeat="r in p.roles || [p.role]">{{ r | t }}<span ng-if="!$last">, </span></i>\n\n        <a ng-if="p.homepage" ng-href="{{p.homepage}}"><md-icon alt="Homepage">home</md-icon><md-tooltip>{{\'Homepage\'}}: {{p.homepage}}</md-tooltip></a>\n        <a ng-if="p.email && isPointOfContact(p)" ng-href="mailto:{{p.email}}"><md-icon>email</md-icon></a>\n        <!-- todo nice menu <md-button ng-href="{{resource.uiBase}}?q={{ p.name }}&filter-people.last_name={{p.last_name}}">{{ \'Search\' }}</md-button>-->\n\n      </p>\n    </md-card-content>\n  </md-card>\n'),t.put("npdc-common/src/components/document/persons/personstemplate.html",'<!DOCTYPE html>\n<section ng-if="document.people && document.people.length > 0">\n  <md-divider></md-divider>\n  <h3>{{ \'People\' | t }}</h3>\n  <md-list>\n    <md-list-item class="md-2-line" ng-repeat="person in document.people">\n      <md-icon class="md-avatar-icon">person</md-icon>\n        <div class="md-list-item-text">\n          <h3><a ng-href="{{resource.uiBase}}?q={{ person.first_name }}+{{ person.last_name }}&filter-people.last_name={{ person.last_name }}">\n            {{ person.first_name }} {{ person.last_name }}</a></h3>\n          <p ng-if="person.organisation">{{ person.organisation | t }}</p>\n          <p ng-if="person.role">{{ person.role | t}}</p>\n          <p ng-if="person.roles">\n            <span ng-repeat="r in person.roles">{{ r | t }}\n              <span ng-if="person.email && r==\'pointOfContact\'"> [{{ person.email}}] {{ person.homepage}}</span><span ng-if="!$last">, </span>\n            </span>\n          </p>\n        </div>\n      </md-list-item>\n    </md-list>\n</section>\n'),t.put("npdc-common/src/components/document/placenames/placenames.html",'<!DOCTYPE html>\n<section ng-if="document.placenames">\n  <h3>Placenames</h3>\n  <md-divider></md-divider>\n  <p>\n    <div ng-repeat="p in document.placenames">\n      <md-icon>place</md-icon><a ng-href="{{resource.uiBase}}?q={{ p.placename || p.area }}">{{ p.placename || p.area }}</a>\n    </div>\n  </p>\n</section>\n'),t.put("npdc-common/src/components/document/show/document.html",'<!DOCTYPE html>\n<script type="text/ng-template" id="any.html">\n  <div ng-if="isArray(value)" layout="row" class="np-document-array">\n    <div class="np-document-title md-title" flex>{{ key }}</div>\n    <ul flex="85">\n      <li ng-repeat="(key, value) in value">\n        <ng-include src="\'any.html\'"></ng-include>\n      </li>\n    </ul>\n  </div>\n  <div ng-if="isObject(value)" layout="row" class="np-document-object">\n    <div class="np-document-title md-title" flex>{{ key }}</div>\n    <ul flex="85">\n      <li ng-repeat="(key, value) in value">\n        <ng-include src="\'any.html\'"></ng-include>\n      </li>\n    </ul>\n  </div>\n  <div ng-if="isItem(value)" layout="row" class="np-document-item">\n    <div class="np-document-title md-title" flex>{{ key }}</div>\n    <div class="np-document-value" flex="85">{{ value }}</div>\n  </div>\n</script>\n\n<div class="np-document">\n  <npdc:edit-button class="np-primary-control"></npdc:edit-button>\n  <div class="np-document-ctrls" layout="row">\n    <div class="np-document-ctrls-title" flex>Fancy: </div><md-switch flex ng-model="fancy" aria-label="Render mode"></md-switch>\n  </div>\n  <ul ng-if="fancy">\n    <li ng-repeat="(key, value) in document">\n      <ng-include src="\'any.html\'"></ng-include>\n    </li>\n  </ul>\n  <pre ng-if="!fancy">\n    {{ document | json }}\n  </pre>\n</div>\n'),t.put("npdc-common/src/components/formula/templates/array.html",'<fieldset ng-class="{ valid: field.valid, error: field.error }" ng-if="field.visible">\n  <md-whiteframe class="md-whiteframe-z2">\n\n    <legend>\n      <div>{{ field.title }} ({{ field.nrArrayValues() }})</div>\n      <div npdc:formula-field-info class="np-field-info" ng-if="::field.description"></div>\n    </legend>\n\n    <ul ng-if="::field.typeOf(\'field\')" class="np-formula-list">\n      <li ng-repeat="value in field.values" ng-class="{ valid: field.valid, error: field.error }" class="np-formula-list-item">\n        <formula:field field="value" class="multi-ctrls"></formula:field>\n        <div class="np-formula-input-ctrls">\n          <md-menu>\n            <md-button aria-label="Actions" class="md-icon-button" ng-click="$mdOpenMenu($event)">\n              <md-icon md-menu-origin>menu</md-icon>\n              <md-tooltip md-direction="left">{{ i18n.text.actions.tooltip }}</md-tooltip>\n            </md-button>\n            <md-menu-content>\n              <md-menu-item ng-show="!$first">\n                <md-button ng-click="field.moveUp($index)">\n                  <md-icon md-menu-align-target>arrow_upward</md-icon> {{ i18n.text.moveup.label }}\n                  <md-tooltip md-direction="left">{{ i18n.text.moveup.tooltip }}</md-tooltip>\n                </md-button>\n              </md-menu-item>\n              <md-menu-item ng-show="!$last">\n                <md-button ng-click="field.moveDown($index)">\n                  <md-icon md-menu-align-target>arrow_downward</md-icon> {{ i18n.text.movedown.label }}\n                  <md-tooltip md-direction="left">{{ i18n.text.movedown.tooltip }}</md-tooltip>\n                </md-button>\n              </md-menu-item>\n              <md-menu-item>\n                <md-button ng-click="field.itemRemove($index)" class="md-warn">\n                  <md-icon md-menu-align-target>delete</md-icon> {{ i18n.text.remove.label }}\n                  <md-tooltip md-direction="left">{{ i18n.text.remove.tooltip }}</md-tooltip>\n                </md-button>\n              </md-menu-item>\n            </md-menu-content>\n          </md-menu>\n        </div>\n      </li>\n    </ul>\n\n    <ul ng-if="::field.typeOf(\'fieldset\')" class="np-formula-list">\n      <li ng-repeat="value in field.values" ng-if="!value.hidden" class="np-formula-list-item">\n        <div class="np-formula-collapsed-item" ng-if="!value.visible" ng-click="field.itemToggle($index)"></div>\n        <md-whiteframe class="md-whiteframe-z2">\n          <fieldset ng-class="{ valid: value.valid }">\n            <legend>\n              <!--span class="np-formula-array-object-title">{{ value.title }}</span-->\n              <span ng-if="!value.visible">{{ value.value | formulaInlineValues }}</span>\n              <div class="np-formula-object-ctrls">\n                <div npdc:formula-field-info class="np-field-info" ng-if="value.description"></div>\n                <a href="" ng-click="field.itemToggle($index)">\n                  <md-icon>{{ value.visible ? \'expand_less\' : \'expand_more\' }}</md-icon>\n                  <md-tooltip>{{ value.visible ? i18n.text.minimize.tooltip : i18n.text.maximize.tooltip }}</md-tooltip>\n                </a>\n                <md-menu>\n                  <md-button aria-label="Actions" class="md-icon-button" ng-click="$mdOpenMenu($event)">\n                    <md-icon md-menu-origin>menu</md-icon>\n                    <md-tooltip md-direction="left">{{ i18n.text.actions.tooltip }}</md-tooltip>\n                  </md-button>\n                  <md-menu-content>\n                    <md-menu-item ng-show="!$first">\n                      <md-button ng-click="field.moveUp($index)">\n                        <md-icon md-menu-align-target>arrow_upward</md-icon> {{ i18n.text.moveup.label }}\n                        <md-tooltip md-direction="left">{{ i18n.text.moveup.tooltip }}</md-tooltip>\n                      </md-button>\n                    </md-menu-item>\n                    <md-menu-item ng-show="!$last">\n                      <md-button ng-click="field.moveDown($index)">\n                        <md-icon md-menu-align-target>arrow_downward</md-icon> {{ i18n.text.movedown.label }}\n                        <md-tooltip md-direction="left">{{ i18n.text.movedown.tooltip }}</md-tooltip>\n                      </md-button>\n                    </md-menu-item>\n                    <md-menu-item>\n                      <md-button ng-click="field.itemRemove($index)" class="md-warn">\n                        <md-icon md-menu-align-target>delete</md-icon> {{ i18n.text.remove.label }}\n                        <md-tooltip md-direction="left">{{ i18n.text.remove.tooltip }}</md-tooltip>\n                      </md-button>\n                    </md-menu-item>\n                  </md-menu-content>\n                </md-menu>\n              </div>\n            </legend>\n            <formula:field field="value" ng-if="value.visible" class="np-formula-array-fieldset"></formula:field>\n          </fieldset>\n        </md-whiteframe>\n      </li>\n    </ul>\n\n    <div class="np-formula-array-add">\n      <md-button ng-click="field.itemAdd()" class="md-fab md-mini md-primary md-hue-1" aria-label="{{ i18n.text.add.tooltip }}">\n        <md-icon>add</md-icon>\n        <md-tooltip>{{ i18n.text.add.tooltip }}</md-tooltip>\n      </md-button>\n    </div>\n    <div style="clear: both;"></div>\n  </md-whiteframe>\n</fieldset>\n'),t.put("npdc-common/src/components/formula/templates/checkbox.html",'<!DOCTYPE html>\n<md-checkbox ng-attr-id="::field.uid" ng-model="field.value" ng-disabled="field.disabled" aria-label="{{ field.title }}"  ng-if="field.visible">\n  <label for="{{::field.uid}}">{{ field.title }}</label>\n</md-checkbox>\n<div npdc:formula-validation-message class="np-validation-message"></div>\n'),t.put("npdc-common/src/components/formula/templates/date.html",'<!DOCTYPE html>\n<md-input-container ng-if="field.visible">\n  <label for="{{::field.uid}}">{{field.title}}<i ng-if="field.required">&nbsp;({{ i18n.text.required }})</i></label>\n  <input type="text" ng-model="field.value" ng-disabled="field.disabled" chronopic />\n  <div npdc:formula-validation-message class="np-validation-message"></div>\n</md-input-container>\n'),t.put("npdc-common/src/components/formula/templates/field.html",'<!DOCTYPE html>\n<md-input-container ng-if="field.visible">\n  <label for="{{::field.uid}}">{{field.title}}<i ng-if="field.required">&nbsp;({{ i18n.text.required }})</i></label>\n  <formula:input field="field"></formula:input>\n  <div npdc:formula-validation-message class="np-validation-message"></div>\n</md-input-container>\n'),t.put("npdc-common/src/components/formula/templates/fieldInfo.html",'<!DOCTYPE html>\n<md-icon>info_outline\n  <md-tooltip md-direction="left">{{ field.description }}</md-tooltip>\n</md-icon>\n'),t.put("npdc-common/src/components/formula/templates/fieldset.html",'<!DOCTYPE html>\n<div class="np-tab np-formula-tab" ng-class="{ \'active\': fieldset.active }">\n  <formula:fields fields="::fieldset.fields"></formula:fields>\n</div>\n'),t.put("npdc-common/src/components/formula/templates/form.html",'<!DOCTYPE html>\n<div>\n  <form name="formula" class="formula" ng-show="form.ready">\n    <header ng-if="::form.title">\n      {{ form.title }}\n    </header>\n\n    <npdc:tabs tabs="form.fieldsets" tabactivate="form.activate"></npdc:tabs>\n    <formula:fieldsets class="np-tabs np-formula-fieldsets"></formula:fieldsets>\n\n    <div class="np-padding">\n      <span ng-if="form.errors" title="{{ form.errors.join(\'\\n\') }}">{{ i18n.text.invalid | formulaReplace : { count: form.errors.length } }}</span>\n    </div>\n  </form>\n</div>\n'),t.put("npdc-common/src/components/formula/templates/object.html",'<!DOCTYPE html>\n<fieldset ng-if="field.visible">\n  <md-whiteframe class="md-whiteframe-z2">\n    <legend>{{ field.title }}\n      <div npdc:formula-field-info class="np-field-info" ng-if="::field.description"></div>\n    </legend>\n\n    <formula:fields fields="field.fields"></formula:fields>\n  </md-whiteframe>\n</fieldset>\n'),t.put("npdc-common/src/components/formula/templates/range.html",'<!DOCTYPE html>\n<div ng-if="field.visible">\n  <label for="{{::field.uid}}">{{ field.title }}:\n    <span>{{field.value}}</span>\n  </label>\n  <md-slider flex min="{{field.minimum}}" max="{{field.maximum}}" step="{{field.step}}" md-discrete ng-model="field.value" aria-label="{{field.title}}" ng-attr-id="field.uid">\n  </md-slider>\n  <div npdc:formula-validation-message class="np-validation-message"></div>\n</div>\n'),t.put("npdc-common/src/components/formula/templates/select.html",'<!DOCTYPE html>\n<md-input-container ng-if="field.visible">\n  <label for="{{::field.uid}}">{{field.title}}<i ng-if="field.required">&nbsp;({{ i18n.text.required }})</i></label>\n\n  <!-- single-select -->\n  <md-select ng-model="field.value" ng-if="::!field.multiple">\n    <md-option ng-repeat="val in field.values" value="{{::val.id}}">{{val.label}}</md-option>\n  </md-select>\n\n  <!-- multi-select, ref: https://docs.angularjs.org/error/$compile/selmulti -->\n  <md-select ng-model="field.value" multiple ng-if="::field.multiple">\n    <md-option ng-repeat="val in field.values" value="{{::val.id}}">{{val.label}}</md-option>\n  </md-select>\n\n  <div npdc:formula-validation-message class="np-validation-message"></div>\n</md-input-container>\n'),t.put("npdc-common/src/components/formula/templates/validationMessage.html",'<!DOCTYPE html>\n<div class="md-caption" role="alert" ng-show="field.error">\n  {{ field.error.message }}\n</div>\n'),t.put("npdc-common/src/components/search/autocomplete/autocomplete.html",'<!DOCTYPE html>\n<div ng-keyup="keyup($event);">\n    <md-autocomplete ng-if="options.floatingLabel"\n      md-floating-label="{{options.placeholder | t}}"\n      md-item-text="title(item)"\n      md-items="item in querySearch(options.q)"\n      md-min-length="1"\n      md-no-cache="false"\n      md-search-text="options.q"\n      md-selected-item-change="selectedItemChange(item)"\n      md-selected-item="selectedItem"\n      md-menu-class="{{options.menuClass}}">\n\n      <md-item-template>\n        [{{item.collection}}] <span md-highlight-flags="^i" md-highlight-text="options.q">{{ title(item) }}</span>\n      </md-item-template>\n\n    </md-autocomplete>\n\n    <md-autocomplete ng-if="!options.floatingLabel"\n      placeholder="{{options.placeholder | t}}"\n      md-item-text="title(item)"\n      md-items="item in querySearch(options.q)"\n      md-min-length="1"\n      md-no-cache="true"\n      md-search-text="options.q"\n      md-selected-item-change="selectedItemChange(item)"\n      md-selected-item="selectedItem"\n      md-menu-class="{{options.menuClass}}">\n\n      <md-item-template>\n        [{{item.collection}}] <span md-highlight-flags="^i" md-highlight-text="options.q">{{ title(item) }}</span>\n      </md-item-template>\n\n    </md-autocomplete>\n\n    <div ng-if="options.showCollections && !expandSearch">\n      <br/>\n      <md-checkbox ng-model="options.collections[collection]" ng-repeat="(collection, value) in options.collections">{{ collection }}</md-checkbox>\n    </div>\n</div>\n'),t.put("npdc-common/src/components/search/expandable-search/expandSearch.html",'<!DOCTYPE html>\n<div class="np-expand-search" ng-keyup="keyup($event);" ng-class="{ open: isOpen, sm: $mdMedia(\'sm\'), md: $mdMedia(\'md\'), lg: $mdMedia(\'lg\')}">\n  <md-fab-toolbar md-theme="white" md-open="isOpen" md-direction="left">\n    <md-fab-trigger>\n      <md-button aria-label="search" class="md-fab md-mini" ng-focus-out="blockEvent($event);" ng-click="open($event);">\n        <md-icon>search</md-icon>\n        <md-tooltip>{{ \'search\' | t }}</md-tooltip>\n      </md-button>\n    </md-fab-trigger>\n\n    <md-toolbar ng-focus-out="blockEvent($event);" ng-click="blockEvent($event);">\n      <md-fab-actions class="md-toolbar-tools">\n        <form class="np-es-input" ng-class="{open : isFiltersOpen}" ng-submit="search();" layout>\n          <div flex layout>\n            <npdc:autocomplete flex options="options"></npdc:autocomplete>\n          </div>\n          <md-button class="md-icon-button" ng-click="toggleFilters();" aria-label="{{ \'search.filter\' | t }}">\n            <md-icon>settings</md-icon>\n            <md-tooltip ng-if="isOpenDelay">{{ \'search.filter\' | t }}</md-tooltip>\n          </md-button>\n          <md-button class="md-icon-button" type="submit" aria-label="{{ \'search\' | t }}">\n            <md-icon>search</md-icon>\n            <md-tooltip ng-if="isOpenDelay">{{ \'search\' | t }}</md-tooltip>\n          </md-button>\n        </form>\n      </md-fab-actions>\n    </md-toolbar>\n  </md-fab-toolbar>\n\n  <div ng-show="isFiltersOpen && isOpen" class="np-es-filter" ng-class="{ open: isFiltersOpen && isOpen }">\n    <div ng-if="options.showCollections" layout layout-wrap layout-align="space-between center">\n      <span flex="25" ng-repeat="collection in options.collections">\n        <md-checkbox ng-model="collection.enabled">{{ collection.name }}</md-checkbox>\n      </span>\n    </div>\n  </div>\n</div>\n\n<div id="np-es-click-area" ng-class="{ open: isOpen }" ng-click="close();"></div>\n'),t.put("npdc-common/src/components/search/faceting/faceting.html",'<!DOCTYPE html>\n<div class="np-faceting">\n  <!-- blue pills (active facet filters)-->\n  <div class="np-faceting-active-filters np-center-content" ng-show="ctrl.activeFilters()">\n    <div class="np-chips">\n      <div ng-repeat="filter in ctrl.filters()" ng-class="{\'md-focused\': selectedChip === $index}" class="np-chip md-default-theme">\n        <div class="np-chip-content" tabindex="-1" aria-hidden="true" ng-click="selectChip($index)">\n          <strong>{{ i18n(filter.facet) | t }}: {{ filter.term.replace(\'field.\', \'\') }}</strong>\n          <span ng-if="false">({{ filter.count }})</span><!-- @todo Make configurable? -->\n          <a class="np-chip-remove" ng-click="removeFilter(filter)" type="button" aria-hidden="true">\n            <md-icon>close</md-icon>\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- faceting -->\n  <div class="np-faceting-facets" layout="row" layout-wrap layout-align="space-around start">\n    <div ng-repeat="facet in model" flex="100" flex-gt-sm="50" flex-gt-md="33" ng-if="facet.uiType !== \'hidden\'">\n\n      <!-- autocomplete -->\n      <md-autocomplete ng-if="facet.uiType === \'autocomplete\'"\n        md-items="item in facet.querySearch(facet.searchText)"\n        md-item-text="item.term"\n        md-min-length="0"\n        md-search-text="facet.searchText"\n        md-floating-label="{{ i18n(facet.key) | t}}"\n        md-selected-item-change="ctrl.selectedItemChange(item, facet)"\n        md-select-on-match="true"\n        md-selected-item="facet.selectedItem">\n        <md-item-template>\n          <span md-highlight-text="facet.searchText" md-highlight-flags="^i" ng-click="ctrl.clickedFacet(item)">{{item.term}} ({{item.count}})</span>\n        </md-item-template>\n        <md-not-found>\n          No matches found for "{{facet.searchText}}".\n        </md-not-found>\n        <md-icon class="np-faceting-autocomplete-icon">arrow_drop_down</md-icon>\n      </md-autocomplete>\n\n      <!-- checkbox -->\n      <div ng-if="facet.uiType === \'checkbox\'" class="np-custom-facet">\n        <label>{{i18n(facet.key) | t}}</label>\n        <ul layout layout-wrap>\n          <li ng-repeat="item in facet[facet.key] | orderBy:\'-term\'" flex="none">\n            <md-checkbox ng-model="item.selected" ng-change="toggleSelect(item)">\n              {{item.term}} ({{item.count}})\n            </md-checkbox>\n          </li>\n        </ul>\n      </div>\n\n      <!-- range -->\n      <div ng-if="facet.uiType === \'range\'" class="np-custom-facet np-range-facet">\n        <label>{{i18n(facet.key) | t}}</label>\n        <rzslider rz-slider-options="facet.slider.options" rz-slider-model="facet.slider.min" rz-slider-high="facet.slider.max"></rzslider>\n      </div>\n\n    </div>\n  </div>\n\n</div>\n'),t.put("npdc-common/src/components/search/input/searchInput.html",'<!DOCTYPE html>\n<md-card>\n  <md-card-content class="np-search-input">\n\n    <div layout="row">\n      <md-input-container flex md-no-float md-autofocus class="np-search-input-input md-icon-left md-has-icon">\n        <md-icon>search</md-icon>\n        <input ng-model="query.q" placeholder="{{options.placeholder | t}}" type="text" md-autofocus>\n      </md-input-container>\n      <md-button class="md-icon-button np-search-input-filters" ng-click="ctrl.toggleFilters();">\n        <md-icon>build</md-icon>\n        <md-tooltip>{{ \'search.filter\' | t }}</md-tooltip>\n      </md-button>\n    </div>\n\n    <npdc:faceting ng-if="options" options="options" ng-class="{ open: isFiltersOpen }"></npdc:faceting>\n\n  </md-card-content>\n</md-card>\n\n<div class="clearfix"></div>'),t.put("npdc-common/src/components/search/results/searchResults.html",'<!DOCTYPE html>\n<md-content layout-padding ng-if="true">\n  <span ng-if="feed.opensearch.totalResults > 0">\n    {{feed.opensearch.totalResults}} results, displaying {{ feed.entries.length}}\n  </span>\n  <span ng-if="showNext()" ><a ng-href="#" ng-click="next()">More</a></span>\n  <span ng-if="feed.opensearch.totalResults == 0">{{ \'search.no_results\' | t}} "{{q()}}"<span ng-if="ctrl.hasFilters()">, try <a ng-click="ctrl.removeFilters()">removing all filters</a></span></span>\n<!--  <span ng-show="feed.opensearch.totalResults > 0">@todo FIXME infinite loop[sort by:\n    <a ng-repeat="s in ctrl.sortList" ng-href="{{ctrl.sortHref(s.sort)}}">{{ s.name }} </a>]\n  </span>-->\n</md-content>\n\n<npdc:contributions facets="feed.facets"></npdc:contributions>\n<npdc:create-button class="np-primary-control"></npdc:create-button>\n\n<div class="npdc-search">\n  <md-content>\n\n    <section>\n      <npdc:loader ng-if="!feed.entries"></npdc:loader>\n\n      <div class="np-layout-list">\n        <md-list>\n          <md-list-item class="md-2-line" ng-repeat="e in feed.entries" ng-href="{{ entryHref(e) }}">\n            <img class="md-avatar" ng-src={{icon(e)}} title="ID: {{ e.id }}" />\n\n            <!-- <div class="np-search-icon md-avatar" title="ID: {{ e.id }}">\n              <span>{{ avatar(e) }}</span>\n            </div> -->\n            <div class="md-list-item-text">\n              <h3 class="md-headline">\n                <span md-highlight-text="q()" md-highlight-flags="ig">{{title(e)}}</span>\n                <em ng-if="subtitle(e)">\n                  「{{ subtitle(e) }}」\n                </em>\n              </h3>\n              <h4>{{ detail(e) }}</h4>\n            </div>\n          </md-list-item>\n        </md-list>\n        <md-divider></md-divider>\n      </div>\n      <md-button class="md-raised md-primary" ng-if="showNext()" ng-click="next()">More</md-button>\n\n    </section>\n  </md-content>\n</div>\n'),t.put("npdc-common/src/components/formula/directives/autocomplete/autocomplete.html",'<!DOCTYPE html>\n<div ng-if="field.visible">\n  <md-autocomplete\n    md-items="item in items"\n    md-item-text="label(item)"\n    md-min-length="minLength"\n    md-search-text="search.text"\n    md-floating-label="{{field.title}}"\n    md-selected-item-change="onSelect(item)"\n    md-select-on-match="true"\n    md-search-text-change="searchChange(search.text)"\n    md-match-case-insensitive="true">\n\n    <md-item-template>\n      <span md-highlight-flags="^i" md-highlight-text="search.text">{{label(item)}}</span>\n    </md-item-template>\n\n  <div npdc:formula-validation-message class="np-validation-message"></div>\n  </md-autocomplete>\n</div>\n'),t.put("npdc-common/src/components/formula/directives/file/file.html",'<!DOCTYPE html>\n<fieldset ng-class="{ valid: field.valid, error: field.error }" ng-if="field.visible" ng-controller="NpdcFormulaFileController as ctrl">\n  <md-whiteframe class="md-whiteframe-z2 np-formula-file">\n\n    <legend>\n      <div>{{ field.title }} ({{ nrFiles() }})</div>\n      <div npdc:formula-field-info class="np-field-info" ng-if="::field.description"></div>\n    </legend>\n\n\n    <ul class="np-formula-list">\n      <li ng-repeat="value in field.values | filter:isFile" class="np-formula-list-item">\n        <div class="np-formula-collapsed-item" ng-if="!value.visible" ng-click="field.itemToggle($index)"></div>\n        <md-whiteframe class="md-whiteframe-z2">\n          <fieldset>\n            <legend>\n              <!--span class="np-formula-array-object-title">{{ value.title }}</span-->\n              <div>\n                <span><md-icon class="md-avatar">{{::files[$index].icon || \'attachment\'}}</md-icon></span>\n                <span>{{::files[$index].filename}}</span>&nbsp;<span>{{::files[$index].file_size | bytes}}</span>\n              </div>\n              <div class="np-formula-object-ctrls">\n                <div npdc:formula-field-info class="np-field-info" ng-if="value.description"></div>\n                <a ng-show="!$first" href="" ng-click="field.moveUp($index)">\n                  <md-icon>arrow_upward</md-icon>\n                  <md-tooltip>{{ i18n.text.moveup }}</md-tooltip>\n                </a>\n                <a ng-show="!$last" href="" ng-click="field.moveDown($index)">\n                  <md-icon>arrow_downward</md-icon>\n                  <md-tooltip>{{ i18n.text.movedown }}</md-tooltip>\n                </a>\n                <a ng-show="files[$index] && files[$index].extras && files[$index].extras.length > 0" href="" ng-click="field.itemToggle($index)">\n                  <md-icon>{{ value.visible ? \'expand_less\' : \'expand_more\' }}</md-icon>\n                  <md-tooltip>{{ value.visible ? i18n.text.minimize.tooltip : i18n.text.maximize.tooltip }}</md-tooltip>\n                </a>\n                <md-menu>\n                  <md-button ng-show="ctrl.canDelete()" aria-label="{{ i18n.text.remove.label }}" class="md-icon-button remove" ng-click="$mdOpenMenu($event)">\n                    <md-icon md-menu-origin>close</md-icon>\n                    <md-tooltip>{{ i18n.text.remove.tooltip }}</md-tooltip>\n                  </md-button>\n                  <md-menu-content>\n                    <md-menu-item>\n                      <md-button ng-click="removeFile($index)" ng-attr-title="{{ i18n.text.remove.tooltip }}" class="md-warn">\n                        <md-icon md-menu-align-target>delete</md-icon> {{ i18n.text.remove.label }}\n                      </md-button>\n                    </md-menu-item>\n                  </md-menu-content>\n                </md-menu>\n              </div>\n            </legend>\n\n            <formula:fields fields="files[$index].extras" ng-if="value.visible"></formula:fields>\n          </fieldset>\n        </md-whiteframe>\n      </li>\n    </ul>\n    <div layout="column" layout-align="space-between end" class="np-formula-file-upload">\n      <md-button ng-disabled="!ctrl.canUpload()" ng-click="ctrl.displayUploadDialog($event);" class="md-raised md-primary">\n        <md-icon>backup</md-icon>\n        <md-tooltip ng-if="ctrl.canUpload()">Upload files</md-tooltip>\n      </md-button>\n      <p ng-show="!ctrl.canUpload()">\n        <span ng-if="!ctrl.isNew()">You are currently not authorized to upload (are you logged in?)</span>\n        <span ng-if="ctrl.isNew()">Uploading is disabled: You need to save before you can upload any files</span>\n      </p>\n    </div>\n\n    <div npdc:formula-validation-message class="np-validation-message"></div>\n  </md-whiteframe>\n</fieldset>\n'),t.put("npdc-common/src/components/formula/directives/gcmd/gcmdKeyword.html",'<!DOCTYPE html>\n<div ng-if="tree && field.visible">\n  <md-autocomplete md-items="item in querySearch(filter.text)" md-min-length="1" md-search-text="filter.text" md-floating-label="{{ \'gcmd.find\' | t }}" md-selected-item-change="onSelect(item)" md-item-text="item.label" md-menu-class="np-autocomplete-custom">\n\n    <md-item-template>\n      <span class="np-autocomplete-custom-main">\n        <span md-highlight-flags="^i" md-highlight-text="filter.text">\n          {{item.label}}\n        </span>\n      </span>\n      <span class="np-autocomplete-custom-meta shade">\n        <span>{{ parents(item) }}</span>\n      </span>\n    </md-item-template>\n  </md-autocomplete>\n\n  <md-input-container>\n    <label>{{ keyword.Category.title }}</label>\n    <md-select ng-model="keyword.Category.value">\n      <md-option ng-repeat="val in treeValues(1)" value="{{::val.label}}">{{val.label}}</md-option>\n    </md-select>\n  </md-input-container>\n\n  <md-input-container ng-if="!!keyword.Category.value">\n    <label>{{ keyword.Topic.title }}</label>\n    <md-select ng-model="keyword.Topic.value">\n      <md-option ng-repeat="val in treeValues(2)" value="{{::val.label}}">{{val.label}}</md-option>\n    </md-select>\n  </md-input-container>\n\n  <md-input-container ng-if="!!keyword.Topic.value">\n    <label>{{ keyword.Term.title }}</label>\n    <md-select ng-model="keyword.Term.value">\n      <md-option ng-repeat="val in treeValues(3)" value="{{::val.label}}">{{val.label}}</md-option>\n    </md-select>\n  </md-input-container>\n\n  <md-input-container ng-if="!!keyword.Term.value">\n    <label>{{ keyword.Variable_Level_1.title }}</label>\n    <md-select ng-model="keyword.Variable_Level_1.value">\n      <md-option ng-repeat="val in treeValues(4)" value="{{::val.label}}">{{val.label}}</md-option>\n    </md-select>\n  </md-input-container>\n\n  <md-input-container ng-if="!!keyword.Variable_Level_1.value">\n    <label>{{ keyword.Variable_Level_2.title }}</label>\n    <md-select ng-model="keyword.Variable_Level_2.value">\n      <md-option ng-repeat="val in treeValues(5)" value="{{::val.label}}">{{val.label}}</md-option>\n    </md-select>\n  </md-input-container>\n\n  <md-input-container ng-if="!!keyword.Variable_Level_2.value">\n    <label>{{ keyword.Variable_Level_3.title }}</label>\n    <md-select ng-model="keyword.Variable_Level_3.value">\n      <md-option ng-repeat="val in treeValues(6)" value="{{::val.label}}">{{val.label}}</md-option>\n    </md-select>\n  </md-input-container>\n\n  <md-input-container>\n    <label>{{ keyword.Detailed_Variable.title }}</label>\n    <input type="text" ng-model="keyword.Detailed_Variable.value" />\n  </md-input-container>\n</div>\n'),
t.put("npdc-common/src/components/formula/directives/person/person.html",'<!DOCTYPE html>\n<div ng-if="field.visible">\n  <div layout="row">\n    <div flex="50" flex-sm="100">\n      <md-autocomplete\n        md-items="item in querySearch(firstName.value, \'first_name\')"\n        md-min-length="1"\n        md-search-text="firstName.value"\n        md-floating-label="{{firstName.title}}"\n        md-selected-item-change="onSelect(item)"\n        md-item-text="item.first_name"\n        md-menu-class="np-autocomplete-custom">\n\n        <md-item-template>\n          <span class="np-autocomplete-custom-main">\n            <span md-highlight-flags="^i" md-highlight-text="firstName.value">\n              {{item.first_name}}\n            </span>\n            <span class="shade">{{item.last_name}}</span>\n          </span>\n          <span class="np-autocomplete-custom-meta">\n            <span class="shade">{{item.email}}</span>\n          </span>\n        </md-item-template>\n\n      </md-autocomplete>\n      <div npdc:formula-validation-message class="np-validation-message"></div>\n    </div>\n    <div flex="50" flex-sm="100">\n      <md-autocomplete\n        md-items="item in querySearch(lastName.value, \'last_name\')"\n        md-min-length="1"\n        md-search-text="lastName.value"\n        md-floating-label="{{lastName.title}}"\n        md-selected-item-change="onSelect(item)"\n        md-item-text="item.last_name"\n        md-menu-class="np-autocomplete-custom">\n\n        <md-item-template>\n          <span class="np-autocomplete-custom-main">\n            <span md-highlight-flags="^i" md-highlight-text="lastName.value">\n              {{item.last_name}}\n            </span>\n            <span class="shade">, {{item.first_name}}</span>\n          </span>\n          <span class="np-autocomplete-custom-meta">\n            <span class="shade">{{item.email}}</span>\n          </span>\n        </md-item-template>\n\n      </md-autocomplete>\n      <div npdc:formula-validation-message class="np-validation-message"></div>\n    </div>\n  </div>\n  <div>\n    <md-autocomplete\n      md-items="item in querySearch(email.value, \'email\')"\n      md-min-length="1"\n      md-search-text="email.value"\n      md-floating-label="{{email.title}}"\n      md-selected-item-change="onSelect(item)"\n      md-item-text="item.email"\n      md-menu-class="np-autocomplete-custom">\n\n      <md-item-template>\n        <span class="np-autocomplete-custom-main">\n          <span md-highlight-flags="^i" md-highlight-text="email.value">\n            {{item.email}}\n          </span>\n        </span>\n        <span class="np-autocomplete-custom-meta">\n          <span class="shade">{{item.first_name}}</span>\n          <span class="shade">{{item.last_name}}</span>\n        </span>\n      </md-item-template>\n\n    </md-autocomplete>\n    <div npdc:formula-validation-message class="np-validation-message"></div>\n  </div>\n  <div ng-repeat="field in otherFields" ng-show="field.visible">\n    <formula:field field="field"></formula:field>\n  </div>\n</div>\n'),t.put("npdc-common/src/components/formula/directives/placename/placename.html",'<!DOCTYPE html>\n<div ng-if="field.visible">\n  <md-autocomplete md-items="item in querySearchPlacenames(placename.value)" md-min-length="1"\n    md-search-text="placename.value" md-floating-label="{{placename.title}}"\n    md-selected-item-change="onSelectPlacename(item)" md-item-text="item.title" md-menu-class="np-autocomplete-custom">\n\n    <md-item-template>\n      <span class="np-autocomplete-custom-main">\n        <span md-highlight-flags="^i" md-highlight-text="placename.value">\n          {{item.title}}\n        </span>\n      </span>\n      <span class="np-autocomplete-custom-meta shade">\n        <span>{{item.location}}</span>\n        <span>{{item.country}}</span>\n        <span>{{item.north}}N {{item.east}}E</span>\n      </span>\n    </md-item-template>\n\n  </md-autocomplete>\n  <div npdc:formula-validation-message class="np-validation-message" ng-init="field=placename"></div>\n  <div layout="row">\n    <div flex="50" flex-sm="100">\n      <md-input-container>\n        <label for="{{::area.uid}}">{{ (area.required ? area.title + \' (\' + i18n.text.required + \')\' : area.title) }}</label>\n\n        <md-select ng-model="area.value">\n          <md-option ng-repeat="val in area.values" value="{{::val.id}}">{{val.label}}</md-option>\n        </md-select>\n\n        <div npdc:formula-validation-message class="np-validation-message" ng-init="field=area"></div>\n      </md-input-container>\n    </div>\n    <div flex="50">\n      <md-autocomplete md-items="item in querySearchCountries(countrySearchText)" md-min-length="1"\n        md-search-text="countrySearchText" md-floating-label="{{country.title}}" md-item-text="item.name"\n        md-menu-class="np-autocomplete-custom" md-selected-item="selectedCountryItem" md-selected-item-change="country.value = item.code">\n\n        <md-item-template>\n          <span class="np-autocomplete-custom-main">\n            <span md-highlight-flags="^i" md-highlight-text="countrySearchText">\n              {{item.name}}\n            </span>\n          </span>\n          <span class="np-autocomplete-custom-meta shade">\n            <span>{{item.code}}</span>\n            <span>{{item.native}}</span>\n          </span>\n        </md-item-template>\n\n      </md-autocomplete>\n      <div npdc:formula-validation-message class="np-validation-message" ng-init="field=country"></div>\n    </div>\n  </div>\n\n</div>\n'),t.put("npdc-common/src/components/formula/directives/tabdata/tabdata.html",'<!DOCTYPE html>\n<md-input-container class="np-formula-tabdata" ng-show="field.visible">\n  <label for="{{::field.uid}}">{{ (field.required ? field.title + \' (\' + i18n.text.required + \')\' : field.title ) }}</label>\n  <div class="np-formula-td-header">\n    <span class="header-number"></span>\n    <div class="header-string">{{csvHeader}}</div>\n  </div>\n  <textarea ng-model="csvData" md-no-autogrow class="csv-textarea"></textarea>\n  <div class="np-td-delimiter">Delimiter: {{delimiter}}</div>\n  <div ng-show="field.errors" class="np-validation-message">\n    <div ng-repeat="error in field.errors" class="md-caption" role="alert">\n      {{ field.getErrorText(error) }}\n    </div>\n  </div>\n</md-input-container>\n'),t.put("npdc-common/src/wrappers/filefunnel.html",'<!DOCTYPE html>\n<md-dialog aria-label="{{ \'upload.title\' | t }}" class="filefunnel">\n  <md-dialog-content>\n    <div class="md-dialog-content">\n      <h2 class="md-title">{{ \'upload.title\' | t }}</h2>\n\n      <md-list>\n        <md-list-item class="md-3-line" ng-repeat="file in ff.files">\n          <md-icon class="md-avatar">attachment</md-icon>\n          <div class="md-list-item-text">\n            <h3>{{file.reference.name}}</h3>\n            <md-progress-linear md-mode="{{ff.progressType}}" value="{{file.progress}}"></md-progress-linear>\n            <span class="{{file.elements.info.dom.className}}">{{file.elements.info.value}}</span>\n          </div>\n        </md-list-item>\n        <md-list-item ng-if="askForScope && ff.files.length">\n          <p>{{ \'upload.restrict\' | t }}</p>\n          <md-checkbox class="md-secondary" ng-model="access.data"></md-checkbox>\n        </md-list-item>\n      </md-list>\n\n    </div>\n  </md-dialog-content>\n  <md-dialog-actions>\n    <div flex layout="row" layout-align="space-between center">\n      <md-button class="md-raised md-primary" ng-disabled="ff.status == FileFunnelStatus.UPLOADING"\n        ng-click="ff.browse()" >{{ \'upload.choose\' | t }}</md-button>\n\n      <md-button class="md-raised md-primary" ng-if="ff.status != FileFunnelStatus.UPLOADING"\n        ng-disabled="ff.status == FileFunnelStatus.NONE" ng-click="upload()">{{ \'upload.action\' | t }}</md-button>\n      <md-button class="md-raised md-primary" ng-if="ff.status == FileFunnelStatus.UPLOADING"\n        ng-click="abort();">{{ \'cancel\' | t }}</md-button>\n    </div>\n  </md-dialog-actions>\n</md-dialog>\n'),t.put("npdc-common/src/components/app/app.html",'<!DOCTYPE html>\n<npdc:toolbar options="options"></npdc:toolbar>\n<div ng-if="warning" class="np-environment-warning">!! Environment: Production !!</div>\n\n<!-- Content wrapper -->\n<md-content class="np-content-wrapper">\n  <!-- Subheader bar -->\n  <div class="np-sub-toolbar"></div>\n\n  <div class="np-content-card">\n\n    <main class="np-content md-whiteframe-12dp" layout="column">\n      <npdc:warnings></npdc:warnings>\n     <div hide-gt-xs><npdc:breadcrumbs></npdc:breadcrumbs></div>\n      <div ng-view autoscroll="true"></div>\n    </main>\n  </div>\n</md-content>\n\n<npdc:footer></npdc:footer>\n'),t.put("npdc-common/src/components/bottom/npdc-bottom.html",'\n<footer layout-padding>\n  <md-content>\n    The <a href="https://data.npolar.no"><b>Norwegian Polar Data Centre</b> </a> is operated by the <a href="http://npolar.no/en">Norwegian Polar Institue</a>\n  </md-content>\n</footer>'),t.put("npdc-common/src/components/bottom-sheet/bottomSheet.html",'<!DOCTYPE html>\n<div>\n  <md-button class="md-icon-button np-bottom-sheet-toggle" ng-click="showBottomSheet($event)">\n    <md-icon>menu</md-icon>\n    <md-tooltip>{{ \'edit.actions\' | t }}</md-tooltip>\n  </md-button>\n  <div ng-if="options.alwaysShow" ng-include="\'bottom-sheet-template.tmpl\'"></div>\n</div>\n\n<script type="text/ng-template" id="bottom-sheet-template.tmpl">\n  <md-bottom-sheet class="md-grid" layout="column" ng-cloak>\n    <md-list flex layout="row" layout-align="center center">\n      <md-list-item ng-repeat="item in options.items">\n        <md-button class="md-grid-item-content {{item.classes}}" ng-click="listItemClick($index)">\n          <md-icon>{{item.icon}}</md-icon>\n          <div class="md-grid-text"> {{ item.name }} </div>\n        </md-button>\n      </md-list-item>\n    </md-list>\n  </md-bottom-sheet>\n</script>\n'),t.put("npdc-common/src/components/breadcrumbs/breadcrumbs.html",'<!DOCTYPE html>\n<span class="npdc-crumbs-container">\n\t<span ng-repeat="crumb in breadcrumbs.breadcrumbs">\n    <span ng-if="!$last">\n      <a ng-href="{{crumb.href}}" title="{{ (crumb.title || crumb.text) | t }}">{{ crumb.text | t }}</a>\n      <md-icon>chevron_right</md-icon>\n    </span>\n    <span ng-if="$last">{{ crumb.text  | t }}</span>\n  </span>\n</span>'),t.put("npdc-common/src/components/button/create-button.html",'<!DOCTYPE html>\n<md-button class="md-fab" ng-if="security.isAuthorized(\'create\', resource.path)" ng-href="{{ resource.newHref() }}">\n  <md-tooltip md-direction="top">New</md-tooltip>\n  <md-icon>add</md-icon>\n</md-button>\n'),t.put("npdc-common/src/components/button/delete-button.html",'<!DOCTYPE html>\n<md-button class="md-raised md-warn"\n    ng-if="security.isAuthorized(\'delete\', resource.path) && document._rev"\n    ng-click="confirmDelete()">\n    <md-icon>delete</md-icon> Delete</md-button>\n'),t.put("npdc-common/src/components/button/edit-button.html",'<!DOCTYPE html>\n<md-button class="md-fab" ng-if="security.isAuthorized(\'update\', resource.path)" ng-href="{{ resource.editHref(document.id) }}">\n  <md-tooltip md-direction="top">Edit</md-tooltip>\n  <md-icon>edit</md-icon>\n</md-button>\n'),t.put("npdc-common/src/components/button/save-button.html",'<!DOCTYPE html>\n<md-button ng-if="security.isAuthorized(\'update\', resource.path)"\n    ng-click="save()" class="md-fab">\n  <md-tooltip md-direction="top">Save</md-tooltip>\n  <md-icon>save</md-icon>\n</md-button>\n'),t.put("npdc-common/src/components/contributions/contributions.html",'<span ng-if="ctrl.isAuthenticated() && ctrl.getFacet(\'created_by\')">\n  <md-content>\n    <md-menu>\n      <md-button ng-click="$mdOpenMenu($event)" class="md-icon-button" aria-label="Open contributors menu">\n        <md-icon>person</md-icon>\n        <md-tooltip>{{ \'Contributors\' | t }}</md-tooltip>\n      </md-button>\n\n      {{ ctrl.getUser().email | name }}\n\n      <md-menu-content width="6">\n        <!-- @todo searchable autocomplete list? -->\n        <md-subheader>{{ \'Created by\' | t }}</md-subheader>\n        <md-menu-item ng-repeat="f in ctrl.getFacet(\'created_by\', facets)">\n          <md-button rel="nofollow" ng-href="?filter-created_by={{f.term}}">{{ f.term | name }} [{{f.term}}] ({{f.count}})</md-button>\n        </md-menu-item>\n      </md-menu-content>\n    </md-menu>\n\n    <npdc:facet-link value="{{ ctrl.getUser().email }}" field="created_by" params="{ sort: \'-created\'}" text="is&#160;creator" count="{{ctrl.count(\'created_by\', ctrl.getUser().email) }}"></npdc:facet-link>\n    <npdc:facet-link value="{{ ctrl.getUser().email }}" field="updated_by" params="{ sort: \'-updated\'}" text="is&#160;last&#160;editor" count="{{ctrl.count(\'updated_by\', ctrl.getUser().email) }}"></npdc:facet-link>\n    <npdc:facet-link ng-if="ctrl.getFacet(\'people.email\')" value="{{ ctrl.getUser().email }}" field="people.email" text="is&#160;contributor" count="{{ctrl.count(\'people.email\', ctrl.getUser().email) }}"></npdc:facet-link>\n  </md-content>\n\n</span>'),t.put("npdc-common/src/components/footer/footer.html",'<!DOCTYPE html>\n<footer layout="row" layout-align="center start" layout-wrap>\n  <div flex="33" flex-sm="50" flex-order-sm="2">\n    <div class="np-center-box">\n      <ol class="address"><md-tooltip>NPDC is a permanent facility operated by the {{ \'npolar.no\' |t }}</md-tooltip>\n        <li><strong><a href="https://data.npolar.no">Norwegian Polar Data Centre</a></strong></li>\n        <li><a href="http://npolar.no">{{ \'npolar.no\' |t }}</a></li>\n      </ol>\n\n    </div>\n  </div>\n  <div flex="33" flex-sm="50" flex-order-sm="1">\n    <md-tooltip>NPDC is registered with re3data.org</md-tooltip>\n    <div class="np-center-box">\n      <a href="https://doi.org/10.17616/R3B94H"><img src="/assets/img/re3datalogo.png" width="142px" style="max-width:100%"/></a>\n    </div>\n  </div>\n  <div flex="33" flex-sm="100" flex-order-sm="3">\n    <div class="np-center-box">\n      <md-button class="md-icon-button" href="http://github.com/npolar/npdc-common">\n        <i class="github-icon"></i>\n        <md-tooltip>Open source @ Github</md-tooltip>\n      </md-button>\n    </div>\n  </div>\n\n  <a href="" id="scroll-up" onclick="window.scrollTo(0, 0); window.location.hash = \'\';" hide-sm hide-xs>\n    <md-icon>keyboard_arrow_up</md-icon>\n    <md-tooltip md-direction="left">Scroll to top</md-tooltip>\n  </a>\n</footer>\n<npolar-message></npolar-message>\n\n<script>\n  // Google Analytics\n  // https://developers.google.com/analytics/devguides/collection/analyticsjs/\n  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;\n  ga(\'create\', \'UA-770196-26\', \'auto\');\n  ga(\'send\', \'pageview\');\n</script>\n<script async src=\'//www.google-analytics.com/analytics.js\'></script>\n<script>\n  //https://support.google.com/analytics/answer/1136920?hl=en\n  /**\n  * Function that tracks a click on an outbound link in Google Analytics.\n  * For this to work the outbound link needs a onclick="trackOutboundLink(uri); return false;" like:\n  * [a href="http://api.npolar.no/oceanography/?q=&amp;format=json" onclick="trackOutboundLink(\'http://api.npolar.no/oceanography/?q=&amp;format=json\'); return false;" target="_blank"]Oceanography API[/a]\n  */\n  var trackOutboundLink = function(url) {\n     ga(\'send\', \'event\', \'outbound\', \'click\', url, {\'hitCallback\':\n       function () {\n       document.location = url;\n       }\n     });\n  };\n</script>\n'),t.put("npdc-common/src/components/formula/edit.html",'<!DOCTYPE html>\n<h1 class="np-heading md-display-1">{{ \'Editing\' | t }} <a ng-href="{{ id === \'__new\' ? resource.uiBase : href(id) }}">{{ title }}</a>\n  <a ng-if="help && help.uri" ng-href="{{ help.uri }}" target="_blank">\n    <md-button class="md-icon-button">\n    <md-icon md-menu-origin>help</md-icon>\n    <md-tooltip>{{ \'help-with-editing\' | t }}</md-tooltip>\n  </md-button></a>\n</h1>\n\n<npdc:bottom-sheet options="bottomSheetOptions" ng-show="document._rev"></npdc:bottom-sheet>\n<div ng-class="{ \'np-bottom-sheet-static\': bottomSheetOptions.alwaysShow }">\n  <formula options="formula._cfg"></formula>\n  <npdc:loader ng-if="!formula._cfg.form.ready"></npdc:loader>\n</div>\n<npdc:save-button class="np-primary-control" ng-show="formula._cfg.form.ready"></npdc:save-button>'),t.put("npdc-common/src/components/loader/loader.html",'<!DOCTYPE html>\n<div ng-if="!error()" layout="row" layout-sm="column" layout-align="center center" layout-padding>\n  <md-progress-circular md-mode="indeterminate" md-diameter="96"></md-progress-circular>\n</div>\n<div ng-if="error()" layout-padding>{{error()}}</div>\n'),t.put("npdc-common/src/components/metadata/metadata.html",'<md-card>\n  <md-card-header>\n    <md-card-avatar>\n      <md-icon><img src="/assets/components/metadata/json-ld-data-48.png"></md-icon>\n    </md-card-avatar>\n    <md-card-header-text>\n      <span class="md-headline">{{ (headline || \'Machine-readable metadata\') | t }}</span>\n      <span class="md-subhead" title="URI">{{ uri }}</span>\n      </span>\n    </md-card-header-text>\n  </md-card-header>\n  <md-card-content>\n    <p ng-if="formats">{{ (formats.length > 1) ? (\'Formats\'|t) : (\'Format\'|t) }}:\n      <span ng-repeat="link in formats">\n        <a ng-href="{{link.href}}" title="{{link.type}}">{{ link.title || link.href }}</a> <span ng-if="!$last">|</span>\n      </span>\n    </p>\n    <p ng-if="license">Metadata license: <a ng-href="{{ license }}">{{ license | t}}</a></p>\n    <p ng-if="schema">Metadata schema: <a ng-href="{{ schema }}">{{ schema | t }}</a></p>\n    <p ng-if="byline" marked="byline"></p>\n  </md-card-content>\n</md-card>\n\n<md-card ng-if="document">\n  <md-card-header>\n    <md-card-avatar>\n      <md-icon>history</md-icon>\n    </md-card-avatar>\n    <md-card-header-text>\n      <span class="md-headline">{{ (headline || \'Edit history\') | t }}</span>\n    </md-card-header-text>\n  </md-card-header>\n  <md-card-content>\n\n    <p>Metadata was created by {{ document.created_by | name  }}<span ng-if="editors().length > 0">, and edited by </span><span ng-repeat="editor in editors()"><span ng-if="!$first">, <span ng-if="$last">and </span></span>{{ editor }}</span>. Last update by {{ document.updated_by | name  }}.</p>\n\n    <md-menu>\n      <md-button ng-click="$mdOpenMenu($event)" class="md-icon-button" aria-label="Open sample menu">\n       <md-icon>track_changes</md-icon>\n       <md-tooltip>Time machine</md-tooltip>\n     </md-button>\n\n      <md-menu-content width="6">\n        <md-menu-item ng-repeat="edit in edits" ng-init="text = edit.when +\' \'+ (edit.user.name || edit.user.id|name) +\' [revision \'+ (edit.revision || \'?\') +\']\'">\n          <md-button ng-if="rev == edit.rev || edit.revision == 1" ng-disabled="true">{{text}}</md-button>\n          <md-button ng-if="rev != edit.rev && edit.revision > 1" rel="nofollow" ng-href="{{ edit.href }}">{{text}}</md-button>\n        </md-menu-item>\n      </md-menu-content>\n     </md-menu>\n    <!--@todo WARN if not newest @todo make prettier-->\n    <!-- @todo Available/Published DOI created) time -->\n\n    <span>\n      <md-tooltip>{{ document.created.split(\'T\')[1] }}</md-tooltip>\n      {{\'Created\' | t}} {{ document.created | isodate }}\n    </span>\n    <span>\n      <md-tooltip>{{document.updated.split(\'T\')[1]}} [revision: {{document._rev.split(\'-\')[0] }}]</md-tooltip>\n      {{\'Updated\' | t}} {{ document.updated | isodate }}\n    </span>\n\n  </md-card-content>\n</md-card>'),t.put("npdc-common/src/components/tabs/tabs.html",'<!DOCTYPE html>\n<nav ng-if="::tabs.length > 1" class="np-tabs-nav" layout="row">\n  <a class="np-nav-scroll" ng-click="back();"><md-icon>navigate_before</md-icon></a>\n  <md-virtual-repeat-container md-orient-horizontal flex>\n    <a md-virtual-repeat="tab in ::tabs" flex href="" md-ink-ripple class="np-nav-item" ng-class="{ active: tab.active, error: tab.valid === false}" ng-click="go($event, tab)">{{ tab.title }}</a>\n  </md-virtual-repeat-container>\n  <a class="np-nav-scroll" ng-click="next();"><md-icon>navigate_next</md-icon></a>\n</nav>\n'),t.put("npdc-common/src/components/toolbar/toolbar.html",'<!DOCTYPE html>\n<md-toolbar class="np-toolbar">\n  <div class="md-toolbar-tools np-toolbar-content">\n    \n    <a href=" {{ uiBase() || \'.\'}}" class="np-app-title">\n      <strong>{{ appTitle() }}</strong>\n    </a>\n\n    <span class="flex"><!-- This span is used to push the other content to the right --></span>\n\n    <a href="/" class="np-toolbar-title" hide>\n      <a href="/" class="np-toolbar-logo" hide-xs>\n        <img hide-xs src="/assets/img/NPI-logo-hvit-no.png" alt="{{siteTitle()}} {{ \'home\' | t }}" title="{{siteTitle()}}" />\n      </a>\n      <!--<span><!--{{ siteTitle() }}--><!--<a href="/" class="np-toolbar-logo"><abbr title="{{ \'NPDC\'|t }}">NPDC</abbr></a></span>-->\n    </a>\n    \n    <span class="flex"><!-- This span is used to push the other content to the right --></span>\n    \n     <md-menu class="np-app-menu">\n      \n      <md-button class="md-icon-button" ng-click="$mdOpenMenu($event)">\n        <md-icon md-menu-origin>apps</md-icon>\n        <md-tooltip>{{ \'npdc.menu.quicknav\' | t }}</md-tooltip>\n      </md-button>\n      \n      <md-menu-content width="6" class="np-app-menu-content">\n    \n        <!-- Apps -->    \n        <div ng-repeat="group in options.toolbarMenuGroups">\n          <md-subheader>{{group.name}}</md-subheader>\n          <md-grid-list md-cols="3" md-row-height="80px" md-gutter="10px">\n            <md-grid-tile ng-repeat="app in group.apps">\n              <a ng-href="{{app.link}}" class="np-app-icon">\n                <img ng-src="{{icon48(app)}}"/>\n                <div>{{ app.link | t }}</div>\n              </a>\n            </md-grid-tile>\n          </md-grid-list>\n          <md-divider></md-divider>\n        </div>\n\n        <!-- Apps for logged-in users -->\n        \n        \n        <div ng-show="security.isAuthenticated()">\n          <div ng-repeat="group in options.toolbarInternalApps">\n            <md-subheader>{{group.name}}</md-subheader>\n            <md-grid-list md-cols="3" md-row-height="80px" md-gutter="10px">\n              <md-grid-tile ng-repeat="app in group.apps">\n                <a ng-href="{{app.link}}" class="np-app-icon">\n                  <img ng-src="{{icon48(app)}}"/>\n                  <div>{{ app.link | t }}</div>\n                </a>\n              </md-grid-tile>\n            </md-grid-list>\n            <md-divider></md-divider>\n          </div>\n        </div>\n              \n      </md-menu-content>\n    </md-menu>\n    \n    <!-- Login -->\n    <npdc:user-menu></npdc:user-menu>\n    \n\n    <npdc:expand-search options="options.search.global"></npdc:expand-search>\n  \n  </div>\n</md-toolbar>'),t.put("npdc-common/src/components/user-menu/userMenu.html",'<!DOCTYPE html>\n<md-menu ng-if="!security.isAuthenticated()" class="np-user-menu">\n  <md-button aria-label="Open user" class="md-icon-button" ng-click="$mdOpenMenu($event)">\n    <md-icon md-menu-origin>person</md-icon>\n    <md-tooltip>{{ \'npdc.menu.user\' | t }}</md-tooltip>\n  </md-button>\n  <md-menu-content width="6">\n\n    <form class="np-login np-padding" ng-submit="login(email,password)">\n      <div layout="column">\n        <md-input-container>\n          <label for="username" class="md-no-float">{{ \'user.username\' | t }}</label>\n          <input type="text" ng-model="email" id="username" placeholder="Enter your email address">\n        </md-input-container>\n        <md-input-container ng-show="true">\n          <label for="password" class="md-no-float">{{ \'user.password\' | t }}</label>\n          <input type="password" id="password" ng-trim="true" ng-model="password" placeholder="Enter password (or 1-time code)">\n        </md-input-container>\n      </div>\n      <div layout="row" layout-align="space-between center">\n        <md-button ng-disabled="!email || password" type="button" ng-click="gouncer.onetime(email)" class="md-raised md-primary">Email code</md-button>\n        <md-button ng-disabled="!email || !password" type="submit" class="md-raised md-primary">{{ \'user.login\' | t }}</md-button>\n      </div>\n    </form>\n\n    <md-divider></md-divider>\n    <md-menu-item>\n      <md-menu>\n        <md-button ng-click="$mdOpenMenu($event)">\n          <md-icon>language</md-icon>\n          {{ lang.getNativeName(lang.getLang()) }}\n        </md-button>\n        <md-menu-content width="6">\n          <md-menu-item ng-repeat="subtag in lang.getLanguages()">\n            <md-button ng-disabled="subtag == lang.getLang()" ng-click="lang.setLang(subtag, lang.getLang())">{{ lang.getNativeName(subtag) }}<span ng-show="subtag==lang.getLang()"> ({{ \'npdc.current_language\' | t }})</span></md-button>\n          </md-menu-item>\n        </md-menu-content>\n      </md-menu>\n    </md-menu-item>\n  \n  \n  \n  </md-menu-content>\n</md-menu>\n\n<md-menu ng-if="security.isAuthenticated()" class="np-user-menu">\n  <md-button aria-label="Open user" class="md-icon-button" ng-click="$mdOpenMenu($event)">\n    <md-icon md-menu-origin>account_box</md-icon>\n    <md-tooltip>{{ security.getUser().name }}</md-tooltip>\n  </md-button>\n  <md-menu-content width="6">\n\n    <md-menu-item>\n      <md-button ng-href="/user/{{security.getUser().email }}" title="View profile for {{ security.getUser().name }}">\n        <md-icon md-menu-align-target>face</md-icon>\n        {{ security.getUser().name }}\n      </md-button>\n    </md-menu-item>\n\n    <md-divider></md-divider>\n    <md-menu-item>\n      <md-button ng-click="logout()">\n        <span>{{ \'user.logout\' | t }}</span>\n      </md-button>\n    </md-menu-item>\n    \n    <md-divider></md-divider>\n    <md-menu-item>\n      <md-menu>\n        <md-button ng-click="$mdOpenMenu($event)">\n          <md-icon>language</md-icon>\n          {{ lang.getNativeName(lang.getLang()) }}\n        </md-button>\n        <md-menu-content width="6">\n          <md-menu-item ng-repeat="subtag in lang.getLanguages()">\n            <md-button ng-disabled="subtag == lang.getLang()" ng-click="lang.setLang(subtag, lang.getLang())">{{ lang.getNativeName(subtag) }}<span ng-show="subtag==lang.getLang()"> ({{ \'npdc.current_language\' | t }})</span></md-button>\n          </md-menu-item>\n        </md-menu-content>\n      </md-menu>\n    </md-menu-item>\n    \n\n  </md-menu-content>\n</md-menu>\n\n\n\n'),t.put("npdc-common/src/components/warnings/warnings.html",'<md-card ng-if="warnings().length > 0">\n  <md-card-header>\n  <md-card-avatar>\n    <md-icon>{{ icon }}</md-icon>\n  </md-card-avatar>\n  <md-card-header-text>\n    <span class="md-headline">{{ headline | t }}</span>\n    <span class="md-subhead">{{ subhead | t }}</span>\n  </md-card-header-text>\n  </md-card-header>\n  <md-card-content>\n    <ul>\n      <li ng-repeat="warn in warnings()">\n        <span marked="warn"></span>\n      </li>\n    </ul>\n  </md-card-content>\n</md-card>\n<md-card ng-if="notices().length > 0 && warnings().length === 0">\n  <md-card-header>\n  <md-card-avatar>\n    <md-icon>info</md-icon>\n  </md-card-avatar>\n  <md-card-header-text>\n    <span class="md-headline">{{ notices_headline }} </span>\n    <span class="md-subhead">{{ notices_subhead}}<span ng-if="document.released">Data release: {{ document.released.split(\'T\')[0] }}</span></span>\n  </md-card-header-text>\n  </md-card-header>\n  <md-card-content>\n    <ul>\n      <li ng-repeat="info in notices()">\n        {{ info | t }}\n      </li>\n    </ul>      \n  </md-card-content>\n</md-card>')}])},{}]},{},[1,370,378]);
//# sourceMappingURL=app.js.map
